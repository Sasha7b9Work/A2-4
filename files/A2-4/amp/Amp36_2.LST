A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp36_2.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp36_2.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak 
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                            jmp begin;;Main               ; Locate a jump to the start of code a
                             t 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     5

0013 32              256                                                     reti
001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 020000   F      262                                                     jmp             inter2  ;IE.5,IP.5(ET2,PT2)
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti 
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
  0034               314     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока1
  0033               315     chind2                          DATA    33h;счетчик индикации
  0032               316     sadiap2                 DATA    32h;сохр диапазон на кот проходила запись блока2
  0031               317     sadiap3                 DATA    31h;сохр диапазон на кот проходила запись блока3
  0030               318     sadiap4                 DATA    30h;сохр диапазон на кот проходила запись блока4
                     319     ;DATA           2fh
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     6

                     320     ;;;;;
  0020               321      cellbit                DATA    20h
  0000               322     bitznak         BIT     cellbit.0       ;20.0           
  0001               323     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               324     znmat           BIT             cellbit.2       ;20.2
  0003               325     bitrs           BIT             cellbit.3       ;20.3
  0004               326     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               327     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               328     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               329     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     330     
  0021               331     cellbit1                DATA    21h
  0008               332     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               333     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               334     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               335     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     336     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               337     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     338     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               339     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     340     
  0022               341     cellbit2                DATA    22h
  0010               342     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               343     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               344     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               345     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               346     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               347     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               348     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               349     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     350     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     351     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     352     ;и выдает т.н. буфер индикации  
  0023               353     cellbit3                DATA    23h
  0018               354     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               355     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               356     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               357     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
  001C               358     bitprer         BIT             cellbit3.4      ;22.4    
                     359     ;bit            BIT             cellbit3.5      ;22.5    
                     360     ;bit            BIT             cellbit3.6      ;22.6            
                     361     ;bit            BIT             cellbit3.7      ;22.7
                     362             
  005E               363     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     364     ;hex
  0062               365     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               366     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               367     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               368     rez_A2   data 7bh; A2
                     369     
  0098               370     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               371     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               372     chdel    data  83h              ; счетчик задержки
                     373     ;float
  0084               374     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               375     rezAp    data  88h              ;4byte  A+
  008C               376     rezAm    data  8ch              ;4byte  A-
  0090               377     koefKp   data  90h              ;4byte  K+
  0094               378     koefKm   data  94h              ;4byte  K-
                     379     ;hex 
  009A               380     parT     data  9ah              ;параметр времени измерения
  009B               381     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               382     rez_A3   data  9ch              ;A3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     7

                     383     ;FLOAT
  00A0               384     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               385     rez_Ak  data  0a4h         ;Ak
  00A8               386     parol           data  0a8h         ;храним в памяти пароль
  00AC               387     chind   data  0ach         ;счетчик индикации
                     388     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               389     diap    data  0aeh         ;номер диапазона
  00AF               390     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               391     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               392     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               393     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               394     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               395     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               396     work    data  0b8h        ;рабочая ячейка
  00BC               397     konstA  data  0bch        ;     введенная с крана константа A
                     398     ;konstB data  0c0h         ;    введенная с крана константа B
  00C0               399     saven_bl2       data    0c0h;;копия адреса последней записанной ячейки блока2
  00C2               400     saven_bl3       data  0c2h;копия адреса последней записанной ячейки блока3 
                     401                ;c4 1bait
  00C5               402     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               403     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               404     interva data  0cdh;значение интервала (запись)2baita
  00CF               405     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               406     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               407     volume          data    0d5h;объем блока 2 baita
  00D6               408     chblok          data    0d6h;volume;кол измерений блока
  00D7               409     copy_hl         data  0d7h;адрес ячейки блока для просмотра 
  00D9               410     saven_bl4       data  0d9h;копия адреса последней записанной ячейки блока4
                     411     ;data           0dbh e0h-граница стека
                     412     
                     413     ;внешнее ОЗУ 64K 
                     414     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     415     ;ячейку  стирается целая страница 0..ffh рпзу
                     416     ;               XSEG AT 100h
                     417             PUBLIC    MASS0
  0100               418     MASS0  xdata 0100h;     скользящий массив измерения
  0104               419     MASS1  xdata 0104h;
  0108               420     MASS2  xdata 0108h;
  010C               421     MASS3  xdata 010ch;
  0110               422     MASS4  xdata 0110h;
  0114               423     MASS5  xdata 0114h;
  0118               424     MASS6  xdata 0118h;
  011C               425     MASS7  xdata 011ch;
  0120               426     MASS8  xdata 0120h;
  0124               427     MASS9  xdata 0124h;
  0128               428     MASS10  xdata 0128h;
  012C               429     MASS11  xdata 012ch;
  0130               430     MASS12  xdata 0130h;
  0134               431     MASS13  xdata 0134h;
  0138               432     MASS14  xdata 0138h;
  013C               433     MASS15  xdata 013ch;
  0140               434     MASS16  xdata 0140h;
  0144               435     MASS17  xdata 0144h;
  0148               436     MASS18  xdata 0148h;
  014C               437     MASS19  xdata 014ch;
  0E00               438     chbuf1  xdata 0e00h;счетчик буфера 1
                     439     ;xdata  0e04
                     440     
  0000               441                             rr0             EQU 00
  0001               442                     rr1       equ   01
  0006               443                     rr6   equ 06
  0002               444                     rr2       equ   02
  0003               445                     rr3       equ   03
  0007               446                     rr7   equ 07
                     447     
  0008               448                     r8   equ 08
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     8

  0009               449                     r9        equ   09
  000A               450                     r10       equ   10
  000B               451                     r11   equ 11
                     452     
                     453                     
                     454        
----                 455                  rseg     Main          ; Switch to this code segment.
                     456     
                     457                  using    0              ; Specify register bank for the following
                     458     
0100                 459     org 100h
                     460     ;$EJECT
                     461     
0100 7581E0          462     begin:     mov  sp, #0e0h
0103 75E900          463                                             mov             PCA0L,#00;=0x00;
0106 75D900          464                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          465                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CC          466                                             mov     P1MDOUT,#0cch;86h;8fh;=0x8f;
010F 75A600          467                                             mov     P2MDOUT,#00;=0x00;
                     468             
0112 75A73F          469             mov     P3MDOUT,#3fh;
0115 75B5FF          470             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          471             mov     REF0CN,#03h;=0x03;
                     472             
011B 75E114          473             mov     XBR0,#14h;= 0x14;
011E 75E200          474             mov     XBR1,#00; =0x00;
0121 75E300          475             mov XBR2,#00;=0x00;
0124 75B0C0          476             mov     P3,#0c0h
0127 75FFDE          477             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          478             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          479             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          480             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          481             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          482             mov     TL0,#0f9h;=0xf9; 
0139 75E680          483             mov     EIE1,#80h;=0x80;
                     484     
013C 75D480          485             mov     DAC0CN,#80h;=0x80;
013F 75D780          486             mov     DAC1CN,#80h;=0x80;
0142 75B167          487             mov     OSCXCN,#67h;=0x67;
                     488     
                     489      
                     490     
0145 E5B1            491     gener:     mov a, oscxcn
0147 B4E7FB          492                cjne a,#11100111b,gener
                     493                            
014A 75B288          494             mov     OSCICN,#88h;=0x84;
014D 75CA00          495         mov TMR2RLL,#0;=0;
0150 75CBD1          496         mov TMR2RLH,#0d1h;=0xd1;
                     497       
0153 D28E            498                     setb  TCON.6                    ;регистр управления
0155 D28C            499                      setb tcon.4
                     500     
0157 75EF00          501             mov     RSTSRC,#0;=00   ;//источники сброса 
                     502     
                     503             
015A 75E340          504          mov        XBR2,#40h
015D 75E10E          505              mov    XBR0,#0eh;06h;16h
0160 75F803          506             mov             SPI0CN,#03
0163 759D31          507             mov             spi0ckr,#31H;;;;;;;;#04
                     508     ;установка скорости
0166 759850          509                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          510                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          511                                             mov             CKCON,#00010000b;TIM=1
016F 758920          512                                             mov             TMOD,#00100000b;реж2 внутр ист синх
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE     9

                             р
0172 758840          513                                             mov             TCON,#01000000b;счетчик запущен
                     514     ;;;;;
0175 75D900          515                                             mov             PCA0MD,#00              ;PCA 
0178 75DA00          516                                             mov             PCA0CPM0,#00000000b;00000110b;01000
                             010b;
017B 75EA00          517                                             mov             PCA0CPL0,#00
017E 75FA9C          518                                             mov             PCA0CPH0,#9ch;регулировка звука 088
                             h;90h
0181 75D840          519                                             mov             PCA0CN,#40h
0184 75C800          520                                             mov             T2CON,#00
                     521     ;;;;;;
0187 7A50            522                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0189 7B2C            523                                             mov                     r3,#2ch
018B 120454          524                                             call            re4byte                 ;502ch 1 ba
                             it skor
018E E508            525                                             mov                     a,r8
0190 B40007          526                                             cjne            a,#00,yst19
0193 C213            527                                             clr                     bitv19                  ;57
                             .6
0195 758DF4          528                                             mov                     TH1,#244
0198 8008            529                                             jmp               yst1
019A 900000   F      530     yst19:          mov                     dptr,#teS19_2
019D D213            531                                             setb            bitv19                  ;19,2
019F 758DDC          532                                             mov                     TH1,#220
01A2                 533     yst1:
01A2 75E730          534                                             mov             EIE2,#30H;00110000
                     535                                     ;       mov             EIP2,#30H
01A5 75A880          536                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     537     ;ozu
01A8 E4              538                                             clr     a
01A9 7800            539                                             mov     r0,#00h 
01AB F6              540     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
01AC 08              541                                             inc     r0
01AD B87FFB          542                                             cjne    r0,#7fh,mecle
01B0 7880            543                                             mov     r0,#80h
01B2 F6              544     meff:                   mov     @r0,a 
01B3 F2              545                                             movx @r0,a
01B4 08              546                                             inc     r0
01B5 B8DFFA          547                             cjne    r0,#0dfh,meff
01B8 120000   F      548                             call    clmassix
                     549     ;обнулить внешнее озу 4кбайта
01BB 900000          550                                     mov                     dptr,#0
01BE E4              551     extcle: clr                     a
01BF F0              552                                     movx            @dptr,a
01C0 A3              553                                     inc                     dptr
01C1 E583            554                                     mov                     a,dph
01C3 B410F8          555                                     cjne            a,#10h,extcle
                     556     
01C6 7898            557                             mov             r0,#chinkor
01C8 7600            558                             mov             @r0,#0;1;
01CA 08              559                             inc             r0
01CB 7619            560                             mov             @r0,#19h;64h;0c8h;90h;
                     561                             ;;;;
01CD 7881            562                             mov             r0,#chavt
01CF 7601            563                             mov             @r0,#1
01D1 08              564                             inc             r0
01D2 7690            565                             mov             @r0,#90h
                     566     
01D4 78B2            567                                     mov             r0,#marker
01D6 76FF            568                                     mov             @r0,#0ffh
                     569                             ;mov            r0,#chind
                     570                             ;mov            @r0,#1
                     571                     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    10

01D8 74FF            572                             mov             a,#0ffh
01DA F585            573                        mov          p5,a
01DC 799A            574                             mov             r1,#parT
01DE 7702            575                             mov             @r1,#2                  ;Tizm=1s
01E0 79AE            576                             mov             r1,#diap
01E2 7705            577                             mov             @r1,#5                  ;10-7a
01E4 753405          578                             mov             sadiap,#5
01E7 79AF            579                             mov             r1,#parN
01E9 7702            580                             mov             @r1,#2
01EB 7400            581                             mov             a,#00h
01ED F585            582                             mov             p5,a
01EF D204            583                             setb    bitizm
                     584     
01F1 799B            585                             mov             r1,#chbefore
01F3 7700            586                             mov             @r1,#0
                     587                             ;;;;;;
01F5 900000   F      588                             mov             dptr,#ch_1              ;1->r2..r5 float
01F8 120000   F      589                             call    ldc_long
01FB 7890            590                             mov             r0,#koefKp         ;1(float)->koefKp
01FD 120000   F      591                             call    saver2
0200 7894            592                             mov             r0,#koefKm              ;1(float)->koefKm
0202 120000   F      593                             call    saver2
0205 78A0            594                             mov             r0,#koefKD
0207 120000   F      595                             call    saver2
020A 78CF            596                             mov                     r0,#chbuf
020C 120000   F      597                             call    saver2
020F 900158          598                             mov                     dptr,#158h;1 блок(2е с конца измерение) 
0212 79D3            599                             mov             r1,#saven_bl
0214 E583            600                             mov             a,dph
0216 F7              601                                               mov           @r1,a
0217 09              602                                                     inc             r1
0218 E582            603                                                     mov             a,dpl
021A F7              604                                                     mov             @r1,a
                     605     
021B 900478          606                             mov                     dptr,#478h;2 блок(2е с конца измерение) 
021E 79C0            607                             mov             r1,#saven_bl2
0220 E583            608                             mov             a,dph
0222 F7              609                                               mov           @r1,a
0223 09              610                                                     inc             r1
0224 E582            611                                                     mov             a,dpl
0226 F7              612                                                     mov             @r1,a
0227 900798          613                                     mov                     dptr,#798h;3 блок(2е с конца измере
                             ние) 
022A 79C2            614                             mov             r1,#saven_bl3
022C E583            615                             mov             a,dph
022E F7              616                                               mov           @r1,a
022F 09              617                                                     inc             r1
0230 E582            618                                                     mov             a,dpl
0232 F7              619                                                     mov             @r1,a
0233 900AB8          620                             mov                     dptr,#0ab8h;4 блок(2е с конца измерение)   
                                  
0236 79D9            621                             mov             r1,#saven_bl4
0238 E583            622                             mov             a,dph
023A F7              623                                               mov           @r1,a
023B 09              624                                                     inc             r1
023C E582            625                                                     mov             a,dpl
023E F7              626                                                     mov             @r1,a
023F 753801          627                             mov             nblok,#1                        ;номер введенного б
                             лока
0242 753701          628                             mov             nelem,#1
0245 78CD            629                             mov             r0,#interva
0247 7600            630                             mov             @r0,#0
0249 08              631                             inc             r0
024A 7601            632                             mov             @r0,#1
024C 7840            633                             mov             r0,#bufind
024E                 634     age2:
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    11

024E 76FD            635                             mov             @r0,#0fdh         ;погасить индикатор
0250 08              636                             inc             r0
0251 B84CFA          637                             cjne    r0,#bufind+12,age2              
0254 120000   F      638                             call    ind
0257 120000   F      639                             call    z_1s
                     640     
                     641                                     ;зажечь все лементы индикации
025A 7840            642                             mov             r0,#bufind
025C 7669            643     ageon:          mov             @r0,#69h;0feh;?
025E 08              644                             inc             r0
025F B84CFA          645                             cjne    r0,#bufind+12,ageon             
0262 120000   F      646                             call    ind
0265 120000   F      647                             call    z_1s            ;1sec
                     648     ;;;;;;;;;;;;;;;;
                     649                     
0268 120000   F      650                             call    z_15;z_1ms
026B 434B10          651                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     652     ;;;;;;;;;;;;;;;;;;;
026E 7C60            653                             mov             r4,#60h
0270 7D00            654                             mov             r5,#00         
0272 120000   F      655                             call    iniacp;инициализация acp
0275 120000   F      656                             call    loadUS          ;us 10-7 A
                     657                             
0278 C217            658     rebyte:         clr             bitoll
027A 3095FD          659                             jnb             p1.5,$
027D 2095FD          660                             jb              p1.5,$
                     661                             ;mov            a,P6            ;p6.4=0
                     662                             ;anl            a,#0efh
                     663                             ;mov            P6,a
                     664                             ;nop
                     665                             ;nop
                     666                                     
                     667                             ;mov            a,P6                    ;p6.4=1 
                     668                             ;orl            a,#10h
                     669                             ;mov            P6,a                        
0280 7411            670                             mov             a,#11h
0282 120000   F      671                             call    write
                     672                             ;чтение acp
0285 120000   F      673                             call    read    
0288 F578            674                             mov     reacp+1,A       ;старший байт 
028A 120000   F      675                             call    read    
028D F579            676                             mov     reacp+2,A       ;средний байт 
028F 120000   F      677                             call    read
0292 F57A            678                             mov     reacp+3,A               ;мл байт
                     679                        ;;;;;;;;;;;
0294 7878            680                        mov          r0,#reacp+1
0296 E6              681                        mov          a,@r0
0297 20E743          682                             jb              acc.7,znplus;
029A D200            683                             setb    bitznak
029C 4480            684                             orl             a,#80h  ;ост содерж яч 
029E F6              685                             mov             @r0,a
                     686                                     
029F 18              687     mmm:            dec             r0;,#reacp
02A0 76FF            688                             mov             @r0,#0ffh
02A2 8041            689                             jmp             goznak
                     690     
02A4 120000   F      691     mem10ms:        call            ind
02A7 80CF            692                                             jmp                     rebyte                     
                                  ;10ms
                     693     
02A9                 694     labelA: 
                     695                             ;разрешить ie6,ie7
                     696     ;                       mov                     a,chkl+1                ;low
                     697     ;                       jnz                     no0key
02A9 E53D            698                             mov                     a,chkl
02AB 30E70B          699                             jnb                     acc.7,no0key;jnz                        no0
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    12

                             key
02AE E5AD            700                             mov                     a,P3IF
02B0 543F            701                             anl                     a,#3fh
02B2 F5AD            702                             mov                     P3IF,a
02B4 75E730          703                             mov                     EIE2,#30h ;EIE2.5,EIE2.4
02B7 800D            704                             jmp                     yes0key
                     705                        
02B9                 706     no0key: ;       mov             r1,#chkl 
                     707                                     ;       call    chdec
02B9 C3              708                                     clr                     c
02BA E53E            709                                     mov                     a,chkl+1;chkl-1
02BC 9401            710                                     subb            a,#1
02BE F53E            711                                     mov                     chkl+1,a
02C0 E53D            712                                     mov                     a,chkl
02C2 9400            713                                     subb            a,#0
02C4 F53D            714                                     mov                     chkl,a
                     715                             ;;;;;;;;;;;;
02C6                 716     yes0key:
02C6 2004AF          717                                             jb              bitizm,rebyte
                     718                              ;буфер 2 выдать на индикацию
02C9 E533            719                             mov             a,chind2                        ;реже выдавать на и
                             ндикацию
02CB 700B            720                             jnz             nochind
02CD 753364          721                             mov             chind2,#100
02D0 120000   F      722                             call    ind
02D3 120000   F      723     yes0key1:       call    z_1ms;z_01s
                     724                             ;call   z_01s
                     725                             ;call   z_01s
02D6 80D1            726                             jmp             labelA
                     727     
02D8 14              728     nochind:        dec             a
02D9 F533            729                                             mov             chind2,a
02DB 80F6            730                                     jmp             yes0key1;labelA
                     731             
02DD C200            732     znplus:         clr     bitznak
02DF 547F            733                             anl             a,#7fh;fdh                      ;+
02E1 F6              734                             mov             @r0,a
02E2 18              735                             dec             r0;,#reacp
02E3 7600            736                             mov             @r0,#00h
                     737                             
02E5                 738     goznak: 
                     739     ;;;;;;;;;;;;;
02E5 787A            740                             mov     r0,#reacp+3
02E7 E6              741                             mov             a,@r0
02E8 7F05            742                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02EA C3              743     sdvig3:         clr             c
02EB 13              744                             rrc             a
02EC DFFC            745                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02EE FA              746                             mov             r2,a    ;сохр байт
02EF 18              747                             dec             r0              ;       reacp+2
02F0 E6              748                             mov             a,@r0
02F1 C0E0            749                             push    acc
02F3 C3              750                             clr             c
02F4 7F03            751                             mov             r7,#3;2
02F6 C3              752     sdvig2:         clr             c
02F7 33              753                             rlc             a
02F8 DFFC            754                             djnz    r7,sdvig2 ;d12..d11      средний байт
02FA 4A              755                             orl             a,r2
02FB F57A            756                             mov             reacp+3,a;сформ мл байт
02FD D0E0            757                             pop             acc
                     758                             
02FF 7F05            759                             mov             r7,#5;6
0301 C3              760     sdvig1:         clr             c
0302 13              761                             rrc             a
0303 DFFC            762                             djnz    r7,sdvig1 ;d15,d14        ср байт
0305 FA              763                             mov             r2,a   ;сохр
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    13

0306 E578            764                             mov             a,reacp+1
0308 C0E0            765                             push    acc
                     766                     ;;      push    acc
030A 7F03            767                             mov             r7,#3;2
030C C3              768     sdvig0:         clr             c
030D 33              769                             rlc             a
030E DFFC            770                             djnz    r7,sdvig0 ;       d21..d16
0310 4A              771                             orl             a,r2
0311 F579            772                             mov             reacp+2,a       ; сформ средний  байт
0313 D0E0            773                             pop             acc       ;reacp+1
                     774                             ;;;;;;;;;;;;;;
0315 20E70B          775                             jb              acc.7,sdvm
0318 C3              776                             clr             c
0319 7F05            777                             mov             r7,#5;6
031B C3              778     sdvig4:         clr             c
031C 13              779                             rrc             a
031D DFFC            780                             djnz    r7,sdvig4 ;       d23,d22
031F F578            781                             mov             reacp+1,a
0321 8008            782                             jmp             readyacp;ankor;klmas
                     783     ;;;;;;;;;;;;                                    
0323 7F05            784     sdvm:           mov             r7,#5;6
0325 D3              785     sdvig6:         setb            c
0326 13              786                             rrc             a
0327 DFFC            787                             djnz    r7,sdvig6 ;       d23,d22
0329 F578            788                             mov             reacp+1,a
                     789                                                             
                     790     ; reacp..reacp+3-результат чтения асп(hex) 
                     791     ;;;;;;;;;
032B                 792     readyacp:
032B 7898            793                                             mov             r0,#chinkor
032D E6              794                             mov             a,@r0
032E 30E702          795                             jnb             acc.7,gopart
0331 8044            796                                     jmp             sumt2
                     797                     
0333                 798     gopart:
0333 789A            799                             mov             r0,#parT        ;параметр времени
0335 793F            800                             mov             r1,#chmasN
0337 B6013A          801                             cjne    @r0,#1,noparT1
                     802                             ;РЕЗ+РЕЗ
033A 7877            803                             mov             r0,#reacp
033C 120000   F      804                             call    resar2          ;reacp->r2..r5
033F 78B6            805                             mov             r0,#summa+3;rez_A+3
0341 120000   F      806                             call    ladd
0344 78B3            807                             mov             r0,#summa;rez_A
0346 120000   F      808                             call    saver2
0349 793F            809                              mov            r1,#chmasN
034B 7714            810                             mov             @r1,#20;10
034D 789B            811                             mov             r0,#chbefore
034F B6631E          812                             cjne    @r0,#99,nobef99
                     813                             ;РЕЗ/100
0352 900000   F      814                             MOV        DPTR,#ch100 
0355 120000   F      815     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0358 120000   F      816                             call    zdiv;divide
035B 7862            817                             mov             r0,#rez_A
035D 120000   F      818                             call    saver2          ;сумма 100 отсчетов /100
0360 78C5            819                             mov             r0,#Rez_del
0362 120000   F      820                             call    saver2  
                     821                        ;;;;;
0365 78B3            822                        mov          r0,#summa
0367 120000   F      823                        call         clear4
                     824     
036A 799B            825                             mov             r1,#chbefore
036C 7700            826                             mov             @r1,#0
036E 8070            827                             jmp             klmas           ;загр в массив скользящее ср
0370 06              828     nobef99:        inc             @r0                     ;chbefore
0371 020000   F      829                             jmp             rebyte;labelA;метка A
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    14

                     830     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     831     ;а потом уже располагаем  в скользящий массив  из n
                     832     
                     833     
                     834     
0374 B6021D          835     noparT1:        cjne    @r0,#2,noparT2
                     836                             ;РЕЗ+РЕЗ
0377                 837     sumt2:
0377 7877            838                              mov            r0,#reacp
0379 120000   F      839                             call    resar2          ;reacp->r2..r5
037C 78B6            840                             mov             r0,#summa+3;rez_A+3
037E 120000   F      841                             call    ladd
0381 78B3            842                             mov             r0,#summa;rez_A
0383 120000   F      843                             call    saver2
0386 789B            844                             mov             r0,#chbefore
0388 793F            845                             mov             r1,#chmasN
038A 770A            846                             mov             @r1,#10
038C B613E1          847                             cjne    @r0,#19,nobef99;9,nobef99
                     848                             ;РЕЗ/20
038F 900000   F      849                             MOV        DPTR,#ch20;ch10 
0392 80C1            850                             jmp             allsum
                     851                             ;;;;;;;
                     852                             
                     853     
0394 B6031D          854     noparT2:        cjne    @r0,#3,noparT3
                     855     
0397 7877            856                                                              mov            r0,#reacp
0399 120000   F      857                             call    resar2          ;reacp->r2..r5
039C 78B6            858                             mov             r0,#summa+3;rez_A+3
039E 120000   F      859                             call    ladd
03A1 78B3            860                             mov             r0,#summa;rez_A
03A3 120000   F      861                             call    saver2
03A6 789B            862                             mov             r0,#chbefore
03A8 793F            863                             mov             r1,#chmasN
03AA 7702            864                             mov             @r1,#2;4                                        ;n=
                             4
03AC B609C1          865                             cjne    @r0,#9,nobef99;9,nobef99
                     866                             ;РЕЗ/10
03AF 900000   F      867                             MOV        DPTR,#ch10 
03B2 80A1            868                             jmp             allsum
                     869                             
03B4 B6041D          870     noparT3:        cjne    @r0,#4,noparT4
03B7                 871     aapar:          
03B7 7877            872              mov            r0,#reacp
03B9 120000   F      873                             call    resar2          ;reacp->r2..r5
03BC 78B6            874                             mov             r0,#summa+3;rez_A+3
03BE 120000   F      875                             call    ladd
03C1 78B3            876                             mov             r0,#summa;rez_A
03C3 120000   F      877                             call    saver2
03C6 789B            878                             mov             r0,#chbefore
03C8 793F            879                             mov             r1,#chmasN
03CA 7702            880                             mov             @r1,#2;4
03CC B604A1          881                             cjne    @r0,#4,nobef99;9,nobef99
                     882                             ;РЕЗ/10
03CF 900000   F      883                             MOV        DPTR,#ch5
03D2 8081            884                             jmp             allsum
                     885     
                     886                     
03D4 7702            887     noparT4:   mov          @r1,#2          ;chmasN n=2
03D6 7877            888                             mov             r0,#reacp
03D8 120000   F      889                             call    resar2          ;reacp->r2..r5
03DB 7862            890                             mov             r0,#rez_A
03DD 120000   F      891                             call    saver2
                     892     ;загрузить А в массив из 2/10 значений
                     893     ;;;;;;;;;;;;;;;
03E0                 894     klmas:           
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    15

03E0 793F            895                             mov             r1,#chmasN
03E2 B7021A          896                             cjne    @r1,#2,mas10
03E5 900100          897                             MOV        dptr,#MASS0
03E8 120000   F      898                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     899     
03EB 7862            900                             mov             r0,#rez_A
03ED 120000   F      901                             call    resar2          ;->r2..r5
03F0 900100          902                             mov                     dptr,#MASS0
03F3 120000   F      903                   call              saveIr2                 ; R2-R5 --> MAS0
                     904                     
03F6 900107          905                   MOV          dptr,#MASS1+3
03F9 120000   F      906                   CALL       addx
03FC 020000   F      907                       jmp           endsum
                     908     ;массив из 10-ти измерений
03FF B70A7D          909     mas10:                  cjne    @r1,#10,mas20
0402 900120          910                                             mov                     dptr,#MASS8
0405 120000   F      911                     CALL            xCIKLWR         ;MASS8->MASS9
0408 90011C          912                                             mov                     dptr,#MASS7
040B 120000   F      913                     CALL            xCIKLWR         ;MASS7->MASS8
040E 900118          914                     MOV       dptr,#MASS6
0411 120000   F      915                     CALL       xCIKLWR         ; MASS6 --> MASS7
0414 900114          916                     MOV        dptr,#MASS5
                     917                    
0417 120000   F      918                    CALL        xCIKLWR        ; MASS5 --> MASS6
041A 900110          919                    MOV         dptr,#MASS4
                     920                    
041D 120000   F      921                    CALL        xCIKLWR        ; MASS4 --> MASS5
0420 90010C          922                             mov                     dptr,#MASS3
                     923     
0423 120000   F      924                    CALL             xCIKLWR         ;MASS3->MASS4
0426 900108          925                     MOV        dptr,#MASS2
                     926                    
0429 120000   F      927                    CALL        xCIKLWR         ; MASS2 --> MASS3
042C 900104          928                    MOV         dptr,#MASS1
                     929                     
042F 120000   F      930                   CALL         xCIKLWR        ; MASS1 --> MASS2
0432 900100          931                    MOV         dptr,#MASS0
                     932                   
0435 120000   F      933                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     934     
                     935                             
0438 7862            936                             mov             r0,#rez_A
043A 120000   F      937                             call    resar2          ;->r2..r5
                     938                                     ;call   aform
043D 900100          939                                     mov                     dptr,#MASS0
0440 120000   F      940                   call              saveIr2                 ; R2-R5 --> MAS0
                     941              
0443 900107          942                   MOV          dptr,#MASS1+3
0446 120000   F      943                   CALL       addx
0449 90010B          944                   MOV          dptr,#MASS2+3
044C 120000   F      945                   CALL       addx
044F 90010F          946                   MOV          dptr,#MASS3+3
0452 120000   F      947                  CALL        addx
0455 900113          948                   MOV       dptr,#MASS4+3
0458 120000   F      949                   call       addx
045B 900117          950                     MOV        dptr,#MASS5+3
045E 120000   F      951                  CALL        addx
0461 90011B          952                   MOV          dptr,#MASS6+3
0464 120000   F      953                   CALL       addx
0467 90011F          954                   MOV          dptr,#MASS7+3
046A 120000   F      955                  CALL        addx
046D 900123          956                  MOV        dptr,#MASS8+3
0470 120000   F      957                   call       addx
0473 900127          958                     MOV                     dptr,#MASS9+3
0476 120000   F      959                  call        addx
0479 020000   F      960                              jmp            endsum
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    16

                     961     
047C 020000   F      962     rmas4:          jmp                     mas4
                     963     ;массив из 20-ти измерений
047F B714FA          964     mas20:          cjne    @r1,#20,rmas4
0482 900148          965                                             mov                     dptr,#MASS18
0485 120000   F      966                     CALL            xCIKLWR         ;MASS18->MASS19
0488 900144          967                                             mov                     dptr,#MASS17
048B 120000   F      968                     CALL            xCIKLWR         ;MASS17->MASS18
048E 900140          969                     MOV       dptr,#MASS16
0491 120000   F      970                     CALL       xCIKLWR         ; MASS16 --> MASS17
0494 90013C          971                     MOV        dptr,#MASS15
                     972                    
0497 120000   F      973                    CALL        xCIKLWR        ; MASS15 --> MASS16
049A 900138          974                    MOV         dptr,#MASS14
                     975                    
049D 120000   F      976                    CALL        xCIKLWR        ; MASS14 --> MASS15
04A0 900134          977                             mov                     dptr,#MASS13
                     978     
04A3 120000   F      979                    CALL             xCIKLWR         ;MASS13->MASS14
04A6 900130          980                     MOV        dptr,#MASS12
                     981                    
04A9 120000   F      982                    CALL        xCIKLWR         ; MASS12 --> MASS13
04AC 90012C          983                    MOV         dptr,#MASS11
                     984                     
04AF 120000   F      985                   CALL         xCIKLWR        ; MASS11 --> MASS12
04B2 900128          986                    MOV         dptr,#MASS10
                     987                   
04B5 120000   F      988                    CALL        xCIKLWR        ; MASS10 --> MASS11
04B8 900124          989                                      MOV       dptr,#MASS9
04BB 120000   F      990                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     991     
04BE 900120          992                                             mov                     dptr,#MASS8
04C1 120000   F      993                     CALL            xCIKLWR         ;MASS8->MASS9
04C4 90011C          994                                             mov                     dptr,#MASS7
04C7 120000   F      995                     CALL            xCIKLWR         ;MASS7->MASS8
04CA 900118          996                     MOV       dptr,#MASS6
04CD 120000   F      997                     CALL       xCIKLWR         ; MASS6 --> MASS7
04D0 900114          998                     MOV        dptr,#MASS5
                     999                    
04D3 120000   F     1000                    CALL        xCIKLWR        ; MASS5 --> MASS6
04D6 900110         1001                    MOV         dptr,#MASS4
                    1002                    
04D9 120000   F     1003                    CALL        xCIKLWR        ; MASS4 --> MASS5
04DC 90010C         1004                             mov                     dptr,#MASS3
                    1005     
04DF 120000   F     1006                    CALL             xCIKLWR         ;MASS3->MASS4
04E2 900108         1007                     MOV        dptr,#MASS2
                    1008                    
04E5 120000   F     1009                    CALL        xCIKLWR         ; MASS2 --> MASS3
04E8 900104         1010                    MOV         dptr,#MASS1
                    1011                     
04EB 120000   F     1012                   CALL         xCIKLWR        ; MASS1 --> MASS2
04EE 900100         1013                    MOV         dptr,#MASS0
                    1014                   
04F1 120000   F     1015                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1016     
                    1017                             
04F4 7862           1018                             mov             r0,#rez_A
04F6 120000   F     1019                             call    resar2          ;->r2..r5
                    1020                                     ;call   aform
04F9 900100         1021                                     mov                     dptr,#MASS0
04FC 120000   F     1022                   call              saveIr2                 ; R2-R5 --> MAS0
                    1023              
04FF 900107         1024                   MOV          dptr,#MASS1+3
0502 120000   F     1025                   CALL       addx
0505 90010B         1026                   MOV          dptr,#MASS2+3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    17

0508 120000   F     1027                   CALL       addx
050B 90010F         1028                   MOV          dptr,#MASS3+3
050E 120000   F     1029                  CALL        addx
0511 900113         1030                   MOV       dptr,#MASS4+3
0514 120000   F     1031                   call       addx
0517 900117         1032                     MOV        dptr,#MASS5+3
051A 120000   F     1033                  CALL        addx
051D 90011B         1034                   MOV          dptr,#MASS6+3
0520 120000   F     1035                   CALL       addx
0523 90011F         1036                   MOV          dptr,#MASS7+3
0526 120000   F     1037                  CALL        addx
0529 900123         1038                  MOV        dptr,#MASS8+3
052C 120000   F     1039                   call       addx
052F 900127         1040                     MOV                     dptr,#MASS9+3
0532 120000   F     1041                  call        addx
                    1042     ;27
0535 90012B         1043                                     MOV        dptr,#MASS10+3
0538 120000   F     1044                   CALL       addx
053B 90012F         1045                                     MOV        dptr,#MASS11+3
053E 120000   F     1046                   CALL       addx
0541 900133         1047                   MOV          dptr,#MASS12+3
0544 120000   F     1048                   CALL       addx
0547 900137         1049                   MOV          dptr,#MASS13+3
054A 120000   F     1050                  CALL        addx
054D 90013B         1051                   MOV       dptr,#MASS14+3
0550 120000   F     1052                   call       addx
0553 90013F         1053                                     MOV        dptr,#MASS15+3
0556 120000   F     1054                     CALL     addx
0559 900143         1055                   MOV          dptr,#MASS16+3
055C 120000   F     1056                   CALL       addx
055F 900147         1057                   MOV          dptr,#MASS17+3
0562 120000   F     1058                  CALL        addx
0565 90014B         1059                  MOV        dptr,#MASS18+3
0568 120000   F     1060                   call       addx
056B 90014F         1061                                     MOV                     dptr,#MASS19+3
056E 120000   F     1062                  call        addx
0571 802F           1063                                     jmp             endsum
                    1064     ;массив из 4х измерений
0573                1065     mas4:                   
0573 900108         1066                                             MOV        dptr,#MASS2
0576 120000   F     1067                    CALL        xCIKLWR         ; MASS2 --> MASS3
0579 900104         1068                    MOV         dptr,#MASS1
057C 120000   F     1069                    CALL        xCIKLWR        ; MASS1 --> MASS2
057F 900100         1070                    MOV         dptr,#MASS0
0582 120000   F     1071                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1072     
                    1073                             
0585 7862           1074                             mov             r0,#rez_A
0587 120000   F     1075                             call    resar2          ;->r2..r5
                    1076                                     ;call   aform
058A 900100         1077                                     mov                     dptr,#MASS0
058D 120000   F     1078                   call              saveIr2                 ; R2-R5 --> MAS0
                    1079              
0590 900107         1080                   MOV          dptr,#MASS1+3
0593 120000   F     1081                   CALL       addx
0596 90010B         1082                   MOV          dptr,#MASS2+3
0599 120000   F     1083                   CALL       addx
059C 90010F         1084                   MOV          dptr,#MASS3+3
059F 120000   F     1085                  CALL        addx
                    1086                  
                    1087             ;23.03          
05A2                1088     endsum:
05A2 786E           1089                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
05A4 06             1090                                     inc             @r0
05A5 E6             1091                                     mov             a,@r0   
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    18

05A6 200105         1092                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1093                                     
05A9 B53F31         1094                                     cjne    a,chmasN,masx5
05AC D201           1095                                     setb    bitmas                  ;массив заполнен
05AE 853F6E         1096     masfull:                mov             chmas,chmasN
05B1 783F           1097                                     mov             r0,#chmasN
05B3 E6             1098                                     mov             a,@r0
                    1099     ;masfull:
05B4 B40208         1100                                     cjne    a,#2,nochn2
05B7 900000   F     1101                                     MOV        DPTR,#ch2;10 
05BA 120000   F     1102                                     CALL   ldc_ltemp                 ; ltemp <-- 2
05BD 8028           1103                                     jmp             mas5div
                    1104     
05BF B40A08         1105     nochn2:         cjne    a,#10,nochn10
05C2 900000   F     1106                                                     MOV        DPTR,#ch10 
05C5 120000   F     1107                                     CALL   ldc_ltemp                 ; ltemp <-- 10
05C8 801D           1108                                     jmp             mas5div
                    1109     
05CA B41408         1110     nochn10:        cjne    a,#20,nochn20
05CD 900000   F     1111                                                     MOV        DPTR,#ch20 
05D0 120000   F     1112                                     CALL   ldc_ltemp                 ; ltemp <-- 20
05D3 8012           1113                                     jmp             mas5div
                    1114     
05D5 900000   F     1115     nochn20:        MOV        DPTR,#ch4 
05D8 120000   F     1116                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05DB 800A           1117                                     jmp             mas5div
                    1118     
05DD 856E0B         1119     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05E0 E4             1120                                     clr     a
05E1 F50A           1121                                     mov     ltemp+2,a
05E3 F509           1122                                     mov     ltemp+1,a
05E5 F508           1123                                     mov     ltemp,a
                    1124     
05E7                1125     mas5div:
05E7 120000   F     1126                                     CALL       zdiv;divide                           ; R2-R5 =
                    1127                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1128     
                    1129                             
                    1130      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1131     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1132     ;получен результат 3 байта и знак
05EA 7866           1133                             mov             r0,#rez_A1
05EC 120000   F     1134                             call    saver2           ;сохр среднее по массиву
                    1135     ;;8.11.06                       mov             chmasN,#0
                    1136      ;;;;;;;;;;;;
                    1137      ;;;;;;;;;;;;
05EF C3             1138                             clr             c
05F0 799A           1139                             mov             r1,#parT
05F2 7402           1140                             mov             a,#2
05F4 97             1141                             subb    a,@r1
05F5 501D           1142                             jnc             ankor           ;T<3
                    1143                             ;A-=РЕЗ1                                ;T>3
05F7 120402         1144                             call    altof                   ;r2..r5->float
05FA 785E           1145                             mov             r0,#rez_Ame
05FC 120000   F     1146                             call    saver2
                    1147                             ;;;;
05FF 7890           1148                             mov             r0,#koefKp;->r8..r11
0601 EA             1149                             mov             a,r2
0602 30E702         1150                             jnb             acc.7,nminus3
0605 7894           1151                             mov             r0,#koefKm;->r8..r11
0607 120000   F     1152     nminus3:                call    resar8
060A 120203         1153                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
060D 785E           1154                             mov             r0,#rez_Ame
060F 120000   F     1155                             call    saver2
0612 8021           1156                             jmp             gotoKD
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    19

                    1157     
0614                1158     ankor:  
0614 7898           1159                             mov             r0,#chinkor
0616 E6             1160                             mov             a,@r0
0617 30E703         1161                             jnb             acc.7,nokorr
                    1162                             ;коррекция 0
061A 020000   F     1163                             jmp             kornul
061D                1164     nokorr: 
                    1165                             ;mov            r10,#00         ;       chavt
                    1166                             ;mov            r11,#00h
061D 7881           1167                             mov              r0,#chavt      
061F E6             1168                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
0620 30E737         1169                             jnb             acc.7,nonulavt;jnz              nonulavt        
0623 750A00         1170                             mov             r10,#0;1;00;02          
0626 750BC8         1171                             mov             r11,#0c8h;90h;0c8h;58h
0629 7898           1172                             mov             r0,#chinkor
062B 120000   F     1173                             call    chcmp
062E 7045           1174                             jnz             noavk
                    1175                             ;автокалибровка
0630 020000   F     1176                             jmp             autoka;noavk;
                    1177     
0633 8079           1178     rafterK:                jmp             afterK
                    1179     ;;;;;;;;;;
0635 C3             1180      gotoKD:                clr             c
0636 799A           1181                             mov             r1,#parT
0638 7404           1182                             mov             a,#4
063A 97             1183                             subb    a,@r1
063B 50F6           1184                             jnc             rafterK         ;T<5
                    1185                             ;A1-=A- *KD                     ;T>5
                    1186                             ;call           findkoef                                ;r2,r3-hex
                    1187                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1188                                     
                    1189                             ;       call    altof                   ;r2..r5->float
                    1190                             ;       mov     dptr,#CHtho;100000
                    1191                             ;       call    ldc_ltemp                       ;r8..r11
                    1192                             ;       call    fldiv
                    1193                             ;       call    move28
                    1194                             
063D 785E           1195                             mov             r0,#rez_Ame;->r2..r5   ???????????/
063F 120000   F     1196                             call    resar2
                    1197                                     ;call   flmul
0642 120343         1198                             call    ftol                    ;float->int
0645 7866           1199                             mov             r0,#rez_A1
0647 120000   F     1200                             call    saver2
064A 786A           1201                             mov             r0,#rez_A0;->r8..r11 hex
064C 120000   F     1202                             call    resar8
064F 120000   F     1203                             call    lsub            ;A3=A-1-A0
0652 789C           1204                             mov             r0,#rez_A3
0654 120000   F     1205                             call    saver2
0657 020000   F     1206                             jmp             labelB  
                    1207      ;;;;;;;;;;; 9.11.06
065A 789A           1208     nonulavt:        mov            r0,#parT
065C E6             1209                             mov             a,@r0
065D 6401           1210                             xrl             a,#01
065F 700F           1211                             jnz             avtdec1
0661 7982           1212                             mov             r1,#chavt+1     ;T=1 chavt-10
0663 120000   F     1213                             call    tenmin
0666 7999           1214     kordec10:       mov             r1,#chinkor+1
0668 120000   F     1215                             call    tenmin
066B 801E           1216                             jmp             rezmul
                    1217     
066D 020000   F     1218     rmo220:         jmp             mo220
                    1219     
0670 7981           1220     avtdec1:        mov             r1,#chavt       
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    20

0672 120000   F     1221                             call    chdec           ;chavt-1
                    1222     ;                       jmp             kordec1;rezmul
0675 789A           1223     noavk:          mov             r0,#parT
0677 E6             1224                             mov             a,@r0
0678 6401           1225                             xrl             a,#01
067A 700A           1226                             jnz             kordec1
                    1227                             ;T=1 chinkor-10
067C 7999           1228                     mov             r1,#chinkor+1
067E 120000   F     1229                             call    tenmin
0681 8008           1230                             jmp             rezmul
                    1231     
0683 020000   F     1232     rnotestizm:             jmp                     notestizm
0686 7998           1233     kordec1:        mov             r1,#chinkor
0688 120000   F     1234                             call    chdec           ; chinkor-1
                    1235                        ;9.11.06
                    1236                             ;;;;;;;;;;;;;;
                    1237                             ;;;;;;;;;;;;;
                    1238     ;(РЕЗ1-АN)*K
068B                1239     rezmul:
068B 7866           1240                             mov             r0,#rez_A1;->r2..r5
068D 120000   F     1241                             call    resar2
0690 120402         1242                             call    altof   ;r2..r5->float  6.06    
0693 7884           1243                             mov             r0,#kor0_AN;->r8..r11
0695 120000   F     1244                             call    resar8
0698 1201D1         1245                             call    flsub
069B 7890           1246                             mov             r0,#koefKp;->r8..r11
069D EA             1247                             mov             a,r2
069E 30E702         1248                             jnb             acc.7,nminus
                    1249                             ;jnb            bitznak,nminus
                    1250                     
06A1 7894           1251                             mov             r0,#koefKm;->r8..r11
06A3 120000   F     1252     nminus:         call    resar8
06A6 120203         1253                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
06A9 785E           1254                             mov             r0,#rez_Ame
06AB 120000   F     1255                             call    saver2
                    1256      
06AE                1257     afterK:                 
                    1258     ;;;;;;;;;;;;;;
06AE EA             1259                                     mov             a,r2
06AF 547F           1260                                     anl             a,#7fh
06B1 FA             1261                                     mov             r2,a
06B2 900000   F     1262                                     mov     dptr,#ch_250;220;220000
06B5 120000   F     1263                                     call    ldc_ltemp                       ;r8..r11=8
06B8 1201D6         1264                                     call    flcmp
06BB 50B0           1265                                     jnc             rmo220          ;A>220000
                    1266                                     ;;;;;;;;;
06BD 3015C3         1267                                     jnb                     biteizm,rnotestizm
06C0 78B1           1268                                     mov                     r0,#vichR
06C2 B62155         1269                                     cjne            @r0,#21h,note21
06C5 7A50           1270                                     mov                     r2,#50h                 ;-11a
06C7 7B18           1271                                     mov                     r3,#18h                 ;k8
06C9 12046C         1272                                     call            rebyte2                         ;r2..r5- he
                             x
06CC 120402         1273                                     call            altof                   ;r2..r5->float
06CF C002           1274                                     push            rr2
06D1 C003           1275                                     push            rr3
06D3 C004           1276                                     push            rr4
06D5 C005           1277                                     push            rr5
06D7 7A50           1278                                     mov                     r2,#50h                 ;k10
06D9 7B20           1279                                     mov                     r3,#20h
06DB 12046C         1280     re11_7: call            rebyte2                 ;r2..r5
06DE 120402         1281                                     call            altof                   ;r2..r5->float
06E1 120000   F     1282                                     call            move28
06E4 D005           1283                                     pop                     rr5
06E6 D004           1284                                     pop                     rr4
06E8 D003           1285                                     pop                     rr3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    21

06EA D002           1286                                     pop                     rr2
06EC 1202B7         1287                                     call            fldiv
                    1288                             ;       mov                     dptr,#ch_10
                    1289                             ;       call            ldc_ltemp                       ;r8..r11
                    1290                             ;       call            flmul
                    1291                                     ;;;;;2.02.07
06EF C002           1292                                     push            rr2
06F1 C003           1293                                     push            rr3
06F3 C004           1294                                     push            rr4
06F5 C005           1295                                     push            rr5
06F7 7A50           1296                                     mov                     r2,#50h                 ;-11a
06F9 7B2C           1297                                     mov                     r3,#2ch                 ;Km
06FB 12046C         1298                                     call            rebyte2                         ;r2..r5- he
                             x
06FE 120402         1299                                     call            altof                   ;r2..r5->float
0701 120000   F     1300                                     call            move28
0704 D005           1301                                     pop                     rr5
0706 D004           1302                                     pop                     rr4
0708 D003           1303                                     pop                     rr3
070A D002           1304                                     pop                     rr2
070C 120203         1305                                     call            flmul                           ;*Km
070F 900000   F     1306                                     mov     dptr,#CHtho;100000
0712 120000   F     1307                                     call    ldc_ltemp                       ;r8..r11=8
0715 1202B7         1308                                     call    fldiv
                    1309                                     ;;;;;
0718 8050           1310                                     jmp                     temul   
071A B62218         1311     note21: cjne            @r0,#22h,note22
071D 7A50           1312                                     mov                     r2,#50h                 ;-09a
071F 7B10           1313                                     mov                     r3,#10h                 ;k6
0721 12046C         1314                                     call            rebyte2                         ;r2..r5- he
                             x
0724 120402         1315                                     call            altof                   ;r2..r5->float
0727 C002           1316                                     push            rr2
0729 C003           1317                                     push            rr3
072B C004           1318                                     push            rr4
072D C005           1319                                     push            rr5
072F 7A50           1320                                     mov                     r2,#50h                 ;k8
0731 7B18           1321                                     mov                     r3,#18h
0733 80A6           1322                                     jmp                     re11_7
0735 7A50           1323     note22: mov                     r2,#50h                 ;-7a
0737 7B08           1324                                     mov                     r3,#08h                 ;k4
0739 12046C         1325                                     call            rebyte2                         ;r2..r5- he
                             x
073C 120402         1326                                     call            altof                   ;r2..r5->float
073F C002           1327                                     push            rr2
0741 C003           1328                                     push            rr3
0743 C004           1329                                     push            rr4
0745 C005           1330                                     push            rr5
0747 7A50           1331                                     mov                     r2,#50h                 ;k6
0749 7B10           1332                                     mov                     r3,#10h
074B 808E           1333                                     jmp                     re11_7  
                    1334                                     ;;;;;;;;;
074D                1335     notestizm:
074D 301208         1336                                     jnb             bitklb,komulpz
0750 900000   F     1337                                     mov     dptr,#chk;100000
0753 120000   F     1338                                     call    ldc_long                        ;r2..r5
0756 8006           1339                                     jmp             komul
0758 120000   F     1340     komulpz:call            findkoef                                ;r2,r3-hex
075B 12046C         1341                                     call            rebyte2                         ;r2..r5- he
                             x
                    1342                                     
075E 120402         1343     komul:  call    altof                   ;r2..r5->float
0761 900000   F     1344                                     mov     dptr,#CHtho;100000
0764 120000   F     1345                             call    ldc_ltemp                       ;r8..r11=8
0767 1202B7         1346                                     call    fldiv
076A 120000   F     1347     temul:                          call    move28
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    22

076D 785E           1348                                     mov             r0,#rez_Ame
076F 120000   F     1349                                     call    resar2
                    1350                     
0772 120203         1351                                     call    flmul     ;A1-=A-*KD  fl
                    1352                                     
0775 120343         1353                                     call    ftol                    ;float->int
0778 7866           1354                                     mov             r0,#rez_A1
077A 120000   F     1355                                     call    saver2
077D 120402         1356                                     call    altof                   ;r2..r5->float
0780 EA             1357                                     mov             a,r2
0781 547F           1358                                     anl             a,#7fh
0783 FA             1359                                     mov             r2,a
0784 900000   F     1360                                     mov     dptr,#ch_220;200;200000
0787 120000   F     1361                                     call    ldc_ltemp                       ;r8..r11=8
078A 1201D6         1362                                     call    flcmp
078D 502D           1363                                     jnc             rrmo220         ;A>200000
                    1364                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1365                             ;       jb              bitavp,yesavp
078F 301808         1366                                     jnb             knizm,goA2
0792 300602         1367                                     jnb             bitvi11,qu_avp
0795 8003           1368                                     jmp             goA2
0797 20052F         1369     qu_avp:                 jb              bitavp,yesavp
079A                1370     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
079A                1371     goA2:                    ;A2=A1-
079A 7866           1372                                      mov            r0,#rez_A1
079C 120000   F     1373                                     call    resar2
079F 787B           1374                                     mov             r0,#rez_A2
07A1 120000   F     1375                                     call    saver2
07A4                1376     goA3A2:                  ;A3=A2-A0
07A4 786A           1377                                       mov           r0,#rez_A0
07A6 120000   F     1378                                     call    resar8
07A9 120000   F     1379                                     call    lsub
07AC 789C           1380                                     mov             r0,#rez_A3
07AE 120000   F     1381                                     call    saver2
                    1382                                     ;;;;;;
07B1 200660         1383                                     jb              bitvi11,yesvich
07B4                1384     goonin:            ;jmp         goonind;indA3;8.11.06
07B4 78AC           1385                                     mov             r0,#chind
07B6 B60006         1386                                     cjne    @r0,#0,rnochi0
07B9 020000   F     1387                                     jmp             goonind;indA3
                    1388     
07BC 020000   F     1389     rrmo220:                jmp             mo220
07BF 020000   F     1390     rnochi0:                jmp             nochi0
07C2 7866           1391     gokaA2:                 mov             r0,#rez_A1                      ;(float)
07C4 120000   F     1392                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
07C7 80D1           1393                                             jmp             goA2
                    1394     ;;;;;;;;;;;;;;;;
07C9 EA             1395     yesavp:                 mov             a,r2
07CA 547F           1396                                     anl             a,#7fh
07CC FA             1397                                     mov             r2,a
07CD 900000   F     1398                                     mov     dptr,#ch_10th;10000
07D0 120000   F     1399                                     call    ldc_ltemp                       ;r8..r11=8
07D3 1201D6         1400                                     call    flcmp
07D6 50C2           1401                                     jnc             noavp           ;A>10000        
07D8 78AE           1402                                     mov             r0,#diap                ;10-11
07DA B60902         1403                                     cjne    @r0,#9,avpgo
07DD 80BB           1404                                     jmp             noavp
07DF                1405     avpgo:                  
07DF 06             1406                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
07E0 B60A01         1407                                     cjne    @r0,#0ah,clmasv
07E3 16             1408                                     dec             @r0
07E4                1409     clmasv:         ;сбросить массив
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    23

07E4 120000   F     1410                             call    loadUS
                    1411                             ;call   louizm
07E7 120000   F     1412                             call     clmassix
07EA 78B3           1413                                     mov             r0,#summa
07EC 120000   F     1414                                     call    clear4
07EF 786A           1415                                     mov             r0,#rez_A0
07F1 120000   F     1416                                     call    clear4
07F4 C20F           1417                                     clr             bitnul
07F6 D207           1418                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07F8 80BA           1419                                jmp     goonin
                    1420     
07FA D00B           1421     erra01:         pop                     r11
07FC D00A           1422                                     pop                     r10
07FE D009           1423                                     pop                     r9
0800 D008           1424                                     pop                     r8
0802 C214           1425                                     clr             bitvich
0804 C206           1426                                     clr             bitvi11
0806 753934         1427                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
0809 120000   F     1428                                             call            error
080C 120000   F     1429                                             call            ind
080F 120000   F     1430                                             call            z_1s
0812 80A0           1431                                             jmp             goonin
                    1432     
                    1433     
0814                1434     yesvich:        
                    1435                     ;                       mov             r0,#konstB
                    1436                     ;               call    resar2
                    1437                     ;               call    move28
0814 789C           1438                                     mov             r0,#rez_A3;A1
0816 120000   F     1439                                     call    resar2                          ;HEX
                    1440                                     
0819 120402         1441                                     call            altof                   ;r2..r5->float
081C EA             1442                                     mov             a,r2                    ;модуль
081D 547F           1443                                     anl             a,#7fh
081F FA             1444                                     mov             r2,a
                    1445                     ;               call            fladd                           ;A1+B
                    1446                                     
0820 900000   F     1447                                     mov     dptr,#CH_500;
0823 120000   F     1448                                     call    ldc_ltemp                       ;r8..r11
0826 1201D6         1449                                     call    flcmp
0829 407E           1450                                     jc                      mo500R;error <500 >22000
082B 900000   F     1451                                     mov     dptr,#CH_22T;
082E 120000   F     1452                                     call    ldc_ltemp                       ;r8..r11
0831 1201D6         1453                                     call    flcmp
0834 507F           1454                                     jnc             mo500I          ;error
                    1455                                     ;;;;;;;;;;;;
0836 120000   F     1456                                     call            move28
0839 C008           1457                                     push            r8
083B C009           1458                                     push            r9
083D C00A           1459                                     push            r10
083F C00B           1460                                     push            r11
0841 78BC           1461                                     mov             r0,#konstA
0843 120000   F     1462                                     call    resar2
0846 900000   F     1463                                     mov                     dptr,#ch0
0849 120000   F     1464                                     call            ldc_ltemp
084C 1201D6         1465                                     call            flcmp
084F 60A9           1466                                     jz              erra01
0851 900000   F     1467                                     mov             dptr,#CH_B
0854 120000   F     1468                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
0857 120203         1469                                     call            flmul                           ;A*10-7
085A D00B           1470                                     pop                     r11
085C D00A           1471                                     pop                     r10
085E D009           1472                                     pop                     r9
0860 D008           1473                                     pop                     r8
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    24

0862 1202B7         1474                                     call            fldiv                   ;результат R
0865 78C9           1475                                     mov                     r0,#rez_R
0867 120000   F     1476                                     call            saver2
086A 120343         1477                                     call            ftol                    ;float->hex
                    1478                                     ;;;;;;;;;;
086D 784F           1479                                             mov             r0,#abin
086F 120000   F     1480                                             call    saver2
                    1481     ;;;;;;;;
0872 7840           1482                                                     mov             r0,#bufind
0874                1483     age9:
0874 7620           1484                             mov             @r0,#" "          ;погасить индикатор
0876 08             1485                             inc             r0
0877 B84BFA         1486                             cjne    r0,#bufind+11,age9
                    1487                                             
087A 78C9           1488                                             mov             r0,#rez_R
087C 120000   F     1489                                             call            resar2
                    1490     ;;;;;;;;;;
087F 900000   F     1491                                     mov             dptr,#CH_fl
0882 120000   F     1492                                     CALL   ldc_ltemp
0885 1202B7         1493                                     call            fldiv
                    1494     
0888 78B8           1495                                     mov             r0,#work                ;степень +
088A 7600           1496                                     mov             @r0,#0
088C 78B9           1497                                     mov             r0,#work+1;степень -
088E 7600           1498                                     mov             @r0,#0
0890 900000   F     1499     compa1: mov     dptr,#ch_1;
0893 120000   F     1500                                     call    ldc_ltemp                       ;r8..r11
0896 1201D6         1501                                     call    flcmp
0899 4026           1502                                     jc              equ0            ;<1
089B 78B8           1503                                     mov             r0,#work                        ;степень +
089D 06             1504                                     inc             @r0
089E 900000   F     1505                                     mov             dptr,#ch_10;
08A1 120000   F     1506                                     call    ldc_ltemp                       ;r8..r11
08A4 1202B7         1507                                     call            fldiv
08A7 80E7           1508                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1509                                     ;;;;;;;;;;;;;;;;;;;
08A9 900000   F     1510     mo500R: mov             dptr,#teOLR
08AC 120000   F     1511                               call          lotext           
08AF 120000   F     1512                                     call            ind
08B2 020000   F     1513                                     jmp                     nobavp;nobitizm
08B5 900000   F     1514     mo500I: mov             dptr,#teOLI
08B8 120000   F     1515                               call          lotext           
08BB 120000   F     1516                                     call            ind
08BE 020000   F     1517                                     jmp                     nobavp;nobitizm
08C1                1518     equ0:           ;;;;;   call            ftol                    ;float->int
08C1 78B8           1519                                     mov             r0,#work                ;степень +
08C3 B60019         1520                                     cjne    @r0,#0,equ00
                    1521                                     
08C6 900000   F     1522     compa2: mov     dptr,#ch_1;
08C9 120000   F     1523                                     call    ldc_ltemp                       ;r8..r11
08CC 1201D6         1524                                     call    flcmp
08CF 500E           1525                                     jnc             equ00           ;>1
08D1 78B9           1526                                     mov             r0,#work+1                      ;степень -
08D3 16             1527                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
08D4 900000   F     1528                                     mov             dptr,#ch_10;
08D7 120000   F     1529                                     call    ldc_ltemp                       ;r8..r11
08DA 120203         1530                                     call            flmul
08DD 80E7           1531                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1532     
                    1533     
08DF                1534     equ00:          
08DF 7853           1535                                                     mov             r0,#adec
08E1 7952           1536                                             mov             r1,#abin+3      ;hex->10
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    25

08E3 120000   F     1537                                             call    bindec
                    1538     
                    1539                                                     ;если степень полож убирать младший байт
                    1540                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1541                                                     ;число в bufind..bufind+5
08E6 78B8           1542                                             mov             r0,#work
08E8 B60021         1543                                             cjne    @r0,#0,outr
08EB 08             1544                                             inc             r0                      ;work+1
08EC B6FF05         1545                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
08EF 06             1546                                             inc                     @r0;!!!!!!!!!?
08F0 785B           1547                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
08F2 8003           1548                                             jmp                     bufr30
                    1549                                             ;;;;;;;;;;;;;;
08F4 06             1550     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
08F5 785C           1551                                                     mov             r0,#adec+9
08F7 7945           1552     bufr30:         mov             r1,#bufind+5;6
08F9 7F05           1553                                             mov             r7,#5;7
08FB E6             1554     bufr2:                          mov             a,@r0
08FC 2430           1555                                             add             a,#30h
08FE F7             1556                                             mov             @r1,a
08FF 19             1557                                             dec             r1
0900 18             1558                                             dec             r0
0901 DFF8           1559                                             djnz    r7,bufr2
                    1560     
0903 784F           1561                                             mov             r0,#abin
0905 120000   F     1562                                             call            clear4
0908 78B9           1563                                             mov             r0,#work+1
090A 801C           1564                                     jmp             outr5
                    1565     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
090C 785C           1566     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
090E C3             1567                                             clr             c
090F 79B8           1568                                             mov             r1,#work
0911 E8             1569                                             mov             a,r0
0912 14             1570                                             dec             a                                  
                                  ;n-1
0913 97             1571                                             subb    a,@r1
0914 F8             1572                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
0915 7945           1573                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
0917 7F05           1574                                             mov             r7,#5;7
0919 E6             1575     bufr:                           mov             a,@r0
091A 2430           1576                                             add             a,#30h
091C F7             1577                                             mov             @r1,a
091D 19             1578                                             dec             r1
091E 18             1579                                             dec             r0
091F DFF8           1580                                             djnz    r7,bufr
                    1581     
0921 784F           1582                                             mov             r0,#abin
0923 120000   F     1583                                             call            clear4
0926 78B8           1584                                     mov             r0,#work
0928 E6             1585     outr5:                  mov             a,@r0
0929 F552           1586                                             mov             abin+3,a
                    1587                                                                     ;n(hex)->abin
092B 120000   F     1588                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
092E 2552           1589                                             add             a,abin+3
0930 F552           1590                                             mov             abin+3,a
0932 7853           1591                                             mov             r0,#adec
0934 7952           1592                                             mov             r1,#abin+3      ;hex->10
0936 120000   F     1593                                             call    bindec
0939 855C48         1594                                             mov             bufind+8,adec+9
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    26

093C 855B47         1595                                             mov             bufind+7,adec+8
093F 754966         1596                                             mov             bufind+9,#66h
0942 434B10         1597                                             orl             bufind+11,#10h;запятая после 1го зн
                             акоместа
0945 020000   F     1598                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1599                                             
                    1600                                     ;;;;;;;;;;;;;;;;;;;;;
                    1601     ;;;;;;;;;;;;;
                    1602     
0948 300508         1603     mo220:             jnb          bitavp,indoll
094B 301805         1604                                jnb          knizm,indoll;bitizm,indoll
094E 78AE           1605                                     mov             r0,#diap
0950 B6001A         1606                                     cjne    @r0,#0,nodi2
                    1607                                ;10-2
0953 300414         1608     indoll:         jnb             bitizm,goonin1;чтобы не OLL было при нажатии кнопок меню,па
                             м,вычR
0956 900000   F     1609                                             mov             dptr,#teOLL;OLL
0959 120000   F     1610                                             call    lotext
095C 300609         1611                                             jnb                     bitvi11,goonin2
095F 900000   F     1612                                             mov                     dptr,#teOLI
0962 120000   F     1613                                             call    lotext
0965 120000   F     1614                                             call            ind
0968 D217           1615     goonin2:                                        setb    bitoll
096A 020000   F     1616     goonin1:                jmp             goonin  
                    1617     
096D 16             1618     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1619     
096E B6FF01         1620                                     cjne    @r0,#0ffh,nodi9
0971 06             1621                                     inc             @r0
                    1622     
0972 120000   F     1623     nodi9:          call    loadUS
                    1624                                     ;call   louizm
                    1625                                     ;сбросить массив
0975 120000   F     1626                                     call     clmassix
0978 78B3           1627                                     mov             r0,#summa
097A 120000   F     1628                                     call    clear4
097D 786A           1629                                     mov             r0,#rez_A0
097F 120000   F     1630                                     call    clear4
0982 C20F           1631                                     clr             bitnul  
0984 D207           1632                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0986 020000   F     1633                                jmp     goonin
                    1634     
0989 16             1635     nochi0:                 dec             @r0                     ;СТИ-1
098A 020000   F     1636                                     jmp             labelB  
                    1637     
                    1638             
                    1639     ;;;;;;;;;;;;;;;
                    1640     
098D                1641     nop3_0: ;;      ;rez_A-rez_A0
                    1642                     ;;                      mov             r0,#rez_A0
                    1643                     ;;                      call    resar8
                    1644                     ;;                      call    lsub
                    1645                     ;;                      mov             r0,#rez_A
                    1646                     ;;;                     call    saver2
                    1647     
098D B70207         1648     no3parN:                        cjne    @r1,#2,no2parN
                    1649                                             ;в байт 0  записать пробел
0990 7946           1650                                             mov             r1,#bufind+6
0992 7720           1651                                             mov             @r1,#" ";0fdh;
0994 020000   F     1652                                             jmp             seeind;moveA3
                    1653     
0997                1654     no2parN:                        ;в байты 0 и 1 записать пробел
0997 7945           1655                                             mov             r1,#bufind+5
0999 7720           1656                                             mov             @r1,#" ";0fdh;" "
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    27

099B 09             1657                                             inc             r1
099C 7720           1658                                             mov             @r1,#" ";0fdh;" "
099E 8077           1659                                             jmp             seeind;moveA3
09A0 8075           1660      rseeind:               jmp             seeind
                    1661     
09A2                1662     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1663                                     
                    1664                                             
09A2                1665     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1666                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1667                     ;до конца цикла измерения результат не размещать в буфере
                    1668                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1669                     ;и возврату в режим измерения
09A2 20145C         1670                                             jb              bitvich,rnorvich
09A5 201059         1671                                             jb              bitt2,rnorvich
09A8 2017F5         1672                                             jb              bitoll,rseeind
                    1673                                             
09AB 2011F2         1674                                             jb              bitmenu,rseeind
09AE 200BEF         1675                                             jb              bitmem,rseeind
                    1676     ;;;;;;;;;;;;;;
                    1677                                             ; mov           r0,#rez_A3
                    1678                                             ;call   resar2
                    1679                                             ;call   ftol                    ;float->int r2..r5
                    1680     ;;;;;;;;
09B1 789C           1681                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
09B3 120000   F     1682                                             call    resar2;????????????????17.01.07
                    1683                                     
09B6 120000   F     1684                                             call    maform
09B9 784F           1685                                             mov             r0,#abin
09BB 120000   F     1686                                             call    saver2
                    1687     ;;;;;;;;
                    1688                                             
09BE 7853           1689                                             mov             r0,#adec
09C0 7952           1690                                             mov             r1,#abin+3      ;hex->10
09C2 120000   F     1691                                             call    bindec
                    1692                                     
09C5 785C           1693                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
09C7 7946           1694                                             mov             r1,#bufind+6
09C9 7F07           1695                                             mov             r7,#7
09CB E6             1696     bufdec:                         mov             a,@r0
09CC 2430           1697                                             add             a,#30h
09CE F7             1698                                             mov             @r1,a
09CF 19             1699                                             dec             r1
09D0 18             1700                                             dec             r0
09D1 DFF8           1701                                             djnz    r7,bufdec
09D3 7847           1702                                             mov             r0,#bufind+7
09D5 762D           1703                                             mov             @r0,#2dh          ;-2..-9
09D7 7840           1704                                             mov             r0,#bufind
09D9 762B           1705                                             mov             @r0,#2bh
09DB 300202         1706                                             jnb             znmat,nozzmi;bitznak,nozzmi
09DE 762D           1707                                             mov             @r0,#2dh
09E0 79AE           1708     nozzmi:                         mov             r1,#diap
09E2 7848           1709                                             mov             r0,#bufind+8
09E4 E7             1710                                             mov             a,@r1
09E5 B4080B         1711                                             cjne    a,#8,nodi8
09E8 20151E         1712                                             jb              biteizm,seegoon
09EB 7630           1713                                             mov             @r0,#30h                 ;10-10
09ED 18             1714                                             dec             r0
09EE 7663           1715                                             mov             @r0,#63h;31h
09F0 08             1716                                             inc             r0
09F1 8016           1717                                             jmp             seegoon
09F3 B40910         1718     nodi8:                          cjne    a,#9,nodis9
09F6 201510         1719                                     jb              biteizm,seegoon
09F9 7631           1720                                             mov             @r0,#31h           ;10-11
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    28

09FB 18             1721                                             dec             r0
09FC 7663           1722                                             mov             @r0,#63h;31h
                    1723                                     
09FE 08             1724                                             inc             r0
09FF 8008           1725                                             jmp             seegoon
                    1726     
0A01 020000   F     1727     rnorvich:               jmp             norvich
0A04 8087           1728     rno3parN:               jmp             no3parN
                    1729     
0A06 2432           1730     nodis9:                         add             a,#32h
0A08 F6             1731                                             mov             @r0,a;#37h;"T";
0A09 08             1732     seegoon:                        inc             r0
0A0A 7641           1733                                             mov             @r0,#"A";"E";
0A0C 08             1734                                             inc             r0
0A0D 7600           1735                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
0A0F 08             1736                                             inc             r0;             mov             buf
                             ind+11
0A10 7610           1737                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1738                                             
                    1739     ;;;;;;;;;;;;;;;
                    1740     ;;;;;;goonind:
0A12 79AF           1741                                             mov             r1,#parN        ; ??????
0A14 B703ED         1742                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1743             
0A17                1744     seeind:                         ;;;;;;;;;;;;;
0A17 784A           1745                                             mov             r0,#bufind+10
0A19 E6             1746                                             mov             a,@r0
0A1A 300F03         1747                                             jnb             bitnul,nnnul
0A1D 4408           1748                                             orl             a,#08h
0A1F F6             1749                                             mov             @r0,a
0A20 799A           1750      nnnul:         mov             r1,#parT
0A22 B70205         1751                                             cjne    @r1,#2,nsec1
0A25 4420           1752                                             orl             a,#20h    ;1s
0A27 F6             1753                                             mov             @r0,a
0A28 800B           1754                                             jmp             nsec10
0A2A B70105         1755     nsec1:          cjne    @r1,#1,nsec11
0A2D 4440           1756                                             orl             a,#40h                  ;10s
0A2F F6             1757                                             mov             @r0,a
0A30 8003           1758                                             jmp             nsec10
                    1759                                     
0A32 4410           1760     nsec11:         orl             a,#10h
0A34 F6             1761                                             mov             @r0,a                    ;0,1s
                    1762     ;;;;;;;;;;;;;;;;
0A35                1763     nsec10:         
                    1764     
                    1765     
0A35 784A           1766                                             mov             r0,#bufind+10   
0A37 E6             1767                                             mov             a,@r0;mov               @r0,a
0A38 300503         1768                                             jnb             bitavp,nobavp
0A3B 4404           1769                                             orl             a,#04           ;bufind+10.2
0A3D F6             1770                                             mov             @r0,a
                    1771                                     ;       mov             @r0,a   
0A3E 784A           1772     nobavp:         mov             r0,#bufind+10   
0A40 E6             1773                                             mov             a,@r0;mov               @r0,a   
0A41 301803         1774                                        jnb          knizm,nobitizm
0A44 4402           1775                                             orl             a,#02
0A46 F6             1776                                              mov            @r0,a
0A47                1777     nobitizm:                       
0A47 301A07         1778                                             jnb             bitakt,notakt
0A4A C21A           1779                                             clr             bitakt
0A4C 534AFE         1780                                             anl             bufind+10,#0feh
0A4F 8005           1781                                             jmp             taktind
0A51 D21A           1782     notakt:                         setb    bitakt
0A53 434A01         1783                                             orl             bufind+10,#01                      
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    29

                                          
0A56                1784     taktind:                
                    1785     ;;;;;;;;;
0A56 301517         1786                                             jnb             biteizm,yesind
0A59 79B1           1787                                             mov             r1,#vichR
0A5B 7848           1788                                             mov             r0,#bufind+8
0A5D 7654           1789                                             mov             @r0,#'T'
0A5F 08             1790                                             inc             r0
0A60 B72104         1791                                             cjne    @r1,#21h,test9i
0A63 7631           1792                                             mov             @r0,#31h;11A
                    1793                                     ;       dec             r0
                    1794                                     ;       mov             @r0,#63h
0A65 8009           1795                                             jmp             yesind
0A67 B72204         1796     test9i:         cjne    @r1,#22h,test7i
0A6A 7632           1797                                             mov             @r0,#32h;39h;09A
0A6C 8002           1798                                             jmp             yesind
0A6E 7633           1799     test7i:         mov             @r0,#33h;37h;07A
                    1800     ;;;;;;;;;
0A70                1801     yesind:         
0A70 301203         1802                                             jnb             bitklb,noklb
0A73 434A80         1803                                             orl             bufind+10,#80h; on kmp
0A76 300A03         1804     noklb:          jnb             bitbon,nobuf
0A79 434B02         1805                                             orl             bufind+11,#02h; on pysk
0A7C                1806     nobuf:          ;;;;;
0A7C 301808         1807               jnb      knizm,anlp1
0A7F 79AE           1808                                             mov                     r1,#diap
0A81 C3             1809                                             clr                     c
0A82 7401           1810                                             mov                     a,#1
0A84 97             1811                                             subb            a,@r1
0A85 4009           1812                                             jc                      nop1oll
0A87 309106         1813     anlp1:          jnb                     p1.1,nop1oll
0A8A 753935         1814                                             mov                     nuerr,#35h
0A8D 120000   F     1815                                             call            error;ошибка 5 перегрузка на диап 1
                             0-2,10-3     
                    1816             
0A90 120000   F     1817     nop1oll:        call    ind        ;пп выдачи на индикатор
0A93                1818     norvich: 
0A93 789A           1819                                     mov             r0,# parT
0A95 79AC           1820                                             mov             r1,#chind
0A97 B60152         1821                                             cjne    @r0,#1,rnot1in
0A9A                1822     labelB:                    ;;;;;;;;;;;
                    1823                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A9A 789F           1824                                                     mov     r0,#rez_A3+3
                    1825                             ;;;;;;;;
0A9C 79BB           1826                             mov             r1,#work+3
0A9E E6             1827                             mov             a,@r0
0A9F 7F07           1828                             mov             r7,#7;кол сдв вправо
0AA1 C3             1829     dvig3:          clr             c
0AA2 13             1830                             rrc             a
0AA3 DFFC           1831                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0AA5 FA             1832                             mov             r2,a    ;сохр байт
0AA6 18             1833                             dec             r0              ;rez_A3+2
0AA7 E6             1834                             mov             a,@r0
0AA8 C0E0           1835                             push    acc
0AAA C3             1836                             clr             c
0AAB 7F01           1837                             mov             r7,#1
0AAD C3             1838     dvig2:          clr             c
0AAE 33             1839                             rlc             a
0AAF DFFC           1840                             djnz    r7,dvig2 ;d12..d11       средний байт
0AB1 4A             1841                             orl             a,r2
0AB2 F7             1842                             mov             @r1,a;сформ мл байт
0AB3 19             1843                             dec             r1
0AB4 D0E0           1844                             pop             acc
                    1845                             
0AB6 7F07           1846                             mov             r7,#7
0AB8 C3             1847     dvig1:          clr             c
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    30

0AB9 13             1848                             rrc             a
0ABA DFFC           1849                             djnz    r7,dvig1 ;d18     ср байт
0ABC FA             1850                             mov             r2,a   ;сохр
0ABD 18             1851                             dec             r0
0ABE E6             1852                             mov             a,@r0 ;rez_A3+1
0ABF C0E0           1853                             push    acc
                    1854                     
0AC1 7F01           1855                             mov             r7,#1
0AC3 C3             1856     dvig0:          clr             c
0AC4 33             1857                             rlc             a
0AC5 DFFC           1858                             djnz    r7,dvig0 ;        d21..d16
0AC7 4A             1859                             orl             a,r2
0AC8 F7             1860                             mov             @r1,a   ; сформ средний  байт
0AC9 19             1861                             dec             r1
0ACA D0E0           1862                             pop             acc       ;rez_A3+1
                    1863                             ;;;;;;;;;;;;;;
                    1864     ;                       jb              acc.7,dvm
0ACC C3             1865                             clr             c
0ACD 7F07           1866                             mov             r7,#7
0ACF C3             1867     dvig4:          clr             c
0AD0 13             1868                             rrc             a
0AD1 DFFC           1869                             djnz    r7,dvig4 ;        d22
0AD3 FA             1870                             mov             r2,a   ;сохр
0AD4 18             1871                             dec             r0;     rez_A3
0AD5 E6             1872                             mov             a,@r0
                    1873                             ;;;;;
0AD6 7F01           1874                             mov             r7,#1
0AD8 C3             1875     vig0:           clr             c
0AD9 33             1876                             rlc             a
0ADA DFFC           1877                             djnz    r7,vig0 ;         d24..d30
0ADC 4A             1878                             orl             a,r2
0ADD F7             1879                             mov             @r1,a   ; сформ   байт
0ADE 19             1880                             dec             r1
0ADF E6             1881                             mov             a,@r0
                    1882                             ;;;;;
0AE0 20E70C         1883                             jb              acc.7,dvm
0AE3 C3             1884                             clr             c
0AE4 7F07           1885                             mov             r7,#7
0AE6 C3             1886     vig4:           clr             c
0AE7 13             1887                             rrc             a
0AE8 DFFC           1888                             djnz    r7,vig4 ;         d
0AEA 8009           1889                             jmp             endsdv
                    1890     
0AEC 020000   F     1891     rnot1in:                jmp             not1in
                    1892     
                    1893     ;;;;;;;;;;;;                                    
0AEF 7F07           1894     dvm:            mov             r7,#7
0AF1 D3             1895     dvig6:          setb            c
0AF2 13             1896                             rrc             a
0AF3 DFFC           1897                             djnz    r7,dvig6 ;        d31
0AF5 F7             1898     endsdv:         mov             @r1,a
                    1899                                                             
                    1900      ;->work   
                    1901                             
0AF6 900000   F     1902                             mov             dptr,#chzap
0AF9 120000   F     1903                             call     ldc_long
0AFC 78BB           1904                              mov            r0,#work+3
0AFE 120000   F     1905                             call    ladd
0B01 ED             1906                             mov             a,r5
0B02 F5D2           1907                             mov             DAC0L,a
                    1908                             
0B04 EC             1909                             mov             a,r4
0B05 F5D3           1910                             mov             DAC0H,a
                    1911     
                    1912                                             ;;;;;;;;;;
0B07 78CF           1913                                             mov                     r0,#chbuf               ;fl
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    31

                             oat
0B09 120000   F     1914                                             call            resar2
0B0C 900000   F     1915                                             mov                     dptr,#ch_2;ch0;ch_1
0B0F 120000   F     1916                                             call            ldc_ltemp
0B12 1201D6         1917                                             call            flcmp
0B15 5020           1918                                             jnc                     rnobuf0
                    1919                                             
0B17 900000   F     1920                                             mov                     dptr,#ch_1
0B1A 120000   F     1921                                             call            ldc_ltemp
0B1D 1201D1         1922                                             call            flsub
0B20 900E00         1923                                             mov                     dptr,#chbuf1               
                                  ;СБ1 внешн озу
0B23 EA             1924                                             mov                     a,r2
0B24 F0             1925                                             movx            @dptr,a
0B25 A3             1926                                             inc                     dptr
0B26 EB             1927                                             mov                     a,r3
0B27 F0             1928                                             movx            @dptr,a
0B28 A3             1929                                             inc                     dptr
0B29 EC             1930                                             mov                     a,r4
0B2A F0             1931                                             movx            @dptr,a
0B2B A3             1932                                             inc                     dptr
0B2C ED             1933                                             mov                     a,r5
0B2D F0             1934                                             movx            @dptr,a
                    1935                                             
                    1936                                             
                    1937                                             ;jnc                    rnobuf0
0B2E 200909         1938                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0B31 200A08         1939                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0B34 020000   F     1940                                             jmp             gocikle
0B37 020000   F     1941     rnobuf0:        jmp             nobuf0
0B3A                1942     yesprd: ;передать   A3 в буфер
0B3A 8045           1943                                             jmp             goonT
0B3C                1944     yesbuf:         ;записать   A3 в буфер
0B3C 120000   F     1945                                             call            resa_hl;dptr-
0B3F 120000   F     1946                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1947                                                                             ;в ячейке saven_bl
0B42 120000   F     1948                                             call            save_hl
0B45 78AE           1949                                             mov                     r0,#diap
0B47 E6             1950                                             mov                     a,@r0
0B48 7938           1951                                             mov                     r1,#nblok
0B4A B70104         1952                                             cjne            @r1,#1,nosav1
0B4D F534           1953                                             mov                     sadiap,a
0B4F 8012           1954                                             jmp                     gotostrob
0B51 B70204         1955     nosav1:         cjne            @r1,#2,nosav2
0B54 F532           1956                                             mov                     sadiap2,a
0B56 800B           1957                                     jmp                     gotostrob
0B58 B70304         1958     nosav2:         cjne            @r1,#3,nosav3
0B5B F531           1959                                             mov                     sadiap3,a
0B5D 8004           1960                                     jmp                     gotostrob
0B5F                1961     nosav3:         
0B5F F530           1962                                             mov                     sadiap4,a
0B61 8000           1963                                     jmp                     gotostrob
                    1964     
                    1965                                             ;строб
0B63                1966     gotostrob:
0B63 E586           1967                                     mov             a,P6            ;p6.4=0
0B65 54EF           1968                             anl             a,#0efh
0B67 F586           1969                             mov             P6,a
0B69 00             1970                             nop
0B6A 00             1971                             nop
                    1972                                     
0B6B E586           1973                             mov             a,P6                    ;p6.4=1 
0B6D 4410           1974                             orl             a,#10h
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    32

0B6F F586           1975                             mov             P6,a
                    1976                                     ;;;;;;;;;
0B71 E5DA           1977                             mov             a,PCA0CPM0;     
0B73 4446           1978                             orl             a,#46h;anl              a,#0fbh
0B75 F5DA           1979                             mov             PCA0CPM0,a
                    1980     
0B77 75CDD0         1981                             mov             TH2,#0d0h
0B7A 75CC00         1982                             mov             TL2,#00
                    1983     
0B7D D2CA           1984                             setb            T2CON.2
0B7F D2AD           1985                             setb            ET2;IE.5                            
0B81 78CD           1986     goonT:                          mov             r0,#interva;high  byte loadr2
0B83 E6             1987                                             mov             a,@r0
0B84 FC             1988                                             mov             r4,a
0B85 08             1989                                             inc             r0
0B86 E6             1990                                             mov             a,@r0
0B87 FD             1991                                             mov             r5,a
0B88 E4             1992                                             clr             a
0B89 FB             1993                                             mov             r3,a
0B8A FA             1994                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0B8B 120402         1995                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1996     
0B8E 789A           1997                                             mov             r0,#parT
0B90 B60108         1998                                             cjne    @r0,#1,nott1
0B93 900000   F     1999                                             mov                     dptr,#ch_2       
0B96 120000   F     2000                                             call            ldc_ltemp
0B99 8009           2001                                             jmp                     intmul
                    2002     
0B9B B60225         2003     nott1:                  cjne    @r0,#2,nott2
0B9E 900000   F     2004                                                     mov                     dptr,#ch_10      
0BA1 120000   F     2005                                                     call            ldc_ltemp
                    2006                                                                             
0BA4 120203         2007     intmul: call            flmul                                   ;*10
0BA7 900E00         2008     intmul1:        mov             dptr,#chbuf1    ;СБ1
0BAA E0             2009                                             movx    a,@dptr
0BAB F508           2010                                             mov             r8,a
0BAD A3             2011                                             inc             dptr
0BAE E0             2012                                     movx    a,@dptr
0BAF F509           2013                                             mov             r9,a
0BB1 A3             2014                                             inc             dptr
0BB2 E0             2015                                     movx    a,@dptr
0BB3 F50A           2016                                             mov             r10,a
0BB5 A3             2017                                             inc             dptr
0BB6 E0             2018                                             movx    a,@dptr
0BB7 F50B           2019                                             mov             r11,a
0BB9 120166         2020                                             call            fladd           ;СБ+СБ1
0BBC 78CF           2021     intmul2:        mov                     r0,#chbuf
0BBE 120000   F     2022                                     call            saver2          ;*2
                    2023                                     
0BC1 8035           2024                                     jmp             gocikle
                    2025     
0BC3 B6030B         2026     nott2:                  cjne    @r0,#3,nott3
0BC6 900000   F     2027                                                     mov                     dptr,#ch_2       
0BC9 120000   F     2028                                                     call            ldc_ltemp
0BCC 120203         2029                                                     call            flmul
0BCF 80EB           2030                                                     jmp                     intmul2            
                                                  ;*2
                    2031     
                    2032     
0BD1 B60414         2033     nott3:          cjne    @r0,#4,nott4
0BD4 900000   F     2034                                             mov                     dptr,#ch_10      
0BD7 120000   F     2035                                             call            ldc_ltemp       ;/10*4
0BDA 1202B7         2036                                             call            fldiv
0BDD 900000   F     2037                                             mov                     dptr,#ch_4       
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    33

0BE0 120000   F     2038                                             call            ldc_ltemp
0BE3 120203         2039                                             call            flmul
0BE6 80D4           2040                                             jmp             intmul2
                    2041     
0BE8 B6050B         2042     nott4:          cjne    @r0,#5,nott5
0BEB 900000   F     2043                                                     mov                     dptr,#ch_2       
0BEE 120000   F     2044                                             call            ldc_ltemp;*2
0BF1 120203         2045                                             call            flmul
0BF4 80C6           2046                                             jmp             intmul2;T=5
0BF6                2047     nott5:  ;               mov                     dptr,#ch_1       
                    2048                                     ;       call            ldc_ltemp
                    2049                                     ;       call            flmul
0BF6 80C4           2050                                     jmp                     intmul2                            
                                  ;*1
                    2051     
                    2052     
0BF8 300708         2053     gocikle:        jnb             bitzus,nofz                     
0BFB 120000   F     2054                             call    z_05s    ;0,5c
0BFE 120000   F     2055                             call    z_05s    ;0,5c
0C01 C207           2056                             clr     bitzus;bitbuf бит задержки засылки us
0C03 020000   F     2057     nofz:           jmp     labelA;rebyte
                    2058     
                    2059     
0C06 80F0           2060     yestt5:         jmp             gocikle
                    2061     
0C08 78CF           2062     nobuf0:                 mov             r0,#chbuf
0C0A 120000   F     2063                                                     call            resar2
0C0D 900000   F     2064                                                     mov                     dptr,#ch_1       
0C10 120000   F     2065                                             call            ldc_ltemp
0C13 1201D1         2066                                             call            flsub
0C16 78CF           2067                                             mov                     r0,#chbuf       
0C18 120000   F     2068                                             call            saver2  
0C1B 80DB           2069                                             jmp             gocikle
                    2070     
                    2071     
0C1D B60205         2072     not1in:                         cjne    @r0,#2,not2in
0C20 7701           2073                                             mov             @r1,#1           ;T=2
0C22 020000   F     2074                                             jmp     labelB
                    2075     
0C25 B60305         2076     not2in:                         cjne    @r0,#3,not3in
0C28 7701           2077                                             mov             @r1,#1;9                ;T=3
0C2A 020000   F     2078                                             jmp     labelB
0C2D 7703           2079     not3in:                         mov             @r1,#3;19
0C2F 020000   F     2080                                             jmp     labelB
                    2081     
                    2082     
                    2083     ;;;;;;;;;;;3.11.06
                    2084     
                    2085     ;;коррекция 0
0C32 7883           2086     KORnul:         mov             r0,#chdel
0C34 B60010         2087                             cjne    @r0,#0,nonuldel
                    2088                                     
0C37 E584           2089                             mov             a,p4                    ;сохр  us
0C39 F536           2090                             mov             saus,a
0C3B E585           2091                             mov             a,p5
0C3D F537           2092                             mov             saus+1,a
                    2093     
0C3F 900000   F     2094                             mov             dptr,#kor0us
0C42 120000   F     2095                             call    lospus          ;упр слово коррекции 0
0C45 8018           2096                             jmp             chdelmo
                    2097     
0C47                2098     nonuldel:       ;cjne   @r0,#7,no4del
0C47 B6031B         2099                                                     cjne    @r0,#3,no4del
                    2100                             ;рез ->AN
0C4A 7862           2101                             mov             r0,#rez_A;->r2..r5
0C4C 120000   F     2102                             call    resar2
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    34

                    2103             
                    2104                                     ;;;;;;;;;;
0C4F 120402         2105                             call    altof           ;r2..r5->float
0C52 7884           2106                             mov             r0,#kor0_AN;->kor0_AN
0C54 120000   F     2107                             call    saver2
                    2108                                     
0C57 E536           2109                             mov             a,saus                  ;восстан исходное упр слово
0C59 F584           2110                             mov             p4,a
0C5B E537           2111                             mov             a,saus+1
0C5D F585           2112                             mov             p5,a            
0C5F 7883           2113     chdelmo:        mov             r0,#chdel
0C61 06             2114                             inc             @r0             ;chdel+1
0C62 020000   F     2115                             jmp              rebyte
                    2116     
0C65                2117     no4del:         ;cjne   @r0,#14,chdelmo
0C65 B606F7         2118                                             cjne    @r0,#6,chdelmo
0C68 7600           2119                             mov             @r0,#0          ;chdel
0C6A 7898           2120                             mov             r0,#chinkor
0C6C 7602           2121                             mov             @r0,#2;00;
0C6E 08             2122                             inc             r0
0C6F 7658           2123                             mov             @r0,#58h;0c8h
0C71 120000   F     2124                             call    clmassix;сбросить массив скольз среднего
0C74                2125     bonpart:
0C74 300A20         2126                             jnb                     bitbon,rebyter
0C77 78CF           2127                             mov                     r0,#chbuf
0C79 120000   F     2128                             call            resar2
0C7C 799A           2129                             mov                     r1,#parT
0C7E B70211         2130                             cjne            @r1,#2,no6del
0C81 900000   F     2131                             mov                     dptr,#ch_7;5
0C84                2132     no5del:
0C84 120000   F     2133                             call            ldc_ltemp
0C87 1201D1         2134                             call            flsub   
0C8A 78CF           2135                             mov                     r0,#chbuf
0C8C 120000   F     2136                             call            saver2
0C8F 020000   F     2137                             jmp              rebyte
0C92                2138     no6del:
0C92 900000   F     2139                             mov                     dptr,#ch_1
0C95 80ED           2140                             jmp                     no5del
                    2141     
                    2142     
0C97 020000   F     2143     rebyter:        jmp              rebyte
                    2144     
0C9A 7981           2145     tekaout:        mov             r1,#chavt
0C9C 770C           2146                                             mov             @r1,#0ch;6;1;
0C9E 09             2147                                             inc             r1
0C9F 7780           2148                                             mov             @r1,#80h;40h;
0CA1 020000   F     2149                                             jmp             noavk
                    2150     
                    2151     
                    2152     ;автокалибровка
0CA4 200AF3         2153     autoka:  jb             bitbon,tekaout;rebyter
0CA7                2154     nulavt:  ;;;;;
0CA7 7883           2155                             mov             r0,#chdel
0CA9 B60016         2156                             cjne    @r0,#0,nndelch
0CAC E584           2157                             mov             a,p4                    ;сохр  us
0CAE F536           2158                             mov             saus,a
0CB0 E585           2159                             mov             a,p5
0CB2 F537           2160                             mov             saus+1,a
                    2161     
0CB4 E585           2162                             mov   a,p5
0CB6 4404           2163                             orl             a,#04              ;p5.2=1
0CB8 00             2164                             nop
0CB9 00             2165                             nop
0CBA 543F           2166                             anl             a,#3fh          ;p5.6,p5.7=0
0CBC F585           2167                             mov   p5,a
0CBE 06             2168                             inc             @r0
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    35

0CBF 020000   F     2169                             jmp              rebyte
                    2170     
0CC2 B6033D         2171     nndelch:        cjne    @r0,#3,n4delch
                    2172                             ;pez->A+
                    2173                             ;K+=000/(A+-AN)
                    2174                             ;mov            r0,#rez_A;->r2..r5
                    2175                             ;call   resar2
0CC5 E577           2176                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0CC7 FA             2177                                     mov             r2,a
0CC8 E578           2178                                     mov             a,reacp+1
0CCA FB             2179                                     mov             r3,a
0CCB E579           2180                                     mov             a,reacp+2
0CCD FC             2181                                     mov             r4,a
0CCE E57A           2182                                     mov             a,reacp+3
0CD0 FD             2183                                     mov             r5,a
                    2184                                     ;;;;;;;;;;;;;;;
0CD1 120402         2185                             call    altof                   ;r2..r5->float
0CD4 7888           2186                             mov             r0,#rezAp;->rezAp
0CD6 120000   F     2187                             call    saver2                          
0CD9 7884           2188                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0CDB 120000   F     2189                             call    resar8                          
0CDE 1201D1         2190                             call    flsub           ; r2..r5(A+-AN)
0CE1 120000   F     2191                             call    move28     ;r2..r5->r8..r11
0CE4 900000   F     2192                             mov             dptr,#CH2tho;000->r2..r5 float
0CE7 120000   F     2193                             call    ldc_long                
0CEA 1202B7         2194                             call    fldiv
0CED EA             2195                             mov             a,r2
0CEE 547F           2196                             anl             a,#7fh
0CF0 FA             2197                             mov             r2,a
0CF1 7890           2198                             mov             r0,#koefKp;->koefKp
0CF3 120000   F     2199                             call    saver2
                    2200                       
                    2201                     ;       anl             P5,#0feh                ;p5.0=0 
0CF6 E585           2202                     mov             a,P5
0CF8 543B           2203                             anl             a,#3bh;acp-
0CFA F585           2204                             mov             P5,a
0CFC 7883           2205                             mov             r0,#chdel
0CFE 06             2206                             inc             @r0                       ;ch+1
0CFF 020000   F     2207                             jmp             rebyte
                    2208     
0D02 B6063F         2209     n4delch:        cjne    @r0,#6,n8delch
                    2210                             ; pez->A-
                    2211                             ;K-=000/(A--AN)
                    2212                     ;       mov     r0,#rez_A;->r2..r5
                    2213                     ;       call    resar2
0D05 E577           2214                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0D07 FA             2215                                     mov             r2,a
0D08 E578           2216                                     mov             a,reacp+1
0D0A FB             2217                                     mov             r3,a
0D0B E579           2218                                     mov             a,reacp+2
0D0D FC             2219                                     mov             r4,a
0D0E E57A           2220                                     mov             a,reacp+3
0D10 FD             2221                                     mov             r5,a
                    2222                                     ;;;;;;;;;;;;;;;
0D11 120402         2223                             call    altof                   ;r2..r5->float
0D14 788C           2224                             mov             r0,#rezAm;->rezAm
0D16 120000   F     2225                             call    saver2                          
0D19 7884           2226                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0D1B 120000   F     2227                             call    resar8                          
0D1E 1201D1         2228                             call    flsub                   ; r2..r5(A--AN)
0D21 120000   F     2229                             call    move28                  ;r2..r5->r8..r11
0D24 900000   F     2230                             mov             dptr,#CH2tho    ;000->r2..r5 float
0D27 120000   F     2231                             call    ldc_long                
0D2A 1202B7         2232                             call    fldiv
0D2D EA             2233                             mov             a,r2
0D2E 547F           2234                             anl             a,#7fh
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    36

0D30 FA             2235                             mov             r2,a
0D31 7894           2236                             mov             r0,#koefKm;->koefKm
0D33 120000   F     2237                             call    saver2
                    2238                        
0D36 E536           2239                             mov             a,saus                  ;восстан исходное упр слово
0D38 F584           2240                             mov             p4,a
0D3A E537           2241                             mov             a,saus+1
0D3C F585           2242                             mov             p5,a            
0D3E 7883           2243                             mov             r0,#chdel
0D40 06             2244                             inc             @r0                       ;ch+1
0D41 020000   F     2245                        jmp    rebyte
                    2246     
0D44 B6090F         2247     n8delch:        cjne    @r0,#9,n12delch
0D47 7600           2248                             mov             @r0,#0
0D49 7981           2249                             mov             r1,#chavt
0D4B 773E           2250                             mov             @r1,#3eh;0ch;
0D4D 09             2251                             inc             r1
0D4E 7780           2252                             mov             @r1,#80h;
0D50 120000   F     2253                             call   clmassix     ;сбросить массив среднего
0D53 020000   F     2254                             jmp             rebyte; bonpart;
0D56 06             2255     n12delch:       inc             @r0
0D57 020000   F     2256                             jmp             rebyte
                    2257     
                    2258     
                    2259     
                    2260                                 
0D5A 020000   F     2261     rout6:          jmp             out6
0D5D 020000   F     2262     rlabelF:        jmp             labelF  
0D60 020000   F     2263     rknrazr:        jmp             knrazr  
0D63 020000   F     2264     rknopt:         jmp             knopt
0D66 020000   F     2265     rizman:         jmp             izman
                    2266             
0D69 020000   F     2267     no0chkl:        jmp             kkout6
0D6C 75AD00         2268                                                     mov             P3IF,#00;               обя
                             зательно сбросить опять приходит на обработку прерывания
0D6F 75B0C0         2269                                             mov             P3,#0c0h
0D72 32             2270                                             reti
0D73                2271     keyb1:  ;IE6
                    2272     ;;;;;
                    2273                     ;       mov                     a,chkl+1                ;low
                    2274                     ;       jnz                     no0chkl
                    2275                     ;       mov                     a,chkl                          ;high
                    2276                     ;       jnz                     no0chkl
                    2277     ;;;;;
0D73 75E700         2278                                     mov             EIE2,#00H
0D76 75AD00         2279                                     mov             P3IF,#00
                    2280                                     
0D79 C0E0           2281                                     push    acc
0D7B C0D0           2282                                     push    psw
0D7D C000           2283                                     push    rr0
0D7F C001           2284                                     push    rr1
0D81 C002           2285                                     push    rr2
0D83 C003           2286                                     push    rr3
0D85 C004           2287                                     push    rr4
0D87 C005           2288                                     push    rr5
0D89 C006           2289                                     push    rr6
0D8B C007           2290                                     push    rr7
0D8D C082           2291                                     push    dpl
0D8F C083           2292                                     push    dph
                    2293                                     ;clr            bitmig
                    2294                       ;;;;;;;;;;;;;;
0D91 120000   F     2295                                     call    z_01s;0,1s
                    2296                                     ;       call    z_01s
                    2297                                     ;восстан знакоместо при мигании
                    2298                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0D94 78B2           2299                                     mov             r0,#marker
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    37

0D96 7440           2300                                     mov             a,#bufind
0D98 26             2301                                     add             a,@r0                   ;a=bufind+marker
0D99 F9             2302                                     mov             r1,a
0D9A A73C           2303                                     mov             @r1,savba
                    2304                                     ;;;;;;;;;;;
0D9C E5B0           2305                             mov             a,p3
0D9E 20E644         2306                                     jb              acc.6,outviR;выход из режима выч R
0DA1 E5B0           2307     gout6:                          mov             a,p3
0DA3 44FF           2308                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0DA5 F5B0           2309                                     mov             p3,a
0DA7 E5B0           2310                                     mov             a,p3
0DA9 30E6AE         2311                                     jnb             acc.6,rout6             ;error
0DAC 3004AE         2312                                     jnb             bitizm,rlabelF
0DAF 75B0FE         2313                                     mov             p3,#0feh                ;реж IZM
0DB2 E5B0           2314                                     mov             a,p3
0DB4 30E6AF         2315                                     jnb             acc.6,rizman
                    2316                                     ;;;;;;
0DB7 201232         2317                                     jb              bitklb,goklb
0DBA 75B0FD         2318                                     mov             p3,#0fdh
0DBD E5B0           2319                                     mov             a,p3
0DBF 30E69E         2320                                     jnb             acc.6,rknrazr             ;labelC
0DC2 75B0FB         2321                                     mov             p3,#0fbh
0DC5 E5B0           2322                                     mov             a,p3
0DC7 30E656         2323                                     jnb             acc.6,knright           ;->
0DCA 75B0F7         2324                                     mov             p3,#0f7h
0DCD E5B0           2325                                     mov             a,p3
0DCF 30E691         2326                                     jnb             acc.6,rknopt                    ;T
0DD2 75B0EF         2327                                     mov             p3,#0efh
0DD5 E5B0           2328                                mov          a,p3
0DD7 30E615         2329                                     jnb             acc.6,pyskst                    ;pysk/stop
0DDA 75B0DF         2330                                     mov             p3,#0dfh
0DDD E5B0           2331                                     mov             a,p3
0DDF 30E65F         2332                                jnb          acc.6,knvich
0DE2 020000   F     2333                                     jmp             izmpaT
                    2334     
0DE5 3006B9         2335     outviR: jnb             bitvi11,gout6   
0DE8 C214           2336                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0DEA C206           2337                                     clr             bitvi11
                    2338                                     
0DEC 020000   F     2339     goklb:          jmp             out6
                    2340     
0DEF 200A12         2341     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0DF2 D20A           2342                                     setb    bitbon  ;уст реж буфер вкл
0DF4 79D5           2343                                     mov                     r1,#volume;work         ;обьем блок
                             а
0DF6 7700           2344                                     mov                     @r1,#00
0DF8 09             2345                                     inc                     r1
0DF9 77C7           2346                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0DFB 434B02         2347                                     orl             bufind+11,#02h; on pysk
0DFE 120000   F     2348                                     call            ind
0E01 020000   F     2349                                     jmp             izmpaT
0E04 C20A           2350     bufon:                  clr             bitbon  ;уст реж буфер выкл
0E06 534BFD         2351                                             anl             bufind+11,#0fdh; off pysk
0E09 120000   F     2352                                             call    ind
0E0C 020000   F     2353                                     jmp             izmpaT
                    2354     
0E0F 79B0           2355     tizmri:                 mov             r1,#level
0E11 B70102         2356                                     cjne    @r1,#1,right2
                    2357                                     ;10s->HET
0E14 8004           2358                                     jmp             right3
                    2359     
0E16 07             2360     right2:                 inc             @r1
0E17 120000   F     2361                                     call    lolevT
                    2362                                     ;call   loadT   ;нажата кн-> в реж Tизм 
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    38

0E1A 120000   F     2363     right3:                 call    ind
0E1D 020000   F     2364                                     jmp             izmfun
                    2365     
                    2366                             
                    2367                             
0E20                2368     knright:        
                    2369     
0E20 79AE           2370                                     mov             r1,#diap
                    2371                             ;перекл диапазон 1 поз вверх сбр массив
0E22 17             2372                                     dec             @r1
0E23 B7FF04         2373                                     cjne    @r1,#0ffh,diinc
0E26 7700           2374                                     mov             @r1,#0
0E28 807A           2375                                     jmp  izmfun
0E2A 120000   F     2376     diinc:                  call     clmassix
0E2D 78B3           2377                                     mov             r0,#summa
0E2F 120000   F     2378                                     call    clear4
0E32 786A           2379                                     mov             r0,#rez_A0
0E34 120000   F     2380                                     call    clear4
0E37 C20F           2381                                     clr             bitnul          ;гасить светодиод НУЛЬ  
0E39 120000   F     2382                                     call    loadUS
0E3C 8066           2383                                      jmp  izmfun
                    2384     
0E3E 020000   F     2385     vit2_10:                jmp             out6
0E41                2386     knvich:                 ;12.02.07
0E41 789A           2387                                             mov                     r0,#parT
0E43 C3             2388                                             clr                     c
0E44 7404           2389                                             mov                     a,#4 
0E46 96             2390                                             subb            a,@r0
0E47 40F5           2391                                             jc                      vit2_10;не нажимать кнопку 
                             ВЫЧ R T=10ms,2ms
0E49 2015F2         2392                                             jb                      biteizm,vit2_10;не нажимать
                              кнопку ВЫЧ во время теста
0E4C 200613         2393                               jb            bitvi11,onvich
0E4F C204           2394                                     clr             bitizm
0E51 D214           2395                                     setb    bitvich
                    2396                                     
0E53 78B1           2397                                     mov             r0,#vichR
0E55 7611           2398                                     mov             @r0,#11h;;????????or 0
                    2399                                     ;ВЫЧИСЛИТЬ
0E57 900000   F     2400                                     mov     dptr,#teVICH
0E5A 120000   F     2401                                     call    lotext
0E5D 120000   F     2402                                call         z_1s;;;;;;;
0E60 8073           2403                                     jmp              viout;izmpaT
                    2404     
0E62 C214           2405     onvich:                 clr             bitvich
                    2406                                                     ;;;;;;;;28.02
0E64 C206           2407                                                     clr             bitvi11
0E66 D204           2408                                                     setb            bitizm
                    2409                                                     ;;;;;;;;;
0E68 78B1           2410                                     mov             r0,#vichR
0E6A 7600           2411                                     mov             @r0,#0
0E6C 803A           2412                                     jmp              izmpaT
                    2413     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0E6E 301820         2414     louizm:            jnb          knizm,lou
0E71 79AE           2415                                     mov             r1,#diap
0E73 C3             2416                                     clr             c
0E74 7403           2417                                     mov             a,#3
0E76 97             2418                                     subb    a,@r1
0E77 5006           2419                                     jnc             lldi23    ;10-2..10-5
                    2420                                     ;10-6..10-11
0E79 E584           2421                                     mov             a,p4
0E7B 54F7           2422                                     anl             a,#0f7h   ;d3
0E7D F584           2423                                     mov             p4,a
0E7F E7             2424     lldi23:                 mov             a,@r1
0E80 6403           2425                                     xrl             a,#3
0E82 7002           2426                                     jnz             lldi3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    39

0E84 8005           2427                                     jmp             lldi2   ;10-5
0E86 E7             2428     lldi3:                  mov             a,@r1
0E87 6402           2429                                     xrl             a,#2            ;
0E89 7006           2430                                     jnz             lou             
0E8B E585           2431     lldi2:                  mov             a,p5            ;10-4
0E8D 4408           2432                                     orl             a,#08
0E8F F585           2433                                     mov             p5,a
0E91 22             2434     lou:                    ret
                    2435                               ;;;;;;
0E92 201511         2436     izman:  jb              biteizm,ontest  
0E95 201807         2437                                     jb              knizm,knizmon
0E98 D218           2438                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2439                             ;       d3(k5 p4),d3(u5 p5)заслать us
0E9A 120000   F     2440                                     call    louizm 
0E9D 8005           2441                                     jmp             izmfun
0E9F C218           2442     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0EA1 120000   F     2443                                     call    loadUS;восстановить us
0EA4                2444     izmfun:                 
0EA4 D207           2445                                     setb    bitzus;bitbuf
0EA6 8000           2446     ontest: jmp             labelE;;;;;;;;;;;;
                    2447                                     ;;;;;;;;;;;;;;
0EA8                2448     izmpaT:
                    2449     ;;;;;;;;;;;;;;;;;
                    2450                     ;       clr             c 
                    2451                     ;       mov             r1,#parN
                    2452     
                    2453                     ;       mov             r0,#diap
                    2454                     ;       mov             a,#6            
                    2455                     ;       subb    a,@r0
                    2456                     ;       jnc             labelE          ;         ;10-2..10-8
                    2457                               
                    2458                     ;       mov             @r1,#2          ;10-9..10-11            
                    2459                     ;       jmp             labelE
                    2460     
                    2461     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0EA8 789A           2462     labelE:                 mov             r0,#parT
0EAA 793D           2463                                     mov             r1,#chkl
0EAC B60108         2464                                     cjne    @r0,#1,izmt2
0EAF 7700           2465                                     mov             @r1,#0
0EB1 09             2466                                     inc             r1
0EB2 7701           2467                                     mov             @r1,#1;2
0EB4 020000   F     2468                                     jmp             out6
0EB7 B60208         2469     izmt2:                  cjne    @r0,#2,izmt3
0EBA 7700           2470                                     mov             @r1,#0
0EBC 09             2471                                     inc             r1
0EBD 7702           2472                                     mov             @r1,#2;10;20
0EBF 020000   F     2473                                     jmp             out6
                    2474     
0EC2 7700           2475     izmt3:                  mov             @r1,#0
0EC4 09             2476                                     inc             r1
0EC5 770A           2477                                     mov             @r1,#10;20;0
0EC7 020000   F     2478                                     jmp             out6
                    2479     
                    2480     
                    2481     
                    2482     
0ECA                2483     knopt: ;кнопка T
0ECA C204           2484                                clr          bitizm
0ECC D210           2485                                setb         bitt2
0ECE 79B7           2486                                mov          r1,#load
0ED0 7704           2487                                mov          @r1,#4;1s
0ED2 120000   F     2488                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2489                     
0ED5 793D           2490     viout:          mov             r1,#chkl
0ED7 7703           2491                             mov             @r1,#03
0ED9 09             2492                             inc             r1
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    40

0EDA 77E8           2493                             mov             @r1,#0e8h               ;1000
0EDC 020000   F     2494                             jmp             out6
                    2495     
0EDF                2496     knrazr:          
0EDF C3             2497     labelC:          clr            c
0EE0 78AF           2498                             mov             r0,#parN
0EE2 799A           2499                             mov             r1,#parT
0EE4 7402           2500                             mov             a,#2
0EE6 97             2501                             subb    a,@r1
0EE7 40BF           2502                             jc              labelE          ;T>2
0EE9 B60104         2503                             cjne    @r0,#1,noN1c
0EEC 7602           2504                             mov             @r0,#2          ;N=2
0EEE 80B8           2505                             jmp             labelE
                    2506     
0EF0 B60204         2507     noN1c:          cjne    @r0,#2,not_1
0EF3 7603           2508                             mov             @r0,#3          ;N=3      ;10-2..10-8
0EF5 80B1           2509                             jmp             labelE
                    2510     
0EF7                2511     not_10: 
0EF7 7601           2512     not_1:          mov             @r0,#1                          ;N=1
0EF9 80AD           2513                             jmp     labelE
                    2514     
0EFB 020000   F     2515     rtizmri:        jmp             tizmri
                    2516     
0EFE 75B0F7         2517     ttout:          mov             p3,#0f7h
0F01 20B6D1         2518                                             jb              p3.6,viout
0F04 D204           2519                                             setb    bitizm;отжатие кнопки t
0F06 C210           2520                                             clr             bitt2
0F08 809E           2521                                             jmp             labelE
0F0A                2522     labelf:                 
0F0A 301035         2523                             jnb             bitt2,nofizm
0F0D 75B0FB         2524                        mov          p3,#0fbh
0F10 E5B0           2525                        mov          a,p3
0F12 20E6E9         2526                        jb           acc.6,ttout;outF
0F15 79B7           2527                        mov          r1,#load;parT
0F17 B70502         2528                        cjne         @r1,#5,noft1
                    2529                        ;t=10s
0F1A 80B9           2530                        jmp          viout;out6;ft1izm
                    2531     
0F1C 07             2532     noft1:     inc          @r1;dec         @r1
0F1D 120000   F     2533     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2534                             ;call   ind
0F20 80B3           2535                     jmp             viout;out6;??????????????/
                    2536     
                    2537                             ;увеличить счетчик задержки клавиатуры
0F22 783D           2538     outF:           mov             r0,#chkl
0F24 7627           2539                             mov             @r0,#27h
0F26 08             2540                             inc             r0
0F27 7610           2541                             mov             @r0,#10h
0F29 020000   F     2542                             jmp             out6;out7
                    2543     
0F2C 020000   F     2544     noviR1:         jmp             noviR
0F2F 78B1           2545     outvich:        mov                     r0,#vichR
0F31 7600           2546                                             mov                     @r0,#0
0F33 C214           2547                                             clr                     bitvich
0F35 C206           2548                                             clr                     bitvi11
0F37 C211           2549                                             clr                     bitmenu
0F39 D204           2550                                             setb            bitizm
0F3B 78B2           2551                                             mov                     r0,#marker
0F3D 76FF           2552                                             mov                     @r0,#0ffh
0F3F 020000   F     2553                                             jmp                     labelE;out6     
                    2554     
0F42 3014E7         2555     nofizm:         jnb             bitvich,noviR1
0F45 75B0DF         2556                                                     mov             p3,#0dfh
0F48 30B6E4         2557                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    41

0F4B 78B1           2558                             mov             r0,#vichR
0F4D B61111         2559                             cjne    @r0,#11h,no11v6
0F50 75B0FB         2560                             mov                     p3,#0fbh;->
0F53 20B61C         2561                             jb                      p3.6,rviout;outF
0F56 7612           2562                             mov             @r0,#12h                ;11= вычислить
0F58 900000   F     2563     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0F5B 120000   F     2564                             call    lotext
0F5E 020000   F     2565                             jmp             viout;outF
                    2566             
0F61 B61211         2567     no11v6:         cjne    @r0,#12h,no12v6
0F64 75B0FB         2568                             mov             p3,#0fbh;->
0F67 20B608         2569                             jb              p3.6,rviout;outF
0F6A 7611           2570                             mov             @r0,#11h;13h
0F6C 900000   F     2571                             mov             dptr,#teVICH;teOUT
0F6F 120000   F     2572                             call    lotext
0F72                2573     rviout:
0F72 020000   F     2574                             jmp             viout;outF
                    2575                     
0F75 B61311         2576     no12v6:         cjne    @r0,#13h,no13v6
0F78 75B0FB         2577                                                     mov             p3,#0fbh;->
0F7B 20B6F4         2578                             jb              p3.6,rviout;outF
0F7E 7611           2579                             mov             @r0,#11h
0F80 900000   F     2580                             mov             dptr,#teVICH
0F83 120000   F     2581                             call    lotext
0F86 020000   F     2582                             jmp             viout;outF
                    2583     
                    2584     ;кн -> A= 0000
                    2585     ;кн -> B= +00000
0F89 75B0FB         2586     no13v6:         mov             p3,#0fbh
0F8C E5B0           2587                             mov             a,p3
0F8E 20E635         2588                             jb              acc.6,chanZ
0F91 E53B           2589                             mov             a,movrig
0F93 B40714         2590                             cjne    a,#7,kon_B      
0F96 78B2           2591                             mov             r0,#marker      ;A= 0000
0F98 B60716         2592                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0F9B E53A           2593     rikn:           mov             a,movleft
0F9D F6             2594                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2595     ;                               29.12.06
                    2596     ;;;;;;;;;;;;;;;;;;
                    2597     ;необходимо не портить цифру в следуюем справа знакоместе
                    2598     ;т е сохранить ее в ячейке для мигания в противном случае
                    2599     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2600     ;       знакоместа
0F9E 78B2           2601                                     mov             r0,#marker
0FA0 7440           2602                                     mov             a,#bufind
0FA2 26             2603                                             add             a,@r0                   ;a=bufind+m
                             arker
0FA3 F9             2604                                             mov             r1,a
0FA4 09             2605                                             inc             r1
0FA5 873C           2606                                             mov             savba,@r1
0FA7 020000   F     2607                                             jmp             viout;outF
                    2608     
0FAA 78B2           2609     kon_B:          mov             r0,#marker      ;B= +00000
0FAC B60802         2610                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0FAF 80EA           2611                                             jmp             rikn
0FB1                2612     mark0_8:
                    2613     ;                               29.12.06
                    2614     ;;;;;;;;;;;;;;;;;;
                    2615     ;необходимо не портить цифру в следуюем справа знакоместе
                    2616     ;т е сохранить ее в ячейке для мигания в противном случае
                    2617     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2618     ;       знакоместа ->B=+00000
0FB1 78B2           2619                                             mov             r0,#marker
0FB3 7440           2620                                     mov             a,#bufind
0FB5 26             2621                                             add             a,@r0                   ;a=bufind+m
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    42

                             arker
0FB6 F9             2622                                             mov             r1,a
0FB7 09             2623                                             inc             r1
0FB8 873C           2624                                             mov             savba,@r1
0FBA 78B2           2625                             mov             r0,#marker
0FBC 06             2626                             inc             @r0             ;       сдвинуть курсор вправо на 1
0FBD C219           2627                             clr             bitmig
0FBF B60901         2628                             cjne    @r0,#9,outma
0FC2 18             2629                             dec             r0;ppp
0FC3 020000   F     2630     outma:          jmp             viout;outF
                    2631     
0FC6 75B0FE         2632     chanZ:          mov             p3,#0feh
0FC9 E5B0           2633                             mov             a,p3
0FCB 20E611         2634                             jb              acc.6,chanma
                    2635                             ;изм знак в старшем разряде на противоположн
0FCE E543           2636                             mov             a,bufind+3
0FD0 B42B06         2637                             cjne            a,#2bh,noplus
0FD3 75432D         2638                             mov                     bufind+3,#2dh           ;+->-   
0FD6 020000   F     2639                             jmp                     viout;outF
0FD9                2640     noplus:
0FD9 75432B         2641                             mov                     bufind+3,#2bh           ;-/+-
0FDC 020000   F     2642                             jmp                     viout;outF
0FDF 75B0FD         2643     chanma:         mov             p3,#0fdh
0FE2 E5B0           2644                             mov             a,p3
0FE4 20E603         2645                             jb              acc.6,outFl;labelL1
                    2646                             ;clr            bitmig
0FE7 120000   F     2647     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2648     
0FEA 793D           2649     outFl:                          mov             r1,#chkl
0FEC 7701           2650                             mov             @r1,#01
0FEE 09             2651                             inc             r1
0FEF 77F4           2652                             mov             @r1,#0f4h               ;1000
0FF1 020000   F     2653                             jmp             out6
                    2654                     
                    2655     
                    2656     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2657     
                    2658     
                    2659     
0FF4 020000   F     2660     rlabelL:        jmp                     labelL
0FF7 020000   F     2661     rfindmem:               jmp             findmem
0FFA 3011FA         2662     noviR:          jnb                     bitmenu,rfindmem;17.01.07
                    2663     ;;;;;;;;;;;;;
0FFD 78B1           2664                                             mov                     r0,#vichR
0FFF 7415           2665                                             mov                     a,#15h
1001 C3             2666                                             clr                     c
1002 96             2667                                             subb            a,@r0
1003 4016           2668                                             jc                      ri21_23
                    2669     
1005 75B0FB         2670                                             mov             p3,#0fbh; реж кн меню ->
1008 20B60A         2671                                             jb              p3.6,ri6
100B 78B1           2672                                             mov             r0,#vichR
100D B61508         2673                                             cjne    @r0,#15h,norime
1010 7611           2674                                             mov             @r0,#11h
1012 120000   F     2675     norime1:        call            lomenu
1015 020000   F     2676     ri6:                    jmp                     viout;out6
1018 06             2677     norime:         inc             @r0
1019 80F7           2678                                             jmp             norime1
                    2679             
101B 7423           2680     ri21_23:        mov                     a,#23h          ;->
101D C3             2681                                             clr                     c
101E 96             2682                                             subb            a,@r0
101F 4014           2683                                             jc                      ri_31
1021 75B0FB         2684                                             mov                     p3,#0fbh
1024 20B6EE         2685                                             jb                      p3.6,ri6
1027 B62308         2686                                             cjne            @r0,#23h,no23ri
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    43

102A 7621           2687                                             mov                     @r0,#21h
102C 120000   F     2688                                             call            lomenu
102F 020000   F     2689                                             jmp                     viout;out6
1032 06             2690     no23ri:         inc                     @r0
1033 80DD           2691                                             jmp                     norime1
1035 B6312B         2692     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
                    2693     
                    2694     ;;
1038 75B0FB         2695                                             mov                     p3,#0fbh
103B 20B6D7         2696                                             jb                      p3.6,ri6
                    2697     ;;
103E 301311         2698                                             jnb                     bitv19,gosk19
1041 900000   F     2699                                             mov                     dptr,#teS57_6;57,6
1044 120000   F     2700                                             call            lotext
1047 534B03         2701                                             anl                     bufind+11,#03h
104A 434B80         2702                                             orl                     bufind+11,#80h
104D C213           2703                                             clr                     bitv19
104F 020000   F     2704                                             jmp                     viout;out6
1052 900000   F     2705     gosk19:         mov                     dptr,#teS19_2
1055 120000   F     2706                                             call            lotext
1058 534B03         2707                                             anl                     bufind+11,#03h
105B 434B80         2708                                             orl                     bufind+11,#80h
105E D213           2709                                             setb            bitv19
1060 020000   F     2710                                             jmp                     viout;out6
                    2711     
                    2712     
                    2713     
                    2714     ;labelS2:       jmp                     out6
                    2715     
1063 7452           2716     no31ri:         mov                     a,#52h;42h              ;->
1065 C3             2717                                             clr                     c
1066 96             2718                                             subb            a,@r0
1067 40AC           2719                                             jc                      ri6
1069 75B0FB         2720                                             mov                     p3,#0fbh                   
                                  ;41,42
106C 30B609         2721                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
106F 75B0FD         2722                                             mov                     p3,#0fdh
1072 20B6A0         2723                                             jb                      p3.6,ri6
1075 020000   F     2724                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
1078 020000   F     2725     rlabelN:                jmp             labelN
107B 020000   F     2726     moutF:          jmp             viout;outF
                    2727     ;;;;;;;;;;;;;;;;;;;;;;;;;
107E 020000   F     2728     rnnmemb:        jmp             nnmemb
                    2729     
1081                2730     nbimenu:
1081 300BFA         2731     findmem:        jnb             bitmem,rnnmemb
1084 79B0           2732                                             mov             r1,#level                          
                                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
1086 B71113         2733                                     cjne            @r1,#11h,nomem11
                    2734                                             
1089 75B0FB         2735                        mov          p3,#0fbh
108C E5B0           2736                        mov          a,p3
108E 20E6EA         2737                        jb           acc.6,moutF
1091 7712           2738                        mov          @r1,#12h
1093 900000   F     2739                        mov          dptr,#teWR      ;                       ЗАПИСЬ
1096 120000   F     2740                        call         lotext
1099 020000   F     2741                        jmp          viout;outF
                    2742     
109C B71213         2743     nomem11:   cjne         @r1,#12h,nomem12
109F 75B0FB         2744                             mov             p3,#0fbh
10A2 E5B0           2745                        mov          a,p3
10A4 20E6D4         2746                        jb           acc.6,moutF
10A7 7713           2747                        mov          @r1,#13h
10A9 900000   F     2748                        mov          dptr,#teLIST            ;ПРОСМОТР
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    44

10AC 120000   F     2749                        call         lotext
10AF 020000   F     2750                        jmp          viout;outF
10B2 B71313         2751     nomem12:         cjne           @r1,#13h,nomem13
10B5 75B0FB         2752                                             mov             p3,#0fbh
10B8 E5B0           2753                        mov          a,p3
10BA 20E6BE         2754                        jb           acc.6,moutF
10BD 7714           2755                        mov          @r1,#14h
10BF 900000   F     2756                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
10C2 120000   F     2757                        call         lotext
10C5 020000   F     2758                          jmp                viout;outF
                    2759                             
10C8 B71413         2760     nomem13:cjne            @r1,#14h,labelL
10CB 75B0FB         2761                             mov             p3,#0fbh
10CE E5B0           2762                        mov          a,p3
10D0 20E6A8         2763                        jb           acc.6,moutF
10D3 7711           2764                        mov          @r1,#11h
10D5 900000   F     2765                        mov          dptr,#teCLE                     ;ОЧИСТКА
10D8 120000   F     2766                        call         lotext
10DB 020000   F     2767                          jmp                viout;outF
10DE                2768     labelL: 
                    2769                             ;;;;;
10DE 75B0DF         2770                                             mov                     p3,#0dfh
10E1 30B697         2771                                     jnb                     p3.6,moutF;в реж очистка полная не 
                             отрабатывать ВЫЧ R
                    2772                     
                    2773                             ;;;;;
                    2774                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
10E4 78B0           2775                                     mov                     r0,#level
10E6 B6210E         2776                                     cjne            @r0,#21h,nobl21
10E9 7622           2777                                     mov                     @r0,#22h                ;->БЛОК 
10EB 900000   F     2778                                     mov                     dptr,#teBL
10EE 120000   F     2779     me21_22:call            lotext
                    2780                             
10F1 120000   F     2781                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
10F4 020000   F     2782                                     jmp                     viout;outF
                    2783     
10F7 B62207         2784     nobl21: cjne            @r0,#22h,nobl22
10FA 900000   F     2785                                     mov                     dptr,#teFULL
10FD 7621           2786                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2787     
10FF 80ED           2788                                     jmp                     me21_22
                    2789     
                    2790     ;labl21:           cjne @r0,#21h,nolev1
                    2791     ;                       mov             p3,#0fbh
                    2792     ;                       mov             a,p3
                    2793     ;                       jb              acc.6,loutF
                    2794     ;                       cjne    @r0,#21h,labl22
                    2795     ;                       mov             @r0,#22h
                    2796                             ;БЛОК
                    2797     ;                       call    lotext
                    2798     ;                       jmp             outF
                    2799     ;labl22:                mov             @r0,#21h
                    2800                             ;ПОЛНАЯ
                    2801     ;                       call    lotext
                    2802     ;                       jmp             outF
                    2803                      
1101 B62325         2804     nobl22:         cjne    @r0,#23h,go31l
1104 75B0FB         2805     rigblo:         mov             p3,#0fbh
1107 20B629         2806                                             jb              p3.6,llev2
110A                2807     labL2:    ;  уст курсор в правую позицию 
                    2808                                     ;       кнопка                  ->
                    2809     ;;;;;;;;;;;;;;;;;;
                    2810     ;необходимо не портить цифру в следуюем справа знакоместе
                    2811     ;т е сохранить ее в ячейке для мигания в противном случае
                    2812     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    45

                    2813     ;       знакоместа
110A 78B2           2814                                             mov             r0,#marker
110C 7440           2815                                     mov             a,#bufind
110E 26             2816                                             add             a,@r0                   ;a=bufind+m
                             arker
110F F9             2817                                             mov             r1,a
1110 09             2818                                             inc             r1
1111 873C           2819                                             mov             savba,@r1
1113 C219           2820                                             clr             bitmig
                    2821     ;;;;;;;;;;;;;;;;
1115 78B2           2822                       mov           r0,#marker      ;курсор справа  ?
1117 E53B           2823                             mov             a,movrig
1119 C3             2824                             clr             c
111A 96             2825                             subb    a,@r0
111B 6006           2826                             jz         equ1l
111D E53B           2827                             mov             a,movrig;уст в правую позицию
111F F6             2828                             mov             @r0,a
1120 020000   F     2829                             jmp             viout;outF                                       
1123 E53A           2830     equ1l:          mov             a,movleft;уст в левую позицию
1125 F6             2831                             mov             @r0,a   
1126 020000   F     2832     loutF:  jmp             viout;outF
                    2833                     
                    2834     
1129 B63102         2835     go31l:          cjne    @r0,#31h,go41l
112C 80D6           2836                             jmp             rigblo
112E B6410B         2837     go41l:          cjne    @r0,#41h,norig2
1131 80D1           2838                             jmp             rigblo
                    2839     
1133 75B0FD         2840     llev2:          mov             p3,#0fdh
1136 20B6ED         2841                             jb              p3.6,loutF
1139 020000   F     2842                             jmp             labelL1
                    2843     
                    2844     ;->
113C C3             2845     norig2:    clr          c               ;32,33,34,42
113D 7431           2846                             mov             a,#31h
113F 96             2847                             subb    a,@r0
1140 50E4           2848                             jnc             loutF
1142 75B0FB         2849     rigblok:        mov             p3,#0fbh  ;32,33,34,42
1145 20B630         2850                             jb              p3.6,lev2go
1148 B64302         2851     labelN:         cjne            @r0,#43h,labN_2
114B 80D9           2852                                             jmp                     loutF
114D B64402         2853     labN_2:         cjne            @r0,#44h,labN_1 
1150 80D4           2854                                             jmp                     loutF                      
                                  
                    2855                             ;                               29.12.06
                    2856     ;;;;;;;;;;;;;;;;;;
                    2857     ;необходимо не портить цифру в следуюем справа знакоместе
                    2858     ;т е сохранить ее в ячейке для мигания в противном случае
                    2859     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2860     ;       знакоместа
1152 78B2           2861     labN_1:         mov             r0,#marker
1154 7440           2862                                     mov             a,#bufind
1156 26             2863                                             add             a,@r0                   ;a=bufind+m
                             arker
1157 F9             2864                                             mov             r1,a
1158 09             2865                                             inc             r1
1159 873C           2866                                             mov             savba,@r1
                    2867     ;;;;;;;;;;;;;;;;;;;
115B 78B2           2868                             mov             r0,#marker      ;курсор справа  ?
115D E53B           2869                             mov             a,movrig
115F C3             2870                             clr             c
1160 96             2871                             subb    a,@r0
1161 7006           2872                             jnz        noequ1
1163 E53A           2873                             mov             a,movleft;уст в крайнюю левую позицию
1165 F6             2874                             mov             @r0,a
1166 020000   F     2875                             jmp             viout;outF
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    46

1169                2876     noequ1: ;29.12.06
                    2877     ;;;;;;;;;;;;;;;;;;
                    2878                             ;восстан знакоместо при мигании
                    2879                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1169 78B2           2880                                     mov             r0,#marker
116B 7440           2881                                     mov             a,#bufind
116D 26             2882                                     add             a,@r0                   ;a=bufind+marker
116E F9             2883                                     mov             r1,a
                    2884                                     ;mov            @r1,savba
116F 09             2885                                     inc             r1
1170 873C           2886                                     mov             savba,@r1
                    2887     ;;;;;;;;;;;;;;;;        
1172 120000   F     2888                             call    marri;уст сдвиг в правую        позицию
1175 020000   F     2889                             jmp             viout;outF
1178 75B0FD         2890     lev2go:         mov             p3,#0fdh
117B 30B603         2891                             jnb             p3.6,rlabelL1
117E 020000   F     2892                             jmp             viout;outF
                    2893     
1181 020000   F     2894     rlabelL1:       jmp             labelL1
                    2895     
1184                2896     nnmemb:
                    2897                                     
                    2898     
                    2899     
1184                2900     norim6:    ;kn menu
1184 D083           2901     out6:           pop             dph
1186 D082           2902                                     pop             dpl
1188 D007           2903                                     pop             rr7     
118A D006           2904                                     pop             rr6
118C D005           2905                                     pop             rr5
118E D004           2906                                     pop             rr4
1190 D003           2907                                     pop             rr3
1192 D002           2908                                     pop             rr2
1194 D001           2909                                     pop             rr1                             
1196 D000           2910                                     pop             rr0
1198 D0D0           2911                                     pop             psw
119A D0E0           2912                                     pop             acc
                    2913     ;clr            bitmig
                    2914                               ; mov         EIE2,#30H
                    2915                              ;  mov         a,P3IF
                    2916                             ;       anl             a,#0bfh
                    2917                             ;       mov             P3IF,a
                    2918                             ;       mov             P3,#0c0h
                    2919                             ;;;;;;
119C                2920     kkout6:
119C 75AD00         2921                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
119F 75B0C0         2922                             mov             P3,#0c0h
11A2 C219           2923                             clr             bitmig
11A4 E586           2924                                             mov             a,P6            ;p6.4=0
11A6 54EF           2925                             anl             a,#0efh
11A8 F586           2926                             mov             P6,a
11AA 00             2927                             nop
11AB 00             2928                             nop
                    2929                                     
11AC E586           2930                             mov             a,P6                    ;p6.4=1 
11AE 4410           2931                             orl             a,#10h
11B0 F586           2932                             mov             P6,a    
                    2933                             ;;;;;;;;;
11B2 E5DA           2934                             mov             a,PCA0CPM0;     
11B4 4446           2935                             orl             a,#46h;anl              a,#0fbh
11B6 F5DA           2936                             mov             PCA0CPM0,a
                    2937     
11B8 75CDD0         2938                             mov             TH2,#0d0h
11BB 75CC00         2939                             mov             TL2,#00
                    2940     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    47

11BE D2CA           2941                             setb            T2CON.2
11C0 D2AD           2942                             setb            ET2;IE.5
                    2943                             ;;;;;;;;                    
11C2 32             2944                             reti
                    2945     
                    2946     
11C3 020000   F     2947     knKMP:             jmp          out7
11C6 020000   F     2948     rout7:                  jmp             out7    
11C9 020000   F     2949     rlabelH:                jmp             labelH
11CC 020000   F     2950     rknNUL:         jmp             knNUL
11CF 020000   F     2951     rknleft:                jmp             knleft
                    2952     
11D2 75AD00         2953     no0chk:         mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
11D5 75B0C0         2954                                             mov             P3,#0c0h
11D8 32             2955                                             reti
                    2956     
11D9 020000   F     2957     rknMEM:                 jmp             knMEM
                    2958     
11DC                2959     keyb2:  ;IE7
                    2960     ;;;;;
                    2961                     ;       mov                     a,chkl          ;low
                    2962                     ;       jb                      acc.7,no0chk;
                    2963                             ;jnz                    no0chk
                    2964                             ;mov                    a,chkl                          ;high
                    2965                             ;jnz                    no0chk
                    2966     ;;;;
11DC 75E700         2967                                     mov             EIE2,#00H
11DF 75AD00         2968                                     mov             P3IF,#00
                    2969     
11E2 C0E0           2970                                     push    acc
11E4 C0D0           2971                                     push    psw
11E6 C000           2972                                     push    rr0
11E8 C001           2973                                     push    rr1
11EA C002           2974                                     push    rr2
11EC C003           2975                                     push    rr3
11EE C004           2976                                     push    rr4
11F0 C005           2977                                     push    rr5
11F2 C006           2978                                     push    rr6
11F4 C007           2979                                     push    rr7
11F6 C082           2980                                     push    dpl
11F8 C083           2981                                     push    dph
                    2982                                     ;clr            bitmig
                    2983                       ;;;;;;;;;;;;;;
11FA 120000   F     2984                               call  z_01s   ;0,1s
                    2985                               ;восстан знакоместо при мигании
                    2986                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
11FD 78B2           2987                                     mov             r0,#marker
11FF 7440           2988                                     mov             a,#bufind
1201 26             2989                                     add             a,@r0                   ;a=bufind+marker
1202 F9             2990                                     mov             r1,a
1203 A73C           2991                                     mov             @r1,savba
                    2992                                     ;;;;;;;;;;;
                    2993     
1205 E5B0           2994                             mov             a,p3
1207 20E7BC         2995                                     jb              acc.7,rout7
120A E5B0           2996                                     mov             a,p3
120C 74FF           2997                                     mov             a,#0ffh         ; p3.(5-0)<-3f
120E F5B0           2998                                     mov             p3,a
1210 E5B0           2999                                     mov             a,p3
1212 30E7B1         3000                                     jnb             acc.7,rout7             ;error
1215 3004B1         3001                                     jnb             bitizm,rlabelH
1218 75B0FE         3002                                     mov             p3,#0feh                ;реж IZM
121B E5B0           3003                                     mov             a,p3
121D 30E7AC         3004                                     jnb             acc.7,rknNUL
1220 75B0FD         3005                                     mov             p3,#0fdh
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    48

1223 E5B0           3006                                     mov             a,p3
1225 30E79B         3007                                     jnb             acc.7,knKMP
1228 75B0FB         3008                                     mov             p3,#0fbh
122B E5B0           3009                                     mov             a,p3
122D 30E79F         3010                                     jnb             acc.7,rknleft
1230 75B0F7         3011                                     mov             p3,#0f7h
1233 00             3012                                     nop
1234 00             3013                                     nop
1235 00             3014                                     nop
1236 00             3015                                     nop
1237 E5B0           3016                                     mov             a,p3
1239 30E76F         3017                                     jnb             acc.7,knAVP
123C 75B0EF         3018                                 mov         p3,#0efh
123F E5B0           3019                                     mov             a,p3
1241 30E795         3020                                     jnb             acc.7,rknMEM
1244 75B0DF         3021                                     mov             p3,#0dfh
1247 E5B0           3022                                     mov             a,p3    
1249 30E722         3023                                     jnb             acc.7,knmenu
124C                3024     an_t7:             ;;;;;;;;;;;;
                    3025                     
                    3026     ;       clr             c
                    3027     ;       mov             r1,#parN
                    3028     ;
                    3029     ;                       mov             r0,#diap
                    3030     ;                       mov             a,#6            
                    3031     ;                       subb    a,@r0
                    3032     ;                       jnc             goto7           ;         ;10-2..10-8
                    3033                               
                    3034     ;                       mov             @r1,#2          ;10-9..10-11            
                    3035                             
                    3036                             ;;;;;;;;;;;;
124C 799A           3037     goto7:                  mov             r1,#parT
124E 783D           3038                                     mov             r0,#chkl
1250 B70108         3039                                     cjne    @r1,#1,not1_7
1253 7600           3040                                     mov             @r0,#00
1255 08             3041                                     inc             r0
1256 7601           3042                                     mov             @r0,#1;2
1258 020000   F     3043                                     jmp             out7
                    3044                             
                    3045     
125B B70208         3046     not1_7:                 cjne    @r1,#2,not2_7
125E 7600           3047                                             mov             @r0,#00
1260 08             3048                                     inc             r0
1261 7602           3049                                     mov             @r0,#2;10;20
1263 020000   F     3050                                     jmp             out7
1266 7600           3051     not2_7:                 mov             @r0,#00
1268 08             3052                                     inc             r0
1269 760A           3053                                     mov             @r0,#10;20;0
126B 020000   F     3054     merr:           jmp             out7
                    3055     
                    3056     
126E 2006FA         3057     knmenu: jb              bitvi11,merr
1271 20151C         3058                                     jb              biteizm,menuoff
                    3059                                     ;;;;;
1274 201225         3060                                     jb              bitklb,klboff
1277 C204           3061                              clr            bitizm          ;off IZM
1279 D211           3062                                     setb            bitmenu
127B C217           3063                                     clr             bitoll
127D 900000   F     3064                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1280 120000   F     3065                                     call    lotext
1283 534B03         3066                                     anl                     bufind+11,#03h ;погасить запятые
1286 120000   F     3067                                     call            ind
1289 78B1           3068                                     mov             r0,#vichR
128B 7611           3069                                     mov             @r0,#11h
128D 020000   F     3070                                     jmp             onmem11
1290                3071     menuoff:
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    49

1290 78B1           3072                                     mov             r0,#vichR
1292 7600           3073                                     mov             @r0,#00
1294 C215           3074                                     clr             biteizm
1296 120000   F     3075                                     call    loadus
1299 020000   F     3076                                     jmp             out7
                    3077     
129C C212           3078     klboff:                 clr             bitklb
129E 120000   F     3079                                                     call            loadUS
12A1 78B1           3080                                                     mov             r0,#vichR
12A3 7600           3081                                                     mov             @r0,#00
12A5 020000   F     3082                                                     jmp             out7
                    3083     
12A8 020000   F     3084     rendkalib:              jmp             endkalib
                    3085     
12AB 2012FA         3086     knAVP:  jb              bitklb,rendkalib        
12AE 200504         3087                                     jb              bitavp,meavp
12B1 D205           3088                                     setb    bitavp
12B3 8097           3089                                     jmp             an_t7;onmem11
12B5 C205           3090     meavp:                  clr             bitavp
12B7 8093           3091                                     jmp             an_t7;onmem11
                    3092     
12B9 201207         3093     knleft: jb              bitklb,lefkl
                    3094                                     ;;;;;;;;
12BC 79AE           3095                                mov          r1,#diap
12BE 07             3096                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
12BF B70A03         3097                                     cjne    @r1,#0ah,nodi6
12C2 17             3098                                     dec             @r1
12C3 8087           3099     lefkl:  jmp             an_t7
                    3100     
12C5                3101     nodi6:             ;    cjne    @r1,#0,an_t7
12C5 120000   F     3102                                      call    clmassix
12C8 78B3           3103                                     mov             r0,#summa
12CA 120000   F     3104                                     call    clear4  
12CD 786A           3105                                     mov             r0,#rez_A0
12CF 120000   F     3106                                     call    clear4
12D2 C20F           3107                                     clr             bitnul          ;гасить светодиод НУЛЬ  
12D4 120000   F     3108                                     call    loadUS
12D7 020000   F     3109                                jmp          an_t7
                    3110     
12DA 200F0F         3111     knNUL:                  jb              bitnul,ybnul
12DD D20F           3112                                     setb    bitnul
12DF 789C           3113                                     mov             r0,#rez_A3      ;A3
12E1 120000   F     3114                                     call    resar2
12E4 786A           3115                                     mov             r0,#rez_A0      
12E6 120000   F     3116                                     call    saver2;A0<-A3
12E9 020000   F     3117                                     jmp             goto7;an_t7
                    3118     
12EC C20F           3119     ybnul:                  clr             bitnul
12EE 900000   F     3120                                      mov    DPTR,#ch0 
12F1 120000   F     3121                                     CALL   ldc_long          ; r2..r5 <-- 0
12F4 786A           3122                                     mov             r0,#rez_A0      ;A0=0
12F6 120000   F     3123                                     call    saver2
12F9 020000   F     3124                                     jmp             goto7;an_t7
                    3125     
12FC 301021         3126     labelH:                 jnb             bitt2,nolah
12FF 75B0FB         3127                                     mov             p3,#0fbh   ;вход в режим изм Т
1302 534A8F         3128                                     anl             bufind+10,#8fh
1305 79B7           3129                                     mov             r1,#load;parT
1307 20B70D         3130                                     jb              p3.7,rhnot1
130A B70003         3131                                     cjne    @r1,#0,inct;
130D 020000   F     3132                                     jmp             out7;hyest6
1310 17             3133     inct:                   dec             @r1                     ;Tизм+1
                    3134                             
1311 120000   F     3135                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
1314                3136     hnot2:          ;       call    ind
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    50

1314 020000   F     3137                                     jmp             onmem11;out7
                    3138     
1317 020000   F     3139      rhnot1:                jmp             hnot1
                    3140      ;rnoviR:       jmp             noviR
131A 020000   F     3141      rlabelK:       jmp             labelK
131D 020000   F     3142      rlabelI:       jmp             labelI          
                    3143      ;;;;;;;;;;;;;;;;;;;
1320 3014F7         3144     nolah:          jnb             bitvich,rlabelK 
                    3145                                     
                    3146                             ;;;;;;
                    3147                             ;увеличить счетчик задержки клавиатуры
                    3148                     ;;              mov             r0,#chkl
                    3149                     ;;              mov             @r0,#27h
                    3150                     ;;              inc             r0
                    3151                     ;;              mov             @r0,#10h
                    3152                             ;;;;;;
                    3153     
1323 78B1           3154                             mov             r0,#vichR
1325 B61128         3155                             cjne    @r0,#11h,rhnor11;rlabelI;;
1328 75B0FB         3156                             mov             p3,#0fbh   ;<-
132B 20B730         3157                             jb              p3.7,noh37;routF
132E B6110B         3158                     cjne    @r0,#11h,hr12
1331 7612           3159                             mov             @r0,#12h;11h;= вычислить
1333 900000   F     3160                             mov             dptr,#teIZMK    ;       изм конст;teVICH
1336 120000   F     3161     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
1339 020000   F     3162                             jmp             onmem11;goto7
133C B61207         3163     hr12:           cjne    @r0,#12h,hnor12
133F 7611           3164     lovich:         mov             @r0,#11h
1341 900000   F     3165                             mov             dptr,#teVICH
1344 80F0           3166                             jmp             hvi1113         
1346 B61307         3167     hnor12:         cjne    @r0,#13h,rhnor11
1349 7612           3168     loizmk:         mov             @r0,#12h
134B 900000   F     3169                             mov             dptr,#teIZMK    ;       изм конст
                    3170                                        
134E 80E6           3171                             jmp             hvi1113
                    3172     
1350 804C           3173     rhnor11:                jmp             hnor11
                    3174     
1352 8057           3175     rvvizko:                jmp             vvizko
1354 C214           3176     vioutF:                 clr             bitvich
1356 C206           3177                                                     clr             bitvi11
1358 020000   F     3178                                                     jmp             viout;outF
135B 020000   F     3179     toutF:                  jmp             viout;outF
                    3180     
135E 75B0F7         3181     noh37:          mov             p3,#0f7h
1361 20B7F7         3182                             jb              p3.7,toutF;vioutF
1364 B611EB         3183                             cjne    @r0,#11h,rvvizko
1367 D206           3184                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
1369 D204           3185              setb   bitizm
136B 534B07         3186                              anl            bufind+11,#07h
136E 434B10         3187                              orl            bufind+11,#10h;точка после 1 знакоместа
1371 020000   F     3188                                     jmp             goto7;
                    3189     
                    3190     
1374 80E8           3191     rnoh37:         jmp             noh37
                    3192     
1376 B6120D         3193     norr11:         cjne    @r0,#12h,norr12
1379 75B0FB         3194                             mov             p3,#0fbh   ;<-
137C 20B7F5         3195                             jb              p3.7,rnoh37;routF
137F 760B           3196                             mov             @r0,#11;12->11
1381 80BC           3197                             jmp             lovich
                    3198     
1383 020000   F     3199     labelI2:                jmp             labelI
1386 B613FA         3200     norr12:         cjne    @r0,#13h,labelI2
1389 75B0FB         3201                             mov             p3,#0fbh   ;<-
138C 20B7E5         3202                             jb              p3.7,rnoh37
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    51

138F 7612           3203                             mov             @r0,#12h
1391 80B6           3204                             jmp             loizmk
                    3205                             ;;;;
1393 C214           3206     clrvich:                clr             bitvich
1395 D204           3207                             setb    bitizm
1397 A8B2           3208                             mov             r0,marker
1399 76FF           3209                             mov             @r0,#0ffh
139B 020000   F     3210                              jmp    goto7;  routF
                    3211     
                    3212     ;rnoh37:                jmp             noh37
                    3213      ;ввод изм конст
139E B612E5         3214     hnor11:         cjne    @r0,#12h,norr12;clrvich
13A1 75B0FB         3215                              mov            p3,#0fbh   
13A4 20B7CD         3216                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
13A7 7611           3217                             mov             @r0,#11h
13A9 8094           3218                             jmp             lovich
                    3219     
13AB 78B1           3220     vvizko:         mov             r0,#vichR
13AD E6             3221                             mov             a,@r0
                    3222                     ;       cjne    @r0,#12h,clrvich
13AE B412E2         3223                             cjne    a,#12h,clrvich
13B1 7621           3224                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
13B3 78B2           3225                             mov             r0,#marker
13B5 7604           3226                             mov             @r0,#4;9
13B7 753A04         3227                             mov             movleft,#4
13BA 753B07         3228                             mov             movrig,#7
13BD 900000   F     3229                             mov             dptr,#teAequ0
13C0 120000   F     3230                             call    lotext
                    3231                             
13C3 120000   F     3232                             call    outA
13C6 534B0F         3233                             anl                     bufind+11,#0fh
                    3234             ;       mov             a,bufind+11
                    3235             ;       anl             a,#0f0h
                    3236             ;       mov             bufind+11,a
13C9 434B40         3237                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3238                             
13CC 020000   F     3239                             jmp             goto7;routF
                    3240     ;hnor13:                jmp             hnor12          
13CF B6210C         3241     izchi:          cjne    @r0,#21h,tlabelI
                    3242     ;<- при вводе цифр А                            
                    3243                     ;        mov            p3,#0fbh   
                    3244                     ;       jnb             p3.7,li21
                    3245             ;clr            bitmig
13D2 78B2           3246                             mov             r0,#marker
13D4 16             3247                             dec             @r0
13D5 B60201         3248                             cjne    @r0,#2,li21
13D8 06             3249                             inc             @r0;marker=3 +/-
13D9 C219           3250     li21:           clr             bitmig
13DB 020000   F     3251                             jmp             goto7;outF
                    3252     
13DE 020000   F     3253     tlabelI:        jmp             labelI
                    3254     
                    3255     ;                       load    0 1 2 3 4 5             
13E1 06050403       3256     sootv:          db              6,5,4,3,2,1;parT
13E5 0201                    
                    3257     ;
13E7 020000   F     3258     nnnott:                 jmp             viout
                    3259     ;нажата кн ввод при наборе Т
13EA 75B0F7         3260     hnot1:                  mov             p3,#0f7h
13ED 20B7F7         3261                                     jb              p3.7,nnnott;routF;out7
13F0 B70549         3262                                     cjne    @r1,#5,nohnot1  ;r1=load
13F3 794A           3263                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
13F5 E7             3264                                     mov             a,@r1
13F6 548F           3265                                     anl             a,#8fh
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    52

13F8 4440           3266                                     orl             a,#40h;.6
13FA F7             3267                                     mov             @r1,a
13FB 8000           3268                                     jmp             loadb
                    3269                                     
                    3270                                     
13FD 789A           3271     loadB:                  mov             r0,#parT
13FF 900000   F     3272                                     mov             dptr,#sootv
1402 79B7           3273                                     mov             r1,#load                
1404 E7             3274                                     mov             a,@r1;load
1405 93             3275                                     movc    a,@a+dptr
1406 F6             3276                                     mov             @r0,a
1407 120000   F     3277                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3278                                      ;r4=b1 r5=b2
140A 120000   F     3279                                     call    iniacp;инициализация АЦП
140D 120000   F     3280                                     call    loadUS
1410 120000   F     3281                                     call    clmassix        
1413 D204           3282                                     setb    bitizm
1415 C210           3283                                     clr             bitt2
                    3284     
1417 534A8F         3285                                     anl             bufind+10,#8fh
141A C3             3286                                      clr            c
141B 789A           3287                                  mov                r0,#parT
141D 79AF           3288                                      mov            r1,#parN
141F 7402           3289                                  mov                a,#2
1421 96             3290                                 subb                a,@r0
1422 5005           3291                                 jnc                 loadB2
1424 7701           3292                                     mov             @r1,#1;N=1         ;T>=2
1426 020000   F     3293     bout7:                  jmp             goto7;out7
                    3294     
1429 B702FA         3295     loadB2:                 cjne    @r1,#2,bout7
142C 7702           3296                                     mov             @r1,#2;N=2
142E 020000   F     3297                                     jmp             goto7;out7
1431                3298     nohnot2:                ;в буфере 1 зажечь <=0,1s
1431 794A           3299                                     mov             r1,#bufind+10
1433 E7             3300                                     mov             a,@r1
1434 4410           3301                                     orl             a,#10h;.4
1436 F7             3302                                     mov             @r1,a
1437 120000   F     3303                                     call            ind
143A 80C1           3304                                     jmp             loadB
143C B704F2         3305     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
143F 794A           3306                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
1441 E7             3307                                     mov             a,@r1
1442 4420           3308                                     orl             a,#20h;.5
1444 F7             3309                                     mov             @r1,a
1445 80B6           3310                                     jmp             loadB
                    3311     
                    3312     ;кнопка ПАМЯТЬ
1447 2012DC         3313     knMEM:  jb              bitklb,bout7;в реж калибровки не нажимать память
144A C204           3314                                     clr             bitizm          ;off IZM
144C 900000   F     3315                                     mov             dptr,#teLIST;CLE
144F 120000   F     3316                                     call    lotext    ;в буф2 записать ОЧИСТКА
1452 D20B           3317                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
1454 534BEF         3318                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1457 434B01         3319                                     orl             bufind+11,#01;зажечь светодиод память
145A 120000   F     3320                                     call            ind
145D 78B0           3321                                     mov             r0,#level
145F 7613           3322                                     mov             @r0,#13h;11h
1461 783D           3323     onmem11:                mov             r0,#chkl
1463 7603           3324                                     mov             @r0,#03
1465 08             3325                                     inc             r0
1466 76E8           3326                                     mov             @r0,#0e8h               ;1000
1468 020000   F     3327                                     jmp             out7;goto7;out7
                    3328     
146B 020000   F     3329     rnomemk:                jmp             nomemk          ;
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    53

                    3330     
146E 78B0           3331     outkmem:        mov                     r0,#level
1470 7600           3332                                             mov                     @r0,#0
1472 78B1           3333                                             mov                     r0,#vichR
1474 7600           3334                                             mov                     @r0,#0
1476 C20B           3335                                             clr                     bitmem
1478 C214           3336                                             clr                     bitvich
147A C206           3337                                             clr                     bitvi11
147C C211           3338                                             clr                     bitmenu
147E D204           3339                                             setb            bitizm
1480 78B2           3340                                             mov                     r0,#marker
1482 76FF           3341                                             mov                     @r0,#0ffh
1484 020000   F     3342                                             jmp                     vvod2_10
                    3343                                             
                    3344     
1487                3345     offmenum:       
1487 020000   F     3346                                                     jmp                     goto7   
                    3347             
148A                3348     labelK:
                    3349     
                    3350     ;;;;;;;;;;;;
148A 300BDE         3351                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
                    3352                                     ;;;;;;;
148D 75B0DF         3353                                     mov             p3,#0dfh;(код кнопки меню)
1490 30B7F4         3354                                     jnb             p3.7,offmenum
                    3355                                     ;;;;;;;
1493 75B0EF         3356                                     mov                     p3,#0efh
1496 30B7D5         3357                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
1499 78B0           3358                                      mov            r0,#level
149B B6114A         3359                               cjne          @r0,#11h,klev1;nome11
149E 75B0FB         3360     lefmem11:         mov           p3,#0fbh
14A1 E5B0           3361                               mov           a,p3
14A3 20E70D         3362                               jb            acc.7,rkvvod0
14A6 B6110D         3363                               cjne          @r0,#11h,locle          ;<-memory
14A9 7614           3364                               mov           @r0,#14h
14AB 900000   F     3365     lolist:           mov           dptr,#teSTAT
14AE 120000   F     3366                               call          lotext           ;СТАТИСТИКА
14B1 80AE           3367                               jmp                   onmem11;goto7;
                    3368     
14B3 020000   F     3369     rkvvod0:        jmp             kvvod0
                    3370     
                    3371     
14B6 B6120A         3372     locle:          cjne            @r0,#12h,lowr           ;<-memory
14B9 7611           3373                               mov           @r0,#11h                   ;ОЧИСТКА
14BB 900000   F     3374     loadcle:          mov           dptr,#teCLE
14BE 120000   F     3375                               call          lotext
14C1 809E           3376                               jmp           onmem11;goto7
                    3377     
14C3 B6130A         3378     lowr:                   cjne    @r0,#13h,lostat
14C6 7612           3379                                             mov             @r0,#12h
14C8 900000   F     3380      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
14CB 120000   F     3381                             call    lotext
14CE 8091           3382                             jmp             onmem11;goto7
                    3383     
14D0 7613           3384     lostat:         mov             @r0,#13h
14D2 900000   F     3385                                     mov             dptr,#teLIST              ;ПРОСМОТР
14D5 120000   F     3386                                             call    lotext
14D8 8087           3387                                     jmp             onmem11;goto7
                    3388     
14DA B6141A         3389     me_14:cjne              @r0,#14h,klev22
14DD 7613           3390                                             mov             @r0,#13h
14DF 900000   F     3391                             mov             dptr,#teLIST              ;;ПРОСМОТР
14E2 120000   F     3392                             call    lotext
14E5 020000   F     3393                             jmp             goto7
14E8 B61202         3394      klev1:          cjne   @r0,#12h,klev2
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    54

14EB 80B1           3395                             jmp             lefmem11
14ED B61302         3396     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
14F0 80AC           3397                             jmp             lefmem11
14F2 B61402         3398     klev3:           cjne   @r0,#14h,klev22;
14F5 80A7           3399                             jmp             lefmem11
                    3400     ;<- vvod на более низких уровнях
14F7 B62117         3401     klev22:         cjne    @r0,#21h,klev21
14FA 75B0FB         3402     lev220:         mov             p3,#0fbh
14FD 20B76F         3403                             jb              p3.7,kgo23
1500 B6210B         3404                             cjne    @r0,#21h,kfullr
1503 7622           3405                             mov             @r0,#22h
1505 900000   F     3406                             mov             dptr,#teBL
1508 120000   F     3407                             call    lotext
150B 020000   F     3408                             jmp             goto7;outF
150E 020000   F     3409     kfullr:         jmp             kfull                           
1511 B6220E         3410     klev21:         cjne    @r0,#22h,klev23
1514 80E4           3411                             jmp             lev220
                    3412     
1516 020000   F     3413     rlabL2:         jmp             labL2
1519 020000   F     3414     rlabM:          jmp             labM
151C 020000   F     3415     ques:                   jmp             out7
151F 020000   F     3416     ddoutfr:        jmp             ddoutf
                    3417     
1522 B623F4         3418     klev23:          cjne   @r0,#23h,rlabM
1525 75B0FB         3419                              mov    p3,#0fbh
1528 30B7F1         3420                              jnb            p3.7,ques;errr labL2
152B 75B0F7         3421                              mov    p3,#0f7h
152E 20B7EE         3422                              jb             p3.7,ddoutfr
                    3423                                             ;       считать с индикатора  
1531 C3             3424                                     clr                     c
1532 E547           3425                                mov          a,bufind+7      
1534 9430           3426                                      subb           a,#30h
1536 B40002         3427                                      cjne           a,#0,chaibl
1539 7401           3428                                      mov            a,#1                    ;номера блоков 1..4
153B                3429     chaibl:         
153B F538           3430                                             mov             nblok,a
                    3431                                
                    3432                              ;очистить блок памяти с набранным номером
                    3433                              ;150h..1000h( 150h+nblok*320h)
153D 120000   F     3434                                     call            adrblok         ;dptr-
                    3435     
1540 79B8           3436                                     mov                     r1,#work                ;обьем блок
                             а
1542 7703           3437                                     mov                     @r1,#03
1544 09             3438                                     inc                     r1
1545 7720           3439                                     mov                     @r1,#20h                        ;32
                             0h
                    3440     
1547                3441     goonoff:
1547 E4             3442                                     clr                     a
1548 F0             3443                                     movx            @dptr,a
1549 A3             3444                                     inc                     dptr
                    3445     
154A 79B9           3446                                     mov                     r1,#work+1
154C 120000   F     3447                                     call            chminus
154F 78B8           3448                                     mov             r0,#work
1551 E6             3449                             mov             a,@r0
1552 30E7F2         3450                             jnb             acc.7,goonoff
                    3451     
1555 C20B           3452                              clr    bitmem  ;сбр признак памяти 
1557 D204           3453                              setb   bitizm
                    3454                             ;после очистки блока сохраняем в saven_bl 
                    3455                             ;адрес второго с конца измерения потому
                    3456                             ;добавляем 8;;
1559 120000   F     3457                             call            adrblok;dptr-начало блока
                    3458                     ;       mov                     a,dpl
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    55

                    3459                     ;       add                     a,#8
                    3460                     ;       mov                     dpl,a
                    3461                     ;       mov                     a,dph
                    3462                     ;       addc            a,#0
                    3463                     ;       mov                     dph,a
155C 120000   F     3464                             call            save_hl;подготовка записи в начало блока
                    3465                             ;;;;;
                    3466     
155F 78B2           3467                              mov            r0,#marker
1561 76FF           3468                              mov            @r0,#0ffh
1563 020000   F     3469                                     jmp                     vvod2_10
1566 020000   F     3470                              jmp    goto7
                    3471     
1569 020000   F     3472     rddoutf:        jmp             ddoutf
156C 020000   F     3473     rgo23no:        jmp             go23no
                    3474     
                    3475     ;vvod   БЛОК->БЛОК 00           
156F 75B0F7         3476     kgo23:           mov    p3,#0f7h
1572 20B7F4         3477                             jb              p3.7,rddoutf
1575 B621F4         3478                             cjne    @r0,#21h,rgo23no
                    3479                             ;очистить память 150..dd0h
                    3480                             ;1й блок
1578 900150         3481                              mov                    dptr,#150h
157B 79B8           3482                                     mov                     r1,#work                ;обьем блок
                             а
157D 7703           3483                                     mov                     @r1,#03
157F 09             3484                                     inc                     r1
1580 7720           3485                                     mov                     @r1,#20h                        ;32
                             0h
                    3486     
1582                3487     gooff1:
1582 E4             3488                                     clr                     a
1583 F0             3489                                     movx            @dptr,a
1584 A3             3490                                     inc                     dptr
                    3491     
1585 79B9           3492                                     mov                     r1,#work+1
1587 120000   F     3493                                     call            chminus
158A 78B8           3494                                     mov             r0,#work
158C E6             3495                             mov             a,@r0
158D 30E7F2         3496                             jnb             acc.7,gooff1
1590 900150         3497                             mov                     dptr,#150h;начало 1 го блока
                    3498                             ;после очистки блока сохраняем в saven_bl 
                    3499                             ;адрес второго с конца измерения потому
                    3500                             ;добавляем 8;;
                    3501     ;                               call            save_hl;подготовка записи в начало блока
                    3502     ;2й блок
1593 900470         3503                             mov                     dptr,#470h
1596 79B8           3504                                     mov                     r1,#work                ;обьем блок
                             а
1598 7703           3505                                     mov                     @r1,#03
159A 09             3506                                     inc                     r1
159B 7720           3507                                     mov                     @r1,#20h                        ;32
                             0h
                    3508     
159D                3509     gooff2:
159D E4             3510                                     clr                     a
159E F0             3511                                     movx            @dptr,a
159F A3             3512                                     inc                     dptr
                    3513     
15A0 79B9           3514                                     mov                     r1,#work+1
15A2 120000   F     3515                                     call            chminus
15A5 78B8           3516                                     mov             r0,#work
15A7 E6             3517                             mov             a,@r0
15A8 30E7F2         3518                             jnb             acc.7,gooff2
15AB 900470         3519                             mov                     dptr,#470h;начало 2 го блока
                    3520     ;                       call            save_hl;подготовка записи в начало блока
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    56

                    3521     ;3й блок
15AE 900790         3522                             mov                     dptr,#790h
15B1 79B8           3523                                     mov                     r1,#work                ;обьем блок
                             а
15B3 7703           3524                                     mov                     @r1,#03
15B5 09             3525                                     inc                     r1
15B6 7720           3526                                     mov                     @r1,#20h                        ;32
                             0h
                    3527     
15B8                3528     gooff3:
15B8 E4             3529                                     clr                     a
15B9 F0             3530                                     movx            @dptr,a
15BA A3             3531                                     inc                     dptr    
                    3532     
15BB 79B9           3533                                     mov                     r1,#work+1
15BD 120000   F     3534                                     call            chminus
15C0 78B8           3535                                     mov             r0,#work
15C2 E6             3536                             mov             a,@r0
15C3 30E7F2         3537                             jnb             acc.7,gooff3
15C6 900790         3538                             mov                     dptr,#790h;начало 3 го блока
                    3539                                     ;после очистки блока сохраняем в saven_bl 
                    3540                             ;адрес второго с конца измерения потому
                    3541                             ;добавляем 8;;
                    3542                     ;       call            save_hl;подготовка записи в начало блока
                    3543     ;4й блок
15C9 900AB0         3544     mov                     dptr,#0ab0h
15CC 79B8           3545                                     mov                     r1,#work                ;обьем блок
                             а
15CE 7703           3546                                     mov                     @r1,#03h
15D0 09             3547                                     inc                     r1
15D1 7720           3548                                     mov                     @r1,#20h                        ;32
                             0h
                    3549     
15D3                3550     gooff4:
15D3 E4             3551                                     clr                     a
15D4 F0             3552                                     movx            @dptr,a
15D5 A3             3553                                     inc                     dptr
                    3554     
15D6 79B9           3555                                     mov                     r1,#work+1
15D8 120000   F     3556                                     call            chminus
15DB 78B8           3557                                     mov             r0,#work
15DD E6             3558                             mov             a,@r0
15DE 30E7F2         3559                             jnb             acc.7,gooff4
15E1 900AB0         3560                             mov                     dptr,#0ab0h;начало 4 го блока
                    3561                             ;после очистки блока сохраняем в saven_bl 
                    3562                             ;адрес второго с конца измерения потому
                    3563                             ;добавляем 8;;
                    3564     ;                       call            save_hl;подготовка записи в начало блока
                    3565                             ;;;;26.02.07
15E4 E538           3566                                                     mov             a,nblok
15E6 B40117         3567                                                     cjne    a,#1,cl_hl1
15E9 900150         3568                                                     mov             dptr,#150h
15EC 79D3           3569                                                     mov             r1,#saven_bl
15EE E583           3570     cl_hl:                  mov             a,dph
15F0 F7             3571                                               mov           @r1,a
15F1 09             3572                                                     inc             r1
15F2 E582           3573                                                     mov             a,dpl
15F4 F7             3574                                                     mov             @r1,a
                    3575                             ;;;;;;;;
15F5 C20B           3576                                             clr             bitmem
15F7 D204           3577                                             setb    bitizm
15F9 78B2           3578                                             mov             r0,#marker
15FB 76FF           3579                                             mov             @r0,#0ffh
15FD 020000   F     3580                                             jmp                     vvod2_10;jmp            got
                             o7
                    3581     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    57

1600 B40207         3582     cl_hl1:         cjne            a,#2,cl_hl2
1603 900470         3583                                             mov                     dptr,#470h
1606 79C0           3584                                             mov             r1,#saven_bl2
1608 80E4           3585                                             jmp                     cl_hl
                    3586     
160A B40307         3587     cl_hl2:         cjne            a,#3,cl_hl3
160D 900790         3588                                             mov                     dptr,#790h
1610 79C2           3589                                             mov             r1,#saven_bl3
1612 80DA           3590                                             jmp                     cl_hl
                    3591     
1614 900AB0         3592     cl_hl3:         mov                     dptr,#0ab0h
1617 79D9           3593                                             mov             r1,#saven_bl4
1619 80D3           3594                                             jmp                     cl_hl
                    3595     
161B 7623           3596     go23no:    mov          @r0,#23h
161D 753B08         3597                                             mov                     movrig,#8
1620 753A07         3598                                             mov             movleft,#7
1623 8056           3599                             jmp             loblok;БЛОК 00
                    3600     
1625 7621           3601     kfull:          mov             @r0,#21h
1627 8025           3602                             jmp             gofull
                    3603                             
                    3604                                             
1629                3605     nomemk:                         
1629 020000   F     3606                                     jmp             labelS                  ;нажат ввод меню
                    3607                             
162C 75B0FB         3608     nome11:           mov           p3,#0fbh
162F E5B0           3609                               mov           a,p3
1631 20E70D         3610                               jb            acc.7,kvvod0
1634 B61205         3611                               cjne          @r0,#12h,mem12no        
1637 7611           3612                               mov           @r0,#11h                ;ОЧИСТКА
1639 020000   F     3613                               jmp            loadcle
                    3614     
163C                3615     mem12no:        ;cjne           @r0,#13h,lowr           
163C 7612           3616                               mov           @r0,#12h                   ;
163E 020000   F     3617                               jmp           lowr1                     ;ЗАПИСЬ
                    3618     
1641 75B0F7         3619     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
1644 20B710         3620                               jb            p3.7,ddoutf
1647 78B0           3621                               mov           r0,#level
1649 B6112A         3622                               cjne          @r0,#11h,mvv11
164C 7621           3623                               mov           @r0,#21h                ;ПОЛНАЯ
164E 900000   F     3624     gofull:           mov           dptr,#teFULL
1651 120000   F     3625                               call          lotext
1654 020000   F     3626                                     jmp             onmem11;mlabL2  ;<-????????/
                    3627     
1657                3628     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3629     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3630     ;т е сохранить ее в ячейке для мигания в противном случае
                    3631     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3632     ;       знакоместа
1657 78B2           3633                                                     mov             r0,#marker
1659 7440           3634                                     mov             a,#bufind
165B 26             3635                                             add             a,@r0                   ;a=bufind+m
                             arker
165C F9             3636                                             mov             r1,a
165D 19             3637                                             dec             r1      ;       inc             r1
165E 873C           3638                                             mov             savba,@r1
1660 C219           3639                                             clr             bitmig
                    3640     ;;;;;;;;;;;;;;;;
1662 78B2           3641                       mov           r0,#marker      ;курсор слева   ?
1664 E53A           3642                             mov             a,movleft
1666 C3             3643                             clr             c
1667 96             3644                             subb    a,@r0
1668 7006           3645                             jnz        left21
166A E53B           3646                             mov             a,movrig;уст в правую позицию
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    58

166C F6             3647                             mov             @r0,a
                    3648     
166D 020000   F     3649                             jmp             goto7                                            
1670 E53A           3650     left21:         mov             a,movleft;уст в левую позицию
1672 F6             3651                             mov             @r0,a   
1673 020000   F     3652                             jmp             goto7
                    3653     
                    3654     
1676 B61215         3655     mvv11:            cjne          @r0,#12h,mvv12
1679 7631           3656                                     mov             @r0,#31h
167B 900000   F     3657     loblok:                 mov             dptr,#teBL0;БЛОК 0
167E 120000   F     3658                                     call    lotext
1681 E538           3659                                     mov                     a,nblok
1683 2430           3660                                     add                     a,#30h
1685 F547           3661                                     mov                     bufind+7,a
1687 78B2           3662                                     mov             r0,#marker
1689 7607           3663                                     mov             @r0,#7
                    3664                                     ;mov            movrig,#9
                    3665                                     ;mov            movleft,#6
168B 020000   F     3666                                     jmp             onmem11
168E B61411         3667     mvv12:  cjne            @r0,#14h,bl_li
1691 7661           3668                                     mov                     @r0,#61h
1693 900000   F     3669                                     mov             dptr,#teMIN;
1696 120000   F     3670                                     call    lotext
1699 120000   F     3671                                     call    vichmin
169C 120000   F     3672                                     call    z_1s
169F 020000   F     3673                                     jmp             onmem11
                    3674     
16A2 7641           3675     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
16A4 80D5           3676                                     jmp             loblok
                    3677     
                    3678     
                    3679     
16A6                3680     mlabL2:         ;jmp            labL2
                    3681                                             ;  уст курсор в правую позицию 
                    3682                                     ;                               29.12.06
                    3683     ;;;;;;;;;;;;;;;;;;
                    3684     ;необходимо не портить цифру в следуюем справа знакоместе
                    3685     ;т е сохранить ее в ячейке для мигания в противном случае
                    3686     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3687     ;       знакоместа
16A6 78B2           3688                                             mov             r0,#marker
16A8 7440           3689                                     mov             a,#bufind
16AA 26             3690                                             add             a,@r0                   ;a=bufind+m
                             arker
16AB F9             3691                                             mov             r1,a
16AC 09             3692                                             inc             r1
16AD 873C           3693                                             mov             savba,@r1
                    3694     ;;;;;;;;;;;;;;;;
16AF 78B2           3695                       mov           r0,#marker      ;курсор справа  ?
16B1 E53B           3696                             mov             a,movrig
16B3 C3             3697                             clr             c
16B4 96             3698                             subb    a,@r0
16B5 6006           3699                             jz         equ2l
16B7 E53B           3700                             mov             a,movrig;уст в правую позицию
16B9 F6             3701                             mov             @r0,a
                    3702     ;                       lool
16BA 020000   F     3703                             jmp             goto7                                            
16BD E53A           3704     equ2l:          mov             a,movleft;уст в левую позицию
16BF F6             3705                             mov             @r0,a   
16C0 020000   F     3706                             jmp             goto7
                    3707                     
16C3 020000   F     3708     rnom31:         jmp                     nom31
16C6 B631FA         3709     labM:                   cjne    @r0,#31h,rnom31
16C9 75B0FB         3710                                     mov             p3,#0fbh
16CC 30B7D7         3711                                     jnb             p3.7,mlabL2
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    59

16CF 75B0F7         3712                                mov          p3,#0f7h
16D2 20B782         3713                                jb           p3.7,ddoutf
                    3714                                
16D5 7632           3715                                mov          @r0,#32h                        ;ИНТ 0000
                    3716                                     ;       считать с индикатора  
16D7 C3             3717     blokvv:         clr                     c
16D8 E547           3718                                mov          a,bufind+7      
16DA 9430           3719                                      subb           a,#30h
16DC B40002         3720                                      cjne           a,#0,blokvvc
16DF 7401           3721                                      mov            a,#1                    ;номера блоков 1..4
                    3722     
16E1 F538           3723     blokvvc: mov            nblok,a
16E3 900000   F     3724                                mov          dptr,#teINT;ИНТ 0000c
16E6 120000   F     3725                                call         lotext
16E9 78CE           3726                                      mov            r0,#interva+1
16EB 7952           3727                                      mov            r1,#abin+3
16ED E6             3728                                      mov            a,@r0
16EE F7             3729                                      mov            @r1,a
16EF 18             3730                                             dec                     r0
16F0 19             3731                                             dec                     r1
16F1 E6             3732                                             mov             a,@r0
16F2 F7             3733                                             mov             @r1,a
16F3 19             3734                                             dec             r1
16F4 E4             3735                                             clr             a
16F5 F7             3736                                             mov             @r1,a
16F6 19             3737                                             dec             r1
16F7 F7             3738                                             mov             @r1,a
                    3739                                                                             
16F8 7853           3740                                             mov             r0,#adec
16FA 7952           3741                                             mov             r1,#abin+3      ;hex->10
16FC 120000   F     3742                                             call    bindec
                    3743                                     
16FF 785C           3744                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1701 7948           3745                                             mov             r1,#bufind+8
1703 7F04           3746                                             mov             r7,#4
1705 E6             3747     bloin:                          mov             a,@r0
1706 2430           3748                                             add             a,#30h
1708 F7             3749                                             mov             @r1,a
1709 19             3750                                             dec             r1
170A 18             3751                                             dec             r0
170B DFF8           3752                                             djnz    r7,bloin
170D 78B2           3753                                mov          r0,#marker
170F 7605           3754                                mov          @r0,#5
1711 753B08         3755                                mov          movrig,#8
1714 753A05         3756                                mov          movleft,#5
1717 789A           3757                                      mov            r0,#parT
1719 B60609         3758                                     cjne            @r0,#6,innot6
171C 534BF0         3759                                     anl                     bufind+11,#0f0h;after 5- 0.000c
171F 434B04         3760                                     orl                     bufind+11,#04h
                    3761                             
1722 020000   F     3762                                     jmp                     goto7
1725 B60309         3763     innot6: cjne            @r0,#3,innot3
1728 534BF0         3764                                     anl                     bufind+11,#0f0h;after 7- 000.0c
172B 434B20         3765                                     orl                     bufind+11,#20h
                    3766                                     ;call           ind
172E 020000   F     3767                                     jmp                     out7;goto7
1731 C3             3768     innot3: clr                     c
1732 7403           3769                                     mov                     a,#3
1734 96             3770                                     subb            a,@r0
1735 5009           3771                                     jnc                     innot1_2
1737 534BF0         3772                                     anl                     bufind+11,#0f0h;after 6- 00.00c
173A 434B40         3773                                     orl                     bufind+11,#40h
                    3774                                     
173D 020000   F     3775                                     jmp                     goto7
                    3776     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    60

1740                3777     innot1_2:
1740 534B0F         3778                                     anl                     bufind+11,#0fh;0h;0000c
1743 C219           3779                                     clr                     bitmig
                    3780                                     ;call           ind             нет необходимости пришет пр
                             обел         
1745 020000   F     3781     rgoto7: jmp        goto7;outF
                    3782     
1748 B63276         3783     nom31:             cjne         @r0,#32h,nom32
174B 75B0FB         3784                                     mov             p3,#0fbh
174E 20B71F         3785                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3786                                     
1751                3787     lefcur:         ;;кн <- 32 нач блок 000
                    3788     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3789     ;т е сохранить ее в ячейке для мигания в противном случае
                    3790     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3791     ;       знакоместа
1751 C219           3792                                                     clr             bitmig
1753 78B2           3793                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
1755 7440           3794                                     mov             a,#bufind
1757 26             3795                                             add             a,@r0                   ;a=bufind+m
                             arker
1758 F9             3796                                             mov             r1,a
1759 19             3797                                             dec             r1;;;;;;;;;;;
175A 873C           3798                                             mov             savba,@r1
                    3799                                             
175C 78B2           3800                                                     mov             r0,#marker      ;курсор сле
                             ва?
175E E53A           3801                             mov             a,movleft
1760 C3             3802                             clr             c
1761 96             3803                             subb    a,@r0
1762 7006           3804                             jnz        noequ2
1764 E53B           3805                             mov             a,movrig
1766 F6             3806                             mov             @r0,a;уст в крайнюю правую позицию
1767 020000   F     3807                             jmp             goto7
176A 120000   F     3808     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
176D 020000   F     3809                             jmp        goto7        
                    3810                                                                       
                    3811     
                    3812     ;;;;;;;;;;;;;;;;;;
1770                3813     vvinte:         ;ввод интервал                          
1770 75B0F7         3814     no31n:             mov          p3,#0f7h
1773 20B7CF         3815                                     jb              p3.7,rgoto7
1776 7633           3816                                     mov             @r0,#33h
                    3817                                     ;считать с индикатора введенный интервал
1778 7F0A           3818                                             mov             r7,#10
177A 7853           3819                                     mov             r0,#adec
177C 120000   F     3820                                     call    clearN
177F 120000   F     3821                                     call    upak4                   
1782 784F           3822                                     mov             r0,#abin
1784 7953           3823                                     mov             r1,#adec                        ;мл        
                              ст
1786 120000   F     3824                                     call    decbin                  ;abin..abin+3 (hex)
1789 794F           3825                                     mov             r1,#abin
178B 78CE           3826                                     mov             r0,#interva+1
178D E7             3827                                     mov             a,@r1
178E F6             3828                                     mov             @r0,a
178F 18             3829                                     dec             r0
1790 09             3830                                     inc             r1
1791 E7             3831                                     mov             a,@r1
1792 F6             3832                                     mov             @r0,a
                    3833                                     
1793 78D5           3834                                     mov             r0,#volume                      ;объем блок
                             а
1795 7600           3835                                     mov             @r0,#0
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    61

1797 08             3836                                     inc             r0
1798 76C7           3837                                     mov             @r0,#0c7h
179A 120000   F     3838                                     call            adrblok;dptr
179D 120000   F     3839                                     call            save_hl;1я ячейка блока
17A0 78B2           3840                                mov          r0,#marker
17A2 76FF           3841                                mov          @r0,#0ffh
17A4 D204           3842                                      setb           bitizm
17A6 C20B           3843                                      clr            bitmem
17A8 789A           3844     vvod2_10: mov           r0,#parT
17AA B6050C         3845                                      cjne           @r0,#5,no10msv
17AD 900000   F     3846                                             mov                     dptr,#te10ms
17B0 120000   F     3847     t2msme:         call            lotext
                    3848                                             
17B3 120000   F     3849                                             call            ind
17B6 020000   F     3850     no2msv:   jmp      goto7;
17B9 B606FA         3851     no10msv:        cjne            @r0,#6,no2msv   
17BC 900000   F     3852                                             mov                     dptr,#te2ms
17BF 80EF           3853                                     jmp                     t2msme
                    3854     
                    3855     
                    3856     
17C1 B6332B         3857     nom32:           cjne           @r0,#33h,nom33
17C4 75B0FB         3858                              mov            p3,#0fbh
17C7 30B787         3859                              jnb            p3.7,lefcur
17CA 75B0F7         3860                              mov            p3,#0f7h
17CD 20B7E6         3861                              jb             p3.7,no2msv;rgoto7
                    3862                              ;запомнить номер ячейки конца блока
17D0 7634           3863                              mov    @r0,#34h
17D2 7F0A           3864     INTn:                   mov             r7,#10
17D4 7853           3865                                     mov             r0,#adec
17D6 120000   F     3866                                     call    clearN
17D9 120000   F     3867                                     call    upak3                   
17DC 784F           3868                                     mov             r0,#abin
17DE 7953           3869                                     mov             r1,#adec                        ;мл        
                              ст
17E0 120000   F     3870                                     call    decbin                  ;abin..abin+3 (hex)
17E3 120000   F     3871                                     call    loadr2                  ;r2..r5
17E6 120402         3872                                     call    altof                   ;r2..r5->int
17E9 020000   F     3873     dgoto7:                  jmp            goto7
                    3874     
17EC 020000   F     3875     rlefcur:                jmp             lefcur
                    3876     
17EF B63464         3877     nom33:          cjne            @r0,#34h,labelP
17F2 75B0FB         3878                               mov           p3,#0fbh
17F5 30B7F4         3879                              jnb            p3.7,rlefcur
17F8 75B0F7         3880                              mov            p3,#0f7h
17FB 20B7EB         3881                              jb             p3.7,dgoto7
17FE 7635           3882                              mov            @r0,#35h
1800 78B2           3883                              mov            r0,#marker
1802 76FF           3884                              mov            @r0,#0ffh
                    3885                              ;T1<-число на индикаторе
                    3886                                               ;vvod КОН БЛ 000
1804 78CF           3887                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
1806 7630           3888                              mov            @r0,#30h  
1808 C20B           3889                              clr            bitmem
180A D204           3890                              setb           bitizm;;;;      
180C 020000   F     3891                             jmp        goto7
180F 020000   F     3892     vodm11_15:                      jmp             vvodm11_15
1812 020000   F     3893     me11_15de:                      jmp             me11_15dec
1815 020000   F     3894     moutkmem:                               jmp             outkmem
                    3895     
1818 020000   F     3896     nmem_menu:              jmp             out7                    ;нажата память в режиме мен
                             ю
                    3897     ;обработка кнопки меню ввод
181B 301138         3898     labelS:         jnb                     bitmenu,labelP
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    62

181E 75B0EF         3899                                             mov                     p3,#0efh
1821 30B7F4         3900                                             jnb                     p3.7,nmem_menu
1824 75B0DF         3901                                             mov                     p3,#0dfh
1827 30B7EB         3902                                             jnb                     p3.7,moutkmem
182A 78B1           3903                                             mov                     r0,#vichR
182C 7415           3904                                             mov                     a,#15h
182E C3             3905                                             clr                     c
182F 96             3906                                             subb            a,@r0
1830 4021           3907                                             jc                      rme21_23
                    3908                             
1832 75B0FB         3909                                             mov                     p3,#0fbh
1835 20B7D7         3910                                             jb                      p3.7,vodm11_15
1838 78B1           3911                                             mov                     r0,#vichR
183A B611D5         3912                                             cjne                    @r0,#11h,me11_15de;<-
183D 7615           3913                                             mov                     @r0,#15h
183F 900000   F     3914                                             mov                     dptr,#teKALIB
1842 120000   F     3915                                             call            lotext
1845 020000   F     3916                                             jmp                     onmem11
1848 C211           3917     menuon:         clr             bitmenu                 ;off menu
184A D204           3918                                             setb    bitizm
                    3919     
184C 78B1           3920                                     mov             r0,#vichR
184E 7600           3921                                     mov             @r0,#0
1850 020000   F     3922                                     jmp             onmem11
                    3923     
                    3924                                             ;;;;;
                    3925             
1853 020000   F     3926     rme21_23:               jmp             me21_23 
                    3927                             
                    3928     ;режим просмотра
1856 B64130         3929     labelP:                 cjne            @r0,#41h,govvlist
1859 7642           3930                                                     mov                     @r0,#42h
                    3931                                                     ;       считать с индикатора  
185B C3             3932                                             clr                     c
185C E547           3933                                mov          a,bufind+7      
185E 9430           3934                                      subb           a,#30h
1860 B40002         3935                                      cjne           a,#0,chaipr
1863 7401           3936                                      mov            a,#1
1865 F538           3937     chaipr:                          mov            nblok,a
1867 900000   F     3938                                mov          dptr,#teCH;ОТСЧЕТ 000
186A 120000   F     3939                                call         lotext
186D 534BEF         3940                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1870 78B2           3941                                mov          r0,#marker
1872 7607           3942                                mov          @r0,#7
1874 753B09         3943                                mov          movrig,#9
1877 753A07         3944                                mov          movleft,#7
187A 120000   F     3945                                             call            z_1s
187D 020000   F     3946                        jmp     goto7;outF
1880 020000   F     3947     label43:                jmp             label7
                    3948     
1883 020000   F     3949     rlist_43:                       jmp                     list_43                            
                                  
1886 020000   F     3950     mlabL2r:                        jmp                     mlabL2
1889 B642F7         3951     govvlist:                       cjne            @r0,#42h,rlist_43
188C 75B0FB         3952                                                                     mov                     p3,
                             #0fbh
188F 30B7F4         3953                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
1892 75B0F7         3954                                                             mov                     p3,#0f7h
1895 20B7E8         3955                                                             jb                      p3.7,label4
                             3
1898 7643           3956                                                             mov                     @r0,#43h;vv
                             od 
189A 78B2           3957                                                             mov                     r0,#marker
189C 76FF           3958                                                             mov                     @r0,#0ffh
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    63

189E 7F0A           3959                                                                     mov             r7,#10
18A0 7853           3960                                     mov             r0,#adec
18A2 120000   F     3961                                     call    clearN
18A5 120000   F     3962                                     call    upak3                   
18A8 784F           3963                                     mov             r0,#abin
18AA 7953           3964                                     mov             r1,#adec                        ;мл        
                              ст
18AC 120000   F     3965                                     call    decbin                  ;abin..abin+3 (hex)
18AF 120000   F     3966                                     call    loadr2                  ;r2..r5
18B2 ED             3967                                     mov             a,r5                            ;сохр номер
                              лемента
18B3 F537           3968                                     mov             nelem,a
18B5 120402         3969                                     call    altof                   ;r2..r5->int
18B8 900000   F     3970                                     mov             dptr,#ch_1;
18BB 120000   F     3971                                     call    ldc_ltemp                       ;r8..r11
18BE 1201D1         3972                                     call    flsub
18C1 900000   F     3973                                     mov             dptr,#ch_4;
18C4 120000   F     3974                                     call    ldc_ltemp                       ;r8..r11
18C7 120203         3975                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
18CA 120343         3976                                     call            ftol                    ;r2..r5->hex
18CD C002           3977                                     push            rr2
18CF C003           3978                                     push            rr3
18D1 C004           3979                                     push            rr4
18D3 C005           3980                                     push            rr5
18D5 120000   F     3981                                     call            adrblok;dptr-
18D8 D005           3982                                     pop                     rr5
18DA D004           3983                                     pop                     rr4
18DC D003           3984                                     pop                     rr3
18DE D002           3985                                     pop                     rr2
18E0 79D8           3986                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
18E2 E582           3987                                     mov                     a,dpl
18E4 2D             3988                                     add                     a,r5
18E5 F582           3989                                     mov                     dpl,a
18E7 F7             3990                                     mov                     @r1,a           ;low
18E8 E583           3991                                     mov                     a,dph
18EA 3C             3992                                     addc            a,r4
18EB F583           3993                                     mov                     dph,a
18ED 19             3994                                     dec                     r1
18EE F7             3995                                     mov                     @r1,a                   ;high
                    3996                             
18EF                3997     li42_43:
18EF 120000   F     3998                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
18F2 900000   F     3999                                     mov             dptr,#ch10;
18F5 120000   F     4000                                     call    ldc_ltemp
18F8 120000   F     4001                                     call    zdiv    
                    4002                                     ;;;;;;;;;;;
18FB 120000   F     4003                                     call    maform
                    4004                                     ;;;;
                    4005     
                    4006                                     ;;;;;;;
18FE 784F           4007                                             mov             r0,#abin
1900 120000   F     4008                                             call    saver2
1903 7853           4009                                             mov             r0,#adec
1905 7952           4010                                             mov             r1,#abin+3      ;hex->10
1907 120000   F     4011                                             call    bindec
                    4012                                     
190A 785C           4013                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
190C 7945           4014                                             mov             r1,#bufind+5
190E 7F07           4015                                             mov             r7,#7
1910 E6             4016     ch43:                           mov             a,@r0
1911 2430           4017                                             add             a,#30h
1913 F7             4018                                             mov             @r1,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    64

1914 19             4019                                             dec             r1
1915 18             4020                                             dec             r0
1916 DFF8           4021                                             djnz    r7,ch43
1918 7847           4022                                             mov             r0,#bufind+7
191A 762D           4023                                             mov             @r0,#2dh          ;-2..-9
191C 7840           4024                                             mov             r0,#bufind
191E 762B           4025                                             mov             @r0,#2bh
1920 300202         4026                                             jnb             znmat,nozzmi43;bitznak,nozzmi
1923 762D           4027                                             mov             @r0,#2dh
1925 E538           4028     nozzmi43:       mov             a,nblok
1927 B40104         4029                                             cjne    a,#1,nozzmi1            
192A 7934           4030                                             mov             r1,#sadiap;diap
192C 8010           4031                                             jmp             nozzbl
192E B40204         4032     nozzmi1:        cjne    a,#2,nozzmi2            
1931 7932           4033                                             mov             r1,#sadiap2;diap
1933 8009           4034                                             jmp             nozzbl
1935 B40304         4035     nozzmi2:        cjne    a,#3,nozzmi3            
1938 7931           4036                                             mov             r1,#sadiap3;diap
193A 8002           4037                                             jmp             nozzbl
193C 7930           4038     nozzmi3:        mov             r1,#sadiap4;diap
                    4039                                     
193E 7848           4040     nozzbl:         mov             r0,#bufind+8
1940 E7             4041                                             mov             a,@r1
1941 B40808         4042                                             cjne    a,#8,nodi8_43
1944 7630           4043                                             mov             @r0,#30h                 ;10-10
1946 18             4044                                             dec             r0
1947 7663           4045                                             mov             @r0,#63h;31h
1949 08             4046                                             inc             r0
194A 800E           4047                                             jmp             see_l43
194C B40908         4048     nodi8_43:       cjne    a,#9,nodi9_43
                    4049                                     
194F 7631           4050                                             mov             @r0,#31h           ;10-11
1951 18             4051                                             dec             r0
1952 7663           4052                                             mov             @r0,#63h;31h
                    4053                                     
1954 08             4054                                             inc             r0
1955 8003           4055                                             jmp             see_l43
1957 2432           4056     nodi9_43:               add             a,#32h
1959 F6             4057                                             mov             @r0,a;
195A 08             4058     see_l43:                        inc             r0
195B 7641           4059                                             mov             @r0,#"A";"E";
                    4060                             ;       inc             r0
                    4061                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    4062                             ;       inc             r0;             mov             bufind+11
                    4063                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
195D 434B10         4064                             orl                     bufind+11,#10h
1960 120000   F     4065     out43:          call            ind
1963 120000   F     4066                                             call            z_1s
1966 020000   F     4067                                             jmp             out7                               
                                  
                    4068     
                    4069                                     ;;;;;;;;        
1969 783D           4070     label7: mov             r0,#chkl
196B 7603           4071                                     mov             @r0,#3
196D 08             4072                                     inc             r0
196E 76E8           4073                                     mov             @r0,#0e8h               ;1000
1970 020000   F     4074                                     jmp             out7;
1973 B64352         4075     list_43:                cjne    @r0,#43h,noli_43
1976 75B0FB         4076                                                     mov             p3,#0fbh                ;43
                             h <-
1979 20B70B         4077                                                     jb              p3.7,vvod43             ;vv
                             od
197C C20B           4078                                                     clr             bitmem
197E D204           4079                                                     setb    bitizm
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    65

1980 78B2           4080                                                     mov             r0,#marker
1982 76FF           4081                                                     mov             @r0,#0ffh
1984 020000   F     4082                                                     jmp             goto7;6.03.07;label7;по кн 
                             <- выход из просмотра
                    4083     
1987 7644           4084     vvod43:                 mov             @r0,#44h
1989 E537           4085                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
198B 04             4086                                                     inc             a
198C F552           4087                                                     mov             abin+3,a
                    4088                                                     
198E F537           4089                                                     mov             nelem,a
1990 E4             4090                                                     clr             a
1991 F551           4091                                                     mov             abin+2,a
1993 F550           4092                                                     mov             abin+1,a
1995 F54F           4093                                                     mov             abin,a
                    4094                                             
1997 7853           4095                                             mov             r0,#adec
1999 7952           4096                                             mov             r1,#abin+3      ;hex->10
199B 120000   F     4097                                             call    bindec
199E 7840           4098                                             mov             r0,#bufind;почистить индикатор
19A0 7F0A           4099                                             mov             r7,#10
19A2 7420           4100                                             mov             a,#20h
19A4 F6             4101     cle20:          mov             @r0,a
19A5 08             4102                                             inc             r0
19A6 DFFC           4103                                             djnz    r7,cle20
                    4104                                             ;;;;;;
19A8 900000   F     4105                                             mov             dptr,#teCH;ОТСЧЕТ 000
19AB 120000   F     4106                                call         lotext
19AE 534BEF         4107                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
19B1 785C           4108                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
19B3 7949           4109                                             mov             r1,#bufind+9
19B5 7F03           4110                                             mov             r7,#3
19B7 E6             4111     ch43_42:                                mov             a,@r0
19B8 2430           4112                                             add             a,#30h
19BA F7             4113                                             mov             @r1,a
19BB 19             4114                                             dec             r1
19BC 18             4115                                             dec             r0
19BD DFF8           4116                                             djnz    r7,ch43_42
19BF 120000   F     4117                                             call            ind
19C2 120000   F     4118                                             call            z_1s
19C5 020000   F     4119                                             jmp             out7
19C8 B64419         4120     noli_43:        cjne            @r0,#44h,vvosta
19CB 7643           4121                                             mov                     @r0,#43h
19CD 79D8           4122                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
19CF E7             4123                                                     mov                     a,@r1
19D0 F582           4124                                                     mov                     dpl,a
19D2 19             4125                                                     dec                     r1
19D3 E7             4126                                                     mov                     a,@r1;high
19D4 F583           4127                                                     mov                     dph,a
19D6 A3             4128                                                     inc                     dptr
19D7 A3             4129                                                     inc                     dptr
19D8 A3             4130                                                     inc                     dptr
19D9 A3             4131                                                     inc                     dptr
19DA E583           4132                                                     mov                     a,dph
19DC F7             4133                                                     mov                     @r1,a
19DD 09             4134                                                     inc                     r1
19DE E582           4135                                                     mov                     a,dpl
19E0 F7             4136                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
19E1 020000   F     4137                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    4138     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    66

19E4 B66111         4139     vvosta:                 cjne            @r0,#61h,vvostad
19E7 7662           4140                                                     mov                     @r0,#62h
19E9 900000   F     4141                                                     mov                     dptr,#teMAX;
19EC 120000   F     4142                                                     call            lotext
19EF 120000   F     4143                                                     call            vichmax
19F2 120000   F     4144                                                     call            z_05s;z_1s
19F5 020000   F     4145                                                     jmp             goto7
                    4146     
19F8 B66211         4147     vvostad:                cjne            @r0,#62h,rousta
19FB 7663           4148                                                     mov                     @r0,#63h
19FD 900000   F     4149                                                     mov             dptr,#teMid;
1A00 120000   F     4150                                                     call    lotext
1A03 120000   F     4151                                                     call            vichmean
1A06 120000   F     4152                                                     call            z_05s
1A09 020000   F     4153                                                     jmp             goto7
                    4154     
1A0C B6630E         4155     rousta:                 cjne            @r0,#63h,rousta1
1A0F 7661           4156                                                     mov                     @r0,#61h
1A11 900000   F     4157                                                     mov             dptr,#teMin;
1A14 120000   F     4158                                                     call    lotext
1A17 120000   F     4159                                                     call            vichmin
1A1A 120000   F     4160                                                     call            z_05s
1A1D 020000   F     4161     rousta1:                jmp             goto7
                    4162     
1A20 020000   F     4163     rLABELP:                jmp                     LABELP
1A23 78B1           4164     vvodm11_15:     mov                     r0,#vichR;vvod
1A25 75B0F7         4165                                                     mov                     p3,#0f7h
1A28 20B7F5         4166                                             jb                      p3.7,rLABELP;????
                    4167                                     
                    4168     
1A2B B61115         4169                                             cjne                    @r0,#11h,tome21
1A2E 7621           4170                                             mov                     @r0,#21h;vvod
1A30 900000   F     4171                                             mov                     dptr,#teTE11
1A33 120000   F     4172                                             call            lotext
1A36 534B03         4173                                             anl                     bufind+11,#03h ;погасить за
                             пятые
1A39 020000   F     4174                                             jmp                     onmem11
                    4175     
1A3C 16             4176     me11_15dec:             dec             @r0                             ;<-
1A3D 120000   F     4177     lokame1:        call            lomenu
1A40 020000   F     4178                                             jmp                     onmem11
                    4179     
1A43 B61206         4180     tome21:         cjne                    @r0,#12h,tome13
                    4181                                             ;вкл тест интерфейса
1A46 020000   F     4182                                             jmp             testrs;??????????
1A49 020000   F     4183                                             jmp                     onmem11
                    4184     
1A4C B6132A         4185     tome13:         cjne                    @r0,#13h,tome14
1A4F 7631           4186                                             mov                     @r0,#31h
                    4187                                             
1A51 7A50           4188                                             mov                     r2,#50h                    
                                  ;57.6->19.2
1A53 7B2C           4189                                             mov                     r3,#2ch
1A55 120454         4190                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1A58 E508           4191                                             mov                     a,r8
1A5A B4000E         4192                                             cjne            a,#00,skor19
1A5D 900000   F     4193                                             mov                     dptr,#teS57_6;57,6
1A60 120000   F     4194                                             call            lotext
1A63 434B80         4195                                     orl                     bufind+11,#80h
1A66 C213           4196                                             clr                     bitv19
                    4197     
1A68 020000   F     4198                                             jmp             onmem11
1A6B 900000   F     4199     skor19:         mov                     dptr,#teS19_2
1A6E 120000   F     4200                                             call            lotext
1A71 D213           4201                                             setb            bitv19
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    67

1A73 434B80         4202                                             orl                     bufind+11,#80h
1A76 020000   F     4203                                             jmp                     onmem11
                    4204                                             
                    4205     
1A79 B61415         4206     tome14:         cjne                    @r0,#14h,tome15
1A7C D204           4207                                             setb            bitizm
1A7E 7881           4208                                             mov                     r0,#chavt
1A80 7600           4209                                             mov                     @r0,#0
1A82 08             4210                                             inc                     r0
1A83 7600           4211                                             mov                     @r0,#0
1A85 C211           4212     outmenu:        clr                     bitmenu
1A87 020000   F     4213                                             jmp                     out7
                    4214     
1A8A 78B1           4215     goparom:        mov             r0,#vichR               ;режим меню 52
1A8C 7652           4216                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
1A8E 020000   F     4217                                             jmp                     goparol
1A91 3090F6         4218     tome15:         jnb                     p1.0,goparom
1A94 753936         4219                                             mov                     nuerr,#36h
1A97 120000   F     4220                                             call            error
1A9A 120000   F     4221                                             call            ind
1A9D 120000   F     4222                                             call            z_01s
1AA0 80EF           4223                                             jmp                     tome15; onmem11
                    4224     
1AA2 80E6           4225             jmp                     goparom;jb              bitpar,goparom  
1AA4 7651           4226                                             mov                     @r0,#51h;ПАРОЛЬ 000
1AA6 120000   F     4227                                             call            lomenu
1AA9 78B2           4228                                             mov                     r0,#marker
1AAB 7607           4229                                             mov                     @r0,#7
1AAD 753B09         4230                                             mov                     movrig,#9
1AB0 753A07         4231                                             mov                     movleft,#7
                    4232                                             ;setb           bitizm
1AB3 020000   F     4233                                             jmp                     onmem11
                    4234     
                    4235     
1AB6 78B1           4236     me21_23:        mov                     r0,#vichR               ;<-
1AB8 7423           4237                                             mov                     a,#23h
1ABA C3             4238                                             clr                     c
1ABB 96             4239                                             subb            a,@r0
1ABC 403D           4240                                             jc                      labelS1
1ABE 75B0FB         4241                                             mov                     p3,#0fbh
1AC1 20B718         4242                                             jb                      p3.7,vv21_23
1AC4 B6210B         4243                                             cjne            @r0,#21h,me21_23dec;-<
1AC7 7623           4244                                             mov                     @r0,#23h
1AC9 900000   F     4245                                             mov                     dptr,#teTE7
1ACC 120000   F     4246                                             call            lotext
1ACF 020000   F     4247                                             jmp                     onmem11
1AD2                4248     me21_23dec:     
1AD2 16             4249                                             dec                     @r0
1AD3 120000   F     4250                                             call            lomenu
1AD6 020000   F     4251                                             jmp                     onmem11
1AD9 020000   F     4252     onmem12:        jmp                     viout;  outF    ;(ie7)                          
                    4253                                                     
1ADC 75B0F7         4254     vv21_23:        mov             p3,#0f7h                ;vvod
1ADF 20B7F7         4255                                             jb              p3.7,onmem12
1AE2 B6210C         4256                                             cjne            @r0,#21h,test22
                    4257                                             ;mov                    dptr,#tabt11;заслать ус 11А
1AE5 120000   F     4258     tests:          call            lotpus
1AE8 D215           4259                                             setb            biteizm;запомнить режим ТИ
1AEA D204           4260                                             setb            bitizm
1AEC C211           4261                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
1AEE 020000   F     4262                                             jmp                     goto7;onmem11
1AF1 B62202         4263     test22:         cjne            @r0,#22h,test23
                    4264                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1AF4 80EF           4265                                             jmp             tests   
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    68

1AF6                4266     test23:
                    4267                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1AF6 80ED           4268                                             jmp             tests   
1AF8 020000   F     4269     left_s:         jmp                     left_sk
1AFB B63175         4270     labelS1:        cjne            @r0,#31h,me_41
1AFE 75B0FB         4271                                             mov                     p3,#0fbh                   
                                  ;<-
1B01 30B7F4         4272                                             jnb                     p3.7,left_s
1B04 75B0F7         4273                                             mov                     p3,#0f7h
1B07 20B7CF         4274                                             jb                      p3.7,onmem12
                    4275                                             ;запомнить признак установленной скорости в рпзу
                    4276     
                    4277     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4278     ;и запись во внешнее озу(0000h)
1B0A 7900           4279                                             mov             r1,#0                   ;
1B0C 7A50           4280                                     mov             r2,#50h
1B0E 7B00           4281                                     mov             r3,#00
1B10 120499         4282                                     call    copyPP
                    4283                                     ;внести изменения во внешн озу
                    4284                                     ;KD=00 01 86 A0 (KD=1)
                    4285                                     ;кофф *100000 и переведенный в hex формат
                    4286                                     ;согласно адресов диапазонов и адресов яч вн озу 
1B13 792C           4287                                     mov             r1,#2ch
1B15 7400           4288                                     mov             a,#0;57,6
1B17 301302         4289                                     jnb             bitv19,spwri
1B1A 7401           4290                                     mov             a,#1;19.6
1B1C F3             4291     spwri:  movx    @r1,a
                    4292     ;стереть страницу пап прогр 
1B1D 905000         4293                                     mov             dptr,#5000h
1B20 7FFF           4294                                     mov             r7,#0ffh
1B22 12043E         4295                                     call    cle256
                    4296     ;и запись в ячейки кофф памяти прогр (3000h) 
1B25 7FFF           4297                                     mov             r7,#0ffh
1B27 7900           4298                                     mov             r1,#0                           ;external r
                             am
1B29 905000         4299                                     mov             dptr,#5000h
1B2C 120480         4300                                     call    wrpage
                    4301             
1B2F 201305         4302                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1B32 758DF4         4303                                             mov                     TH1,#244                ;57
                             .6
1B35 8003           4304                                             jmp                     outsko
1B37 758DDC         4305     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1B3A C211           4306     outsko:         clr             bitmenu
1B3C D204           4307                                             setb            bitizm
1B3E 020000   F     4308                                             jmp                     out7
                    4309     
1B41 020000   F     4310     rlabels4:               jmp             labels4
1B44 020000   F     4311     rlabelS13:      jmp             labelS13
                    4312     
1B47 B652F7         4313     me_52:          cjne            @r0,#52h,rlabels4
1B4A 75B0FB         4314                                             mov                     p3,#0fbh;<-
1B4D 20B717         4315                                             jb                      p3.7,vv_52v     ;ввод в кал
                             ибровке
1B50 78B2           4316                                                     mov             r0,#marker              ;сд
                             виг маркера влево при калибр
1B52 7440           4317                                     mov             a,#bufind
1B54 26             4318                                             add             a,@r0                   ;a=bufind+m
                             arker
1B55 F9             4319                                             mov             r1,a
1B56 19             4320                                             dec             r1;inc          r1
1B57 873C           4321                                             mov             savba,@r1
                    4322                                                     
1B59 78B2           4323                                             mov             r0,#marker
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    69

1B5B 16             4324                                             dec             @r0                             
1B5C C219           4325                                             clr             bitmig
1B5E E53A           4326                                             mov                     a,movleft
1B60 B60001         4327                                             cjne    @r0,#0,me_52v;ажата кн <- при вводе цифр ка
                             либровки
1B63 06             4328                                             inc                     @r0
1B64 020000   F     4329     me_52v:         jmp                     goto7
                    4330     
1B67 75B0F7         4331     vv_52v:         mov             p3,#0f7h
1B6A 30B703         4332                                             jnb             p3.7,rvvkali52
1B6D 020000   F     4333                                             jmp                     goto7
1B70 020000   F     4334     rvvkali52:      jmp             vvkali52
                    4335     
                    4336     
1B73 B651D1         4337     me_41:          cjne            @r0,#51h,me_52;rlabels4
1B76 75B0FB         4338                                             mov             p3,#0fbh;<-
1B79 30B7C8         4339                                             jnb             p3.7,rlabelS13
1B7C 75B0F7         4340                                             mov             p3,#0f7h
1B7F 20B773         4341                                             jb              p3.7,vvmenu
                    4342                                             ;ввод пароля
                    4343                                     
                    4344     ;       считать с индикатора 
1B82 7F0E           4345                                     mov             r7,#14
1B84 784F           4346                                     mov             r0,#abin
1B86 120000   F     4347                                     call    clearN                  
                    4348                                     
                    4349     ;чтение номера байта с индикатора(3байта)
                    4350     ;bufind+3..bufind+9
                    4351     ;-  - - -
                    4352     ;- - - - - - - - - -
                    4353     ;adec..adec+9
                    4354     ;ст            мл
1B89 7849           4355                                     mov             r0,#bufind+9;
1B8B 795C           4356                                     mov             r1,#adec+9
1B8D 7F03           4357                                     mov             r7,#3;3bait
1B8F C3             4358     upav1:          clr             c
1B90 E6             4359                                     mov             a,@r0
1B91 9430           4360                                     subb    a,#30h
1B93 F7             4361                                     mov             @r1,a
1B94 18             4362                                     dec             r0
1B95 19             4363                                     dec             r1
1B96 DFF7           4364                                     djnz    r7,upav1;adec+7..adec+9
1B98 7A50           4365                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1B9A 7B28           4366                                             mov                     r3,#28h
1B9C 120454         4367                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1B9F 800F           4368     jmp                     goparol
1BA1 E508           4369                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1BA3 B55A52         4370                                     cjne            a,adec+7,parerr
1BA6 E509           4371                                     mov                     a,r9    
1BA8 B55B4D         4372                                     cjne            a,adec+8,parerr
1BAB E50A           4373                                     mov                     a,r10
1BAD B55C48         4374                                     cjne            a,adec+9,parerr
                    4375                                     ;равны
1BB0 78B1           4376     goparol:        mov             r0,#vichR               ;режим меню 52
1BB2 7652           4377                                             mov             @r0,#52h                ;0000-n
1BB4 900000   F     4378                                             mov             dptr,#teKD;00000-nA
1BB7 120000   F     4379                                             call            lotext
                    4380                                             ;;;;;;;;;
                    4381                                                     ;n(hex)->abin
1BBA 120000   F     4382                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1BBD 2552           4383                                             add             a,abin+3
1BBF F552           4384                                             mov             abin+3,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    70

1BC1 7853           4385                                             mov             r0,#adec
1BC3 7952           4386                                             mov             r1,#abin+3      ;hex->10
1BC5 120000   F     4387                                             call    bindec
1BC8 855C48         4388                                             mov             bufind+8,adec+9
1BCB 75472D         4389                                             mov             bufind+7,#2dh
1BCE 434A80         4390                                             orl                     bufind+10,#80h;зажечь KMП
1BD1 434B10         4391                                             orl                     bufind+11,#10h;точка после 
                             1 знакоместа
1BD4 79AE           4392                                             mov             r1,#diap
1BD6 7848           4393                                             mov             r0,#bufind+8
1BD8 E7             4394                                             mov             a,@r1
1BD9 B40807         4395                                             cjne    a,#8,nodi8k
1BDC 7630           4396                                             mov             @r0,#30h                 ;10-10
1BDE 18             4397                                             dec             r0
1BDF 7663           4398                                             mov             @r0,#63h;31h
1BE1 8008           4399                                             jmp             nodisk9
1BE3 B40905         4400     nodi8k:                         cjne    a,#9,nodisk9
                    4401                                     
1BE6 7631           4402                                             mov             @r0,#31h           ;10-11
1BE8 18             4403                                             dec             r0
1BE9 7663           4404                                             mov             @r0,#63h;31h
                    4405                                     
                    4406     
1BEB 78B2           4407     nodisk9:        mov                     r0,#marker
1BED 7601           4408                                             mov                     @r0,#1
1BEF 753A01         4409                                             mov                     movleft,#1
1BF2 753B05         4410                                             mov                     movrig,#5
                    4411                                             
1BF5 020000   F     4412     vvmenu:         jmp             goto7
                    4413     
1BF8 753932         4414     parerr:         mov                     nuerr,#32h
1BFB 120000   F     4415                                             call            error
1BFE 120000   F     4416                                             call            ind
1C01 120000   F     4417                                             call            z_1s
1C04 C211           4418                                             clr                     bitmenu
1C06 D204           4419                                             setb            bitizm
1C08 78B2           4420                                             mov                     r0,#marker
1C0A 76FF           4421                                             mov                     @r0,#0ffh
1C0C 020000   F     4422                                             jmp             goto7
                    4423     
1C0F 30130E         4424     left_sk:                jnb                     bitv19,tosk19;<-
1C12 900000   F     4425                                             mov                     dptr,#teS57_6;57,6
1C15 120000   F     4426                                             call            lotext
1C18 434B80         4427                                             orl                     bufind+11,#80h
1C1B C213           4428                                             clr                     bitv19
1C1D 020000   F     4429                                             jmp                     onmem11;goto7
1C20 900000   F     4430     tosk19:         mov                     dptr,#teS19_2
1C23 120000   F     4431                                             call            lotext
1C26 434B80         4432                                             orl                     bufind+11,#80h
1C29 D213           4433                                             setb            bitv19
1C2B 020000   F     4434                                             jmp                     onmem11;goto7
                    4435     
1C2E                4436     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4437             
                    4438     ;;;;;;;;;;;;;;;;;;
                    4439     ;необходимо не портить цифру в следуюем слева знакоместе
                    4440     ;т е сохранить ее в ячейке для мигания в противном случае
                    4441     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4442     ;       знакоместа
1C2E 78B2           4443                                     mov             r0,#marker
1C30 7440           4444                                     mov             a,#bufind
1C32 26             4445                                             add             a,@r0                   ;a=bufind+m
                             arker
1C33 F9             4446                                             mov             r1,a
1C34 19             4447                                             dec             r1;inc          r1
1C35 873C           4448                                             mov             savba,@r1
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    71

                    4449                                                     
1C37 78B2           4450                                                     mov             r0,#marker
1C39 16             4451                                                     dec             @r0                        
                                  
1C3A C219           4452                                     clr             bitmig
1C3C E53A           4453                                     mov                     a,movleft
1C3E B60652         4454                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
1C41 06             4455                                     inc             @r0
1C42 020000   F     4456                                             jmp             goto7
                    4457     ;;;;;;;
                    4458     
1C45                4459     vvkali52:       ;введено значение для калибровки
                    4460                                             ;число на индикаторе ->Ak  (52h)
                    4461                                             ;       считать с индикатора 
1C45 7F0E           4462                                     mov             r7,#14
1C47 784F           4463                                     mov             r0,#abin
1C49 120000   F     4464                                     call    clearN                  
                    4465                                     
                    4466     ;чтение номера байта с индикатора(3байта)
                    4467     ;bufind+1..bufind+5
                    4468     ;-  - - -
                    4469     ;- - - - - - - - - -
                    4470     ;adec..adec+9
                    4471     ;ст            мл
1C4C 7845           4472                                     mov             r0,#bufind+5;
1C4E 795C           4473                                     mov             r1,#adec+9
1C50 7F05           4474                                     mov             r7,#5;5bait
1C52 C3             4475     upav2:          clr             c
1C53 E6             4476                                     mov             a,@r0
1C54 9430           4477                                     subb    a,#30h
1C56 F7             4478                                     mov             @r1,a
1C57 18             4479                                     dec             r0
1C58 19             4480                                     dec             r1
1C59 DFF7           4481                                     djnz    r7,upav2;adec+7..adec+9
                    4482     
1C5B 784F           4483                                     mov             r0,#abin
1C5D 7953           4484                                     mov             r1,#adec                        ;мл        
                              ст
1C5F 120000   F     4485                                     call    decbin                  ;abin..abin+3 (hex)
1C62 120000   F     4486                                     call    loadr2                  ;r2..r5
1C65 120402         4487                                     call    altof   ;r2..r5->float
1C68 900000   F     4488                                     mov     dptr,#ch_10;10
1C6B 120000   F     4489                                     call    ldc_ltemp                       ;r8..r11=8
1C6E 120203         4490                                     call    flmul
1C71 78A4           4491                                     mov             r0,#rez_Ak
1C73 120000   F     4492                                     call    saver2
1C76 C211           4493                                             clr                     bitmenu
1C78 D212           4494                                             setb            bitklb
1C7A 434A80         4495                                             orl                     bufind+10,#80h;зажечь KMП
1C7D D204           4496                                             setb            bitizm;бит калибровки уже установле
                             н
1C7F 78B2           4497                                             mov                     r0,#marker
1C81 76FF           4498                                             mov                     @r0,#0ffh
1C83 783D           4499                                     mov             r0,#chkl
1C85 76FF           4500                                     mov             @r0,#0ffh
1C87 08             4501                                     inc             r0
1C88 76FF           4502                                     mov             @r0,#0ffh;38h
1C8A 120000   F     4503                                     call            z_1s
1C8D 020000   F     4504                                     jmp             out7
                    4505     
                    4506     
1C90 020000   F     4507                                             jmp             goto7
                    4508                                              
1C93 020000   F     4509     onmem13:        jmp             goto7   ;(ie7)
                    4510     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    72

1C96 B642AC         4511     labels4:        cjne            @r0,#42h,vvkali52
1C99 75B0FB         4512                                             mov                     p3,#0fbh;<-
1C9C 30B7F4         4513                                             jnb             p3.7,onmem13
1C9F 75B0F7         4514                                             mov             p3,#0f7h;vvod
1CA2 20B7EE         4515                                             jb              p3.7,onmem13
                    4516                                             
                    4517             
1CA5 020000   F     4518     jmp             out7                                                    
                    4519     ;;;;;;;
1CA8                4520     labelI:
1CA8 75B0FE         4521                                     mov             p3,#0feh
1CAB E5B0           4522                                     mov             a,p3
1CAD 20E703         4523                                     jb              acc.7,nopoint
                    4524                                     ;
1CB0 020000   F     4525                                     jmp             goto7;out7
                    4526     
1CB3 75B0FB         4527     nopoint:                mov             p3,#0fbh
1CB6 E5B0           4528                                     mov             a,p3
1CB8 20E72C         4529                                     jb              acc.7,nopoin7
1CBB 78B2           4530     labelS3:mov             r0,#marker
1CBD E53A           4531                                     mov             a,movleft
1CBF B40309         4532                                     cjne    a,#3,poina1
1CC2 B6030B         4533                                     cjne    @r0,#3,nomarl;26
                    4534                                     ;mov            @r0,#9
1CC5 E53B           4535     poina2: mov                     a,movrig                ;кн <- B=+00000
1CC7 F6             4536                                     mov                     @r0,a
1CC8 020000   F     4537                                     jmp             goto7;  out7
                    4538     
1CCB B60402         4539     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1CCE 80F5           4540                                             jmp             poina2
                    4541     
                    4542     
1CD0                4543     nomarl:                 ;                               29.12.06
                    4544     ;;;;;;;;;;;;;;;;;;
                    4545     ;необходимо не портить цифру в следуюем справа знакоместе
                    4546     ;т е сохранить ее в ячейке для мигания в противном случае
                    4547     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4548     ;       знакоместа
1CD0 78B2           4549                                     mov             r0,#marker
1CD2 7440           4550                                     mov             a,#bufind
1CD4 26             4551                                             add             a,@r0                   ;a=bufind+m
                             arker
1CD5 F9             4552                                             mov             r1,a
1CD6 09             4553                                             inc             r1
1CD7 873C           4554                                             mov             savba,@r1
                    4555                                                     
1CD9 78B2           4556                                                     mov             r0,#marker
1CDB 16             4557                                                     dec             @r0                        
                                  
1CDC C219           4558                                     clr             bitmig
1CDE E53A           4559                                     mov                     a,movleft
1CE0 B4036B         4560                                     cjne            a,#3,poinA
1CE3 B60266         4561                                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+0
                             0000
1CE6 06             4562     poin3:  inc             @r0
                    4563     ;нажат ввод А =000000 запомнить константу А
1CE7 75B0F7         4564     nopoin7:           mov          p3,#0f7h
1CEA E5B0           4565                                     mov             a,p3
1CEC 20E75D         4566                                     jb              acc.7,gogo7;out7
1CEF 78B1           4567                                     mov             r0,#vichR
1CF1 E6             4568                                     mov             a,@r0
1CF2 B6215E         4569                                     cjne    @r0,#21h,no21p7
1CF5 7611           4570                                     mov             @r0,#11h
                    4571                             ;       считать с индикатора  упаковать в плавающий формат
                    4572                             ;   сохранить
1CF7 7F0E           4573                                     mov             r7,#14
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    73

1CF9 784F           4574                                     mov             r0,#abin
1CFB 120000   F     4575                                     call    clearN                  
1CFE 120000   F     4576                                     call    upakA
                    4577                                     
1D01 784F           4578                                     mov             r0,#abin
1D03 7953           4579                                     mov             r1,#adec                        ;мл        
                              ст
1D05 120000   F     4580                                     call    decbin                  ;abin..abin+3 (hex)
1D08 120000   F     4581                                     call    loadr2                  ;r2..r5
1D0B 120402         4582                                     call    altof                   ;r2..r5->float
1D0E 78BC           4583                                     mov                     r0,#konstA
1D10 120000   F     4584                                     call            saver2
1D13 900000   F     4585                                     mov                     dptr,#ch0
1D16 120000   F     4586                                     call            ldc_ltemp
1D19 1201D6         4587                                     call            flcmp
1D1C 6010           4588                                     jz              erra0
                    4589     ;26
1D1E 78B2           4590                                     mov             r0,#marker
1D20 76FF           4591                                     mov             @r0,#0ffh
                    4592                                     
1D22 900000   F     4593                                     mov             dptr,#teVICH;teBequ0
1D25 120000   F     4594                                     call    lotext
                    4595                             ;       call            outB
1D28 534BBF         4596                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4597                             ;       orl             bufind+11,#80h
1D2B 020000   F     4598                                     jmp             goto7
                    4599     
1D2E 78B2           4600     erra0:          mov             r0,#marker
1D30 76FF           4601                                             mov             @r0,#0ffh
1D32 753934         4602                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
1D35 120000   F     4603                                             call            error
1D38 120000   F     4604                                             call            ind
1D3B 120000   F     4605                                             call            z_1s
1D3E 78B1           4606                                             mov                     r0,#vichR
1D40 7600           4607                                             mov                     @r0,#0
1D42 C214           4608                                             clr                     bitvich
1D44 C206           4609                                             clr                     bitvi11
1D46 D204           4610                                             setb            bitizm
1D48 78B2           4611                                             mov                     r0,#marker
1D4A 76FF           4612                                             mov                     @r0,#0ffh
1D4C 802E           4613     gogo7:          jmp                     out7;goto7
                    4614     
1D4E B6032B         4615     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1D51 8093           4616                                             jmp             poin3
                    4617     
1D53                4618     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4619                             ;   сохранить
1D53 7F0E           4620                                     mov             r7,#14
1D55 784F           4621                                     mov             r0,#abin
1D57 120000   F     4622                                     call    clearN                  
1D5A 120000   F     4623                                     call    upakB                   
1D5D 784F           4624                                     mov             r0,#abin
1D5F 7953           4625                                     mov             r1,#adec                        ;мл        
                              ст
1D61 120000   F     4626                                     call    decbin                  ;abin..abin+3 (hex)
1D64 120000   F     4627                                     call    loadr2                  ;r2..r5
1D67 120402         4628                                     call    altof                   ;r2..r5->int
1D6A 301B04         4629                                     jnb             bitznB,pozB
1D6D EA             4630                                     mov             a,r2
1D6E 4480           4631                                     orl             a,#80h
1D70 FA             4632                                     mov             r2,a                    ;знак-
1D71                4633     pozB:           ;mov            r0,#konstB
                    4634                                     ;call   saver2
                    4635     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    74

1D71 79B2           4636                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1D73 77FF           4637                                     mov             @r1,#0ffh
1D75 78B1           4638                                     mov             r0,#vichR
1D77 7611           4639                                     mov             @r0,#11h
1D79 020000   F     4640                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4641                                     
                    4642     
1D7C                4643     out7:                   ;mov            IE,#80h
1D7C D083           4644                                     pop             dph
1D7E D082           4645                                     pop             dpl
1D80 D007           4646                                     pop             rr7     
1D82 D006           4647                                     pop             rr6
1D84 D005           4648                                     pop             rr5
1D86 D004           4649                                     pop             rr4
1D88 D003           4650                                     pop             rr3
1D8A D002           4651                                     pop             rr2
1D8C D001           4652                                     pop             rr1                             
1D8E D000           4653                                     pop             rr0
1D90 D0D0           4654                                     pop             psw
1D92 D0E0           4655                                     pop             acc
1D94 75AD00         4656                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1D97 75B0C0         4657                             mov             P3,#0c0h
                    4658                             ;       mov             EIE2,#30H
1D9A C219           4659     clr             bitmig
1D9C E586           4660                                             mov             a,P6            ;p6.4=0
1D9E 54EF           4661                             anl             a,#0efh
1DA0 F586           4662                             mov             P6,a
1DA2 00             4663                             nop
1DA3 00             4664                             nop
                    4665                                     
1DA4 E586           4666                             mov             a,P6                    ;p6.4=1 
1DA6 4410           4667                             orl             a,#10h
1DA8 F586           4668                             mov             P6,a
                    4669                             ;;;;;;;;;
1DAA E5DA           4670                             mov             a,PCA0CPM0;             TOG0
1DAC 4446           4671                             orl             a,#46h;anl              a,#0fbh
1DAE F5DA           4672                             mov             PCA0CPM0,a
                    4673     
1DB0 75CDD0         4674                             mov             TH2,#0d0h
1DB3 75CC00         4675                             mov             TL2,#00
                    4676     
1DB6 D2CA           4677                             setb            T2CON.2
1DB8 D2AD           4678                             setb            ET2;IE.5
                    4679                                                         
1DBA 32             4680                                     reti
                    4681     
                    4682     
                    4683                                     
                    4684     
                    4685     
1DBB 78B1           4686     lomenu:         mov             r0,#vichR
1DBD B61107         4687                                             cjne    @r0,#11h,menu12
1DC0 900000   F     4688                                             mov             dptr,#teTESI
1DC3 120000   F     4689     lome1:                  call    lotexT
1DC6 22             4690                                             ret
1DC7 B61205         4691     menu12:         cjne    @r0,#12h,menu13
1DCA 900000   F     4692                                             mov             dptr,#teTESR
1DCD 80F4           4693                                             jmp             lome1
1DCF B61305         4694     menu13:         cjne    @r0,#13h,menu14
1DD2 900000   F     4695                                             mov             dptr,#teSKOR
1DD5 80EC           4696                                             jmp             lome1
1DD7 B61405         4697     menu14:         cjne    @r0,#14h,menu15
1DDA 900000   F     4698                                             mov             dptr,#teAVK
1DDD 80E4           4699                                             jmp             lome1
1DDF B61505         4700     menu15:                 cjne    @r0,#15h,menu21
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    75

1DE2 900000   F     4701                                             mov             dptr,#teKALIB
1DE5 80DC           4702                                             jmp             lome1
                    4703     
1DE7 B62105         4704     menu21: cjne    @r0,#21h,menu22
1DEA 900000   F     4705                                             mov             dptr,#teTE11
1DED 80D4           4706                                             jmp             lome1
1DEF B62205         4707     menu22:         cjne    @r0,#22h,menu23
1DF2 900000   F     4708                                             mov             dptr,#teTE9
1DF5 80CC           4709                                             jmp             lome1
1DF7 B62305         4710     menu23:         cjne    @r0,#23h,menu31
1DFA 900000   F     4711                                             mov             dptr,#teTE7
1DFD 80C4           4712                                             jmp             lome1
1DFF B63105         4713     menu31:         cjne    @r0,#31h,menu41
1E02 900000   F     4714                                             mov             dptr,#teS57_6
1E05 80BC           4715                                             jmp             lome1
                    4716     
1E07                4717     menu41:         
1E07 900000   F     4718                                             mov             dptr,#tePAR
1E0A 80B7           4719                                             jmp             lome1
                    4720     
1E0C 020000   F     4721     yesvi_kr:               jmp                     yesvi_km
1E0F                4722     endkalib:;KD=Ak/A3
1E0F 200DFA         4723                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1E12 789C           4724                                             mov                     r0,#rez_A3
1E14 120000   F     4725                                             call            resar2
                    4726                                     
1E17 120402         4727                                     call    altof                   ;->float
1E1A EA             4728                                             mov                     a,r2
1E1B 547F           4729                                             anl                     a,#7fh
1E1D FA             4730                                             mov                     r2,a
1E1E 120000   F     4731                                     call            move28
1E21 78A4           4732                                             mov                     r0,#rez_Ak
1E23 120000   F     4733                                             call            resar2
1E26 1202B7         4734                                             call            fldiv
                    4735                                                     
1E29 900000   F     4736                                     mov     dptr,#CHtho;100000
1E2C 120000   F     4737                                     call    ldc_ltemp                       ;r8..r11=8
1E2F 120203         4738                                     call    flmul
1E32 120343         4739                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4740     
1E35 78A0           4741                                             mov                     r0,#koefKD
1E37 120000   F     4742                                             call            saver2
                    4743                                             ;запись в рпзу в соотв ячейку
                    4744                             
1E3A 7900           4745                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1E3C 7A50           4746                                     mov             r2,#50h
1E3E 7B00           4747                                     mov             r3,#00
1E40 120499         4748                                     call    copyPP
                    4749                                     ;внести изменения во внешн озу
1E43 120000   F     4750                                     call            findext                 ;r1-внешн озу
1E46 78A0           4751                                     mov                     r0,#koefKD
1E48 120000   F     4752                                             call            resar2
1E4B EA             4753                                             mov                     a,r2
1E4C F3             4754                                             movx            @r1,a
1E4D 09             4755                                             inc                     r1
1E4E EB             4756                                             mov                     a,r3
1E4F F3             4757                                             movx            @r1,a
1E50 09             4758                                             inc                     r1
1E51 EC             4759                                             mov                     a,r4
1E52 F3             4760                                             movx            @r1,a
1E53 09             4761                                             inc                     r1
1E54 ED             4762                                             mov                     a,r5
1E55 F3             4763                                             movx            @r1,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    76

                    4764                                     ;кофф *100000 и переведенный в hex формат
                    4765                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4766     ;стереть страницу пап прогр 
1E56 905000         4767                                     mov             dptr,#5000h
1E59 7FFF           4768                                     mov             r7,#0ffh
1E5B 12043E         4769                                     call    cle256
                    4770     ;и запись в ячейки кофф памяти прогр (3000h) 
1E5E 7FFF           4771                                     mov             r7,#0ffh
1E60 7900           4772                                     mov             r1,#0                           ;external r
                             am
1E62 905000         4773                                     mov             dptr,#5000h
1E65 120480         4774                                     call    wrpage
                    4775     ;2.2.07
1E68 79AE           4776                                     mov                     r1,#diap
1E6A B70511         4777                                     cjne            @r1,#5,fulkalib
                    4778                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1E6D D20D           4779                                     setb            bifl_kt
                    4780                                     ;call           loadus
1E6F 900000   F     4781                                     mov                     dptr,#tabt7;заслать ус 7А       
1E72 E4             4782                             clr             a
1E73 93             4783                             movc    a,@a+dptr                               ;high byte
1E74 F584           4784                             mov             p4,a
1E76 A3             4785                             inc             dptr
1E77 E4             4786                             clr             a
1E78 93             4787                             movc    a,@a+dptr                               ;low byte
1E79 F585           4788                             mov             p5,a
1E7B 020000   F     4789                                     jmp             goto7;  out_kali
                    4790     
                    4791     ;;;
1E7E                4792     fulkalib:
1E7E C212           4793                                             clr             bitklb
1E80 D216           4794                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1E82 900000   F     4795                                             mov             dptr,#teEND
1E85 120000   F     4796                                             call    lotext
1E88 120000   F     4797                                             call    ind
1E8B 120000   F     4798     out_kali:       call    z_1s
1E8E 120000   F     4799                                             call    z_1s
1E91 020000   F     4800                                             jmp             goto7
1E94                4801     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1E94 7A50           4802                                     mov                     r2,#50h                 ;-11a
1E96 7B14           4803                                     mov                     r3,#14h                 ;k7
1E98 12046C         4804                                     call            rebyte2                         ;r2..r5- he
                             x
1E9B 120402         4805                                     call            altof                   ;r2..r5->float
1E9E C002           4806                                     push            rr2
1EA0 C003           4807                                     push            rr3
1EA2 C004           4808                                     push            rr4
1EA4 C005           4809                                     push            rr5
1EA6 7A50           4810                                     mov                     r2,#50h                 ;k5
1EA8 7B0C           4811                                     mov                     r3,#0ch
1EAA 12046C         4812                             call            rebyte2                 ;r2..r5
1EAD 120402         4813                                     call            altof                   ;r2..r5->float
1EB0 120000   F     4814                                     call            move28
1EB3 D005           4815                                     pop                     rr5
1EB5 D004           4816                                     pop                     rr4
1EB7 D003           4817                                     pop                     rr3
1EB9 D002           4818                                     pop                     rr2
1EBB 1202B7         4819                                     call            fldiv                   ;K7/K5
                    4820     
1EBE 900000   F     4821                                     mov     dptr,#CHtho;100000
1EC1 120000   F     4822                                     call    ldc_ltemp                       ;r8..r11=8
1EC4 120203         4823                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1EC7 C002           4824                                     push            rr2
1EC9 C003           4825                                     push            rr3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    77

1ECB C004           4826                                     push            rr4
1ECD C005           4827                                     push            rr5
                    4828                                     
1ECF 789C           4829                                     mov                     r0,#rez_A3
1ED1 120000   F     4830                                     call            resar2
1ED4 120402         4831                                     call            altof                           ;r2..r5->fl
                             oat
1ED7 120000   F     4832                                     call            move28
1EDA D005           4833                                     pop                     rr5
1EDC D004           4834                                     pop                     rr4
1EDE D003           4835                                     pop                     rr3
1EE0 D002           4836                                     pop                     rr2
1EE2 1202B7         4837                               call          fldiv           ;Km     
                    4838     
1EE5 900000   F     4839                                     mov     dptr,#CHtho;100000
1EE8 120000   F     4840                                     call    ldc_ltemp                       ;r8..r11=8
1EEB 120203         4841                                     call    flmul                           ;r2..r5
1EEE 120343         4842                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1EF1 78A0           4843                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1EF3 120000   F     4844                                     call            saver2
                    4845                                     ;запись в рпзу в соотв ячейку
1EF6 7900           4846                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1EF8 7A50           4847                                     mov             r2,#50h
1EFA 7B00           4848                                     mov             r3,#00
1EFC 120499         4849                                     call    copyPP
                    4850                                     ;внести изменения во внешн озу
1EFF 78A0           4851                                     mov                     r0,#koefKD
1F01 120000   F     4852                                     call            resar2
1F04 792C           4853                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4854                             
1F06 EA             4855                                     mov                     a,r2
1F07 F3             4856                                             movx            @r1,a
1F08 09             4857                                             inc                     r1
1F09 EB             4858                                             mov                     a,r3
1F0A F3             4859                                             movx            @r1,a
1F0B 09             4860                                             inc                     r1
1F0C EC             4861                                             mov                     a,r4
1F0D F3             4862                                             movx            @r1,a
1F0E 09             4863                                             inc                     r1
1F0F ED             4864                                             mov                     a,r5
1F10 F3             4865                                             movx            @r1,a
                    4866                                     ;кофф *100000 и переведенный в hex формат
                    4867                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4868     ;стереть страницу пап прогр 
1F11 905000         4869                                     mov             dptr,#5000h
1F14 7FFF           4870                                     mov             r7,#0ffh
1F16 12043E         4871                                     call    cle256
                    4872     ;и запись в ячейки кофф памяти прогр (3000h) 
1F19 7FFF           4873                                     mov             r7,#0ffh
1F1B 7900           4874                                     mov             r1,#0                           ;external r
                             am
1F1D 905000         4875                                     mov             dptr,#5000h
1F20 120480         4876                                     call    wrpage
                    4877     
1F23 C20D           4878                                             clr             bifl_kt
1F25 120000   F     4879                                             call    loadus
1F28 020000   F     4880                                             jmp             fulkalib
                    4881     
                    4882     ;выч среднего по блоку
                    4883     ;вых r2..r5
1F2B                4884     vichmean:       
                    4885                                             ;;;;;;;;;;
1F2B 120000   F     4886                                             call            adrblok;dptr-адр ячейки 1й соотв бл
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    78

                             ока 
1F2E E582           4887                                             mov                     a,dpl
1F30 FF             4888                                             mov                     r7,a
1F31 E583           4889                                             mov                     a,dph
1F33 FE             4890                                             mov                     r6,a
1F34 120000   F     4891                                             call            resa_hl;save_bl->dptr
                    4892     
1F37 C3             4893                                                     clr             c; в начало блока?
1F38 E582           4894                                                     mov                     a,dpl
1F3A 9F             4895                                                     subb            a,r7
1F3B FF             4896                                                     mov                     r7,a
1F3C 7006           4897                                                     jnz                     oldmean
1F3E E583           4898                                                     mov                     a,dph
1F40 9E             4899                                                     subb            a,r6
1F41 FE             4900                                                     mov                     r6,a
1F42 6065           4901                                                     jz                      outmea;
                    4902     ;;;;;;;;;;
1F44                4903     oldmean:
1F44 120000   F     4904                                             call            resa_hl;save_bl->dptr
1F47 78D7           4905                                             mov                     r0,#copy_hl
1F49 E583           4906                                             mov                     a,dph
1F4B F6             4907                                             mov                     @r0,a
1F4C 08             4908                                             inc                     r0
1F4D E582           4909                                             mov                     a,dpl
1F4F F6             4910                                             mov                     @r0,a
1F50 78B8           4911                                             mov                     r0,#work
1F52 120000   F     4912                                             call            clear4
1F55 78D6           4913                                             mov                     r0,#chblok;volume
1F57 7600           4914                                             mov                     @r0,#0
1F59 120000   F     4915     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1F5C E582           4916                                             mov                     a,dpl
1F5E FF             4917                                             mov                     r7,a
1F5F E583           4918                                             mov                     a,dph
1F61 FE             4919                                             mov                     r6,a
                    4920     
1F62 78D7           4921                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1F64 E6             4922                                             mov                     a,@r0
1F65 F583           4923                                             mov                     dph,a
1F67 08             4924                                             inc                     r0
1F68 E6             4925                                             mov                     a,@r0
1F69 F582           4926                                             mov                     dpl,a
                    4927                                             
1F6B C3             4928                                             clr                     c;-4
1F6C E582           4929                                             mov                     a,dpl
1F6E 9404           4930                                             subb            a,#4
1F70 F582           4931                                             mov                     dpl,a
1F72 E583           4932                                             mov                     a,dph
1F74 9400           4933                                             subb            a,#0
1F76 F583           4934                                             mov                     dph,a;dptr-4
                    4935                                             ;;;;;;;;
1F78 79D7           4936                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1F7A E583           4937                                                     mov             a,dph
1F7C F7             4938                                               mov           @r1,a
1F7D 09             4939                                                     inc             r1
1F7E E582           4940                                                     mov             a,dpl
1F80 F7             4941                                                     mov             @r1,a
                    4942                                                     ;;;;;;;;;
1F81 C3             4943                                                     clr             c;пришли в начало блока?
1F82 E582           4944                                                     mov                     a,dpl
1F84 9F             4945                                                     subb            a,r7
1F85 FF             4946                                                     mov                     r7,a
1F86 7006           4947                                                     jnz                     nextmea
1F88 E583           4948                                                     mov                     a,dph
1F8A 9E             4949                                                     subb            a,r6
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    79

1F8B FE             4950                                                     mov                     r6,a
1F8C 601B           4951                                                     jz                      outmea;
                    4952                                                     
                    4953                                                     ;продолжаем сравнение
                    4954                                                     ;;;;;;;;;;;             
1F8E 120000   F     4955     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1F91 120402         4956                                             call            altof;->float
1F94 120000   F     4957                                             call            move28                  ;r8..r11
1F97 78B8           4958                                             mov                     r0,#work
1F99 120000   F     4959                                             call            resar2
1F9C 120166         4960                                             call            fladd
1F9F 78B8           4961                                             mov                     r0,#work
1FA1 120000   F     4962                                             call            saver2
1FA4 78D6           4963                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1FA6 06             4964                                             inc                     @r0
1FA7 80B0           4965                                             jmp                     meng
1FA9                4966     outmea:         
1FA9 120000   F     4967                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1FAC 120402         4968                                             call            altof;->float
1FAF 120000   F     4969                                             call            move28                  ;r8..r11
1FB2 78B8           4970                                             mov                     r0,#work
1FB4 120000   F     4971                                             call            resar2
1FB7 120166         4972                                             call            fladd
1FBA 78B8           4973                                             mov                     r0,#work
1FBC 120000   F     4974                                             call            saver2
1FBF E4             4975                                             clr                     a
1FC0 FA             4976                                             mov                     r2,a
1FC1 FB             4977                                             mov                     r3,a
1FC2 FC             4978                                             mov                     r4,a
1FC3 78D6           4979                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1FC5 E6             4980                                             mov                     a,@r0
1FC6 2401           4981                                             add                     a,#1
1FC8 FD             4982                                             mov                     r5,a
1FC9 120402         4983                                             call            altof;r2..r5 float
1FCC 120000   F     4984                                             call            move28
1FCF 78B8           4985                                             mov                     r0,#work
1FD1 120000   F     4986                                             call            resar2
1FD4 1202B7         4987                                             call            fldiv
1FD7 900000   F     4988                                             mov                     dptr,#ch_10      
1FDA 120000   F     4989                                     call            ldc_ltemp
1FDD 1202B7         4990                                     call            fldiv
1FE0 120343         4991                                             call            ftol                            ;->
                             hex
1FE3 120000   F     4992                                             call    maform
1FE6 784F           4993                                             mov             r0,#abin
1FE8 120000   F     4994                                             call    saver2
                    4995     ;;;;;;;;
                    4996                                             
1FEB 7853           4997                                             mov             r0,#adec
1FED 7952           4998                                             mov             r1,#abin+3      ;hex->10
1FEF 120000   F     4999                                             call    bindec
                    5000                                     
1FF2 785C           5001                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1FF4 7949           5002                                             mov             r1,#bufind+9
1FF6 7F05           5003                                             mov             r7,#5
1FF8 E6             5004     bufmea:                         mov             a,@r0
1FF9 2430           5005                                             add             a,#30h
1FFB F7             5006                                             mov             @r1,a
1FFC 19             5007                                             dec             r1
1FFD 18             5008                                             dec             r0
1FFE DFF8           5009                                             djnz    r7,bufmea
2000 7844           5010                                             mov             r0,#bufind+4
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    80

2002 762B           5011                                             mov             @r0,#2bh          
2004 300202         5012                                             jnb             znmat,nozmea
2007 762D           5013                                             mov             @r0,#2dh
2009 434B05         5014     nozmea:         orl             bufind+11,#05h
200C 22             5015                                             ret
                    5016     
                    5017     
200D E0             5018     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
200E FA             5019                                             mov                     r2,a
200F A3             5020                                             inc                     dptr
2010 E0             5021                                             movx            a,@dptr
2011 FB             5022                                             mov                     r3,a
2012 A3             5023                                             inc                     dptr
2013 E0             5024                                             movx            a,@dptr
2014 FC             5025                                             mov                     r4,a
2015 A3             5026                                             inc                     dptr
2016 E0             5027                                             movx            a,@dptr
2017 FD             5028                                             mov                     r5,a    
2018 22             5029                                             ret
                    5030     
2019 C3             5031     min4_hl:        clr                     c;-4
201A E582           5032                                             mov                     a,dpl
201C 9404           5033                                             subb            a,#4
201E F582           5034                                             mov                     dpl,a
2020 E583           5035                                             mov                     a,dph
2022 9400           5036                                             subb            a,#0
2024 F583           5037                                             mov                     dph,a;dptr-4
2026 22             5038                                             ret
                    5039     
2027 020000   F     5040     routmin:                jmp             outmin
                    5041     ;мин значение по по блоку
202A                5042     vichmin:        ;;;;;;;;;;
202A 120000   F     5043                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
202D E582           5044                                             mov                     a,dpl
202F FF             5045                                             mov                     r7,a
2030 E583           5046                                             mov                     a,dph
2032 FE             5047                                             mov                     r6,a
2033 120000   F     5048                                             call            resa_hl;save_bl->dptr
                    5049     
2036 C3             5050                                                     clr             c; в начало блока?
2037 E582           5051                                                     mov                     a,dpl
2039 9F             5052                                                     subb            a,r7
203A FF             5053                                                     mov                     r7,a
203B 7006           5054                                                     jnz                     oldmin
203D E583           5055                                                     mov                     a,dph
203F 9E             5056                                                     subb            a,r6
2040 FE             5057                                                     mov                     r6,a
2041 60E4           5058                                                     jz                      routmin;
                    5059     ;;;;;;;;;;
2043                5060     oldmin:
2043 120000   F     5061                                             call            resa_hl;save_bl->dptr
                    5062                                                                                     
                    5063     ;с конца блока адрес 2го измерение
2046 120000   F     5064                                             call            min4_hl
                    5065                                             
2049 78B8           5066                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5067                                             
204B E0             5068                                             movx            a,@dptr
204C F6             5069                                             mov                     @r0,a
204D 08             5070                                             inc                     r0
204E A3             5071                                             inc                     dptr
204F E0             5072                                             movx            a,@dptr
2050 F6             5073                                             mov                     @r0,a
2051 08             5074                                             inc                     r0
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    81

2052 A3             5075                                             inc                     dptr
2053 E0             5076                                             movx            a,@dptr
2054 F6             5077                                             mov                     @r0,a
2055 08             5078                                             inc                     r0
2056 A3             5079                                             inc                     dptr
2057 E0             5080                                             movx            a,@dptr
2058 F6             5081                                             mov                     @r0,a
2059 A3             5082                                             inc                     dptr
                    5083                                             
205A 78B8           5084                                             mov                     r0,#work
205C 120000   F     5085                                             call            resar2
205F 120402         5086                                             call            altof;->float;r2..r5
2062 78B8           5087                                             mov                     r0,#work
2064 120000   F     5088                                             call            saver2
                    5089     
2067 120000   F     5090                                             call            min4_hl
                    5091                                             ;call           min4_hl
                    5092     
206A 78D7           5093                                             mov                     r0,#copy_hl
206C E583           5094                                             mov                     a,dph
206E F6             5095                                             mov                     @r0,a
206F 08             5096                                             inc                     r0
2070 E582           5097                                             mov                     a,dpl
2072 F6             5098                                             mov                     @r0,a
                    5099                                     
2073 78D6           5100                                             mov                     r0,#chblok;volume
2075 7600           5101                                             mov                     @r0,#0
2077 120000   F     5102     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
207A E582           5103                                             mov                     a,dpl
207C FF             5104                                             mov                     r7,a
207D E583           5105                                             mov                     a,dph
207F FE             5106                                             mov                     r6,a
                    5107     
2080 78D7           5108                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2082 E6             5109                                             mov                     a,@r0
2083 F583           5110                                             mov                     dph,a
2085 08             5111                                             inc                     r0
2086 E6             5112                                             mov                     a,@r0
2087 F582           5113                                             mov                     dpl,a
                    5114                                             
2089 C3             5115                                             clr                     c;-4
208A E582           5116                                             mov                     a,dpl
208C 9404           5117                                             subb            a,#4
208E F582           5118                                             mov                     dpl,a
2090 E583           5119                                             mov                     a,dph
2092 9400           5120                                             subb            a,#0
2094 F583           5121                                             mov                     dph,a;dptr-4
                    5122                                             ;;;;;;;;
2096 79D7           5123                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
2098 E583           5124                                                     mov             a,dph
209A F7             5125                                               mov           @r1,a
209B 09             5126                                                     inc             r1
209C E582           5127                                                     mov             a,dpl
209E F7             5128                                                     mov             @r1,a
                    5129                                                     ;;;;;;;;;
209F C3             5130                                                     clr             c;пришли в начало блока?
20A0 E582           5131                                                     mov                     a,dpl
20A2 9F             5132                                                     subb            a,r7
20A3 FF             5133                                                     mov                     r7,a
20A4 7006           5134                                                     jnz                     nextmin
20A6 E583           5135                                                     mov                     a,dph
20A8 9E             5136                                                     subb            a,r6
20A9 FE             5137                                                     mov                     r6,a
20AA 601D           5138                                                     jz                      outmin;
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    82

                    5139                                                     
                    5140                                                     ;продолжаем сравнение
                    5141                                                     ;;;;;;;;;;;             
20AC 78B8           5142     nextmin:        mov                     r0,#work
20AE 120000   F     5143                                             call            resar2
                    5144                                             ;call           altof;->float;r2..r5
20B1 120000   F     5145                                             call            move28;->r8..r11
20B4 120000   F     5146                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5147     
20B7 120402         5148                                             call            altof;->float;r2..r5
                    5149                                             
20BA 1201D6         5150                                             call            flcmp
20BD 5005           5151                                             jnc                     nomini
20BF 78B8           5152                                             mov                     r0,#work;<
20C1 120000   F     5153                                             call            saver2;r2..r5
20C4 78D6           5154     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
20C6 06             5155                                             inc                     @r0
20C7 80AE           5156                                             jmp                     ming
                    5157     
20C9 78B8           5158     outmin:         mov                     r0,#work;1ое измерение блока
20CB 120000   F     5159                                             call            resar2
                    5160                                     ;       call            altof;->float;r2..r5
20CE 120000   F     5161                                             call            move28;->r8..r11
20D1 120000   F     5162                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5163     
20D4 120402         5164                                             call            altof;->float;r2..r5
                    5165                                             
20D7 1201D6         5166                                             call            flcmp
20DA 5005           5167                                             jnc                     minivix
20DC 78B8           5168                                             mov                     r0,#work;<
20DE 120000   F     5169                                             call            saver2;r2..r5
                    5170                                             ;;;;;;;;;
                    5171     
20E1 78B8           5172     minivix:        mov                     r0,#work
20E3 120000   F     5173                                             call            resar2
                    5174     
                    5175                                             ;call           altof;->float
                    5176                                     
20E6 900000   F     5177                                             mov                     dptr,#ch_10      
20E9 120000   F     5178                                             call            ldc_ltemp
20EC 1202B7         5179                                             call            fldiv
20EF 120343         5180                                             call            ftol                            ;->
                             hex
                    5181                                             ;;;
20F2 120000   F     5182                                             call            maform
20F5 784F           5183                                             mov                     r0,#abin
20F7 120000   F     5184                                             call            saver2
                    5185     ;;;;;;;;
                    5186                                             
20FA 7853           5187                                             mov             r0,#adec
20FC 7952           5188                                             mov             r1,#abin+3      ;hex->10
20FE 120000   F     5189                                             call    bindec
                    5190                                     
2101 785C           5191                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
2103 7949           5192                                             mov             r1,#bufind+9
2105 7F05           5193                                             mov             r7,#5
2107 E6             5194     bufmin:                         mov             a,@r0
2108 2430           5195                                             add             a,#30h
210A F7             5196                                             mov             @r1,a
210B 19             5197                                             dec             r1
210C 18             5198                                             dec             r0
210D DFF8           5199                                             djnz    r7,bufmin
210F 7844           5200                                             mov             r0,#bufind+4
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    83

2111 762B           5201                                             mov             @r0,#2bh          
2113 300202         5202                                             jnb             znmat,nozmin
2116 762D           5203                                             mov             @r0,#2dh
2118 434B05         5204     nozmin:         orl             bufind+11,#05h
211B 22             5205                                             ret
                    5206     
                    5207     
                    5208     
211C 020000   F     5209     routmax:                jmp             outmax
                    5210     ;мин значение по по блоку
211F                5211     vichmax:        ;;;;;;;;;;
211F 120000   F     5212                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
2122 E582           5213                                             mov                     a,dpl
2124 FF             5214                                             mov                     r7,a
2125 E583           5215                                             mov                     a,dph
2127 FE             5216                                             mov                     r6,a
2128 120000   F     5217                                             call            resa_hl;save_bl->dptr
                    5218     
212B C3             5219                                                     clr             c; в начало блока?
212C E582           5220                                                     mov                     a,dpl
212E 9F             5221                                                     subb            a,r7
212F FF             5222                                                     mov                     r7,a
2130 7006           5223                                                     jnz                     oldmax
2132 E583           5224                                                     mov                     a,dph
2134 9E             5225                                                     subb            a,r6
2135 FE             5226                                                     mov                     r6,a
2136 60E4           5227                                                     jz                      routmax;
                    5228     ;;;;;;;;;;
2138                5229     oldmax:
2138 120000   F     5230                                             call            resa_hl;save_bl->dptr
                    5231                                             
                    5232                                             
                    5233     ;с конца блока адрес 2го измерение
213B 120000   F     5234                                             call            min4_hl
                    5235                                             
213E 78B8           5236                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5237                                             
2140 E0             5238                                             movx            a,@dptr
2141 F6             5239                                             mov                     @r0,a
2142 08             5240                                             inc                     r0
2143 A3             5241                                             inc                     dptr
2144 E0             5242                                             movx            a,@dptr
2145 F6             5243                                             mov                     @r0,a
2146 08             5244                                             inc                     r0
2147 A3             5245                                             inc                     dptr
2148 E0             5246                                             movx            a,@dptr
2149 F6             5247                                             mov                     @r0,a
214A 08             5248                                             inc                     r0
214B A3             5249                                             inc                     dptr
214C E0             5250                                             movx            a,@dptr
214D F6             5251                                             mov                     @r0,a
214E A3             5252                                             inc                     dptr
                    5253                                             
214F 78B8           5254                                             mov                     r0,#work
2151 120000   F     5255                                             call            resar2
2154 120402         5256                                             call            altof;->float;r2..r5
2157 78B8           5257                                             mov                     r0,#work
2159 120000   F     5258                                             call            saver2
                    5259     
215C 120000   F     5260                                             call            min4_hl
                    5261                                     ;       call            min4_hl
                    5262     
215F 78D7           5263                                             mov                     r0,#copy_hl
2161 E583           5264                                             mov                     a,dph
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    84

2163 F6             5265                                             mov                     @r0,a
2164 08             5266                                             inc                     r0
2165 E582           5267                                             mov                     a,dpl
2167 F6             5268                                             mov                     @r0,a
                    5269                                     
2168 78D6           5270                                             mov                     r0,#chblok;volume
216A 7600           5271                                             mov                     @r0,#0
216C 120000   F     5272     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
216F E582           5273                                             mov                     a,dpl
2171 FF             5274                                             mov                     r7,a
2172 E583           5275                                             mov                     a,dph
2174 FE             5276                                             mov                     r6,a
                    5277     
2175 78D7           5278                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2177 E6             5279                                             mov                     a,@r0
2178 F583           5280                                             mov                     dph,a
217A 08             5281                                             inc                     r0
217B E6             5282                                             mov                     a,@r0
217C F582           5283                                             mov                     dpl,a
                    5284                                             
217E C3             5285                                             clr                     c;-4
217F E582           5286                                             mov                     a,dpl
2181 9404           5287                                             subb            a,#4
2183 F582           5288                                             mov                     dpl,a
2185 E583           5289                                             mov                     a,dph
2187 9400           5290                                             subb            a,#0
2189 F583           5291                                             mov                     dph,a;dptr-4
                    5292                                             ;;;;;;;;
218B 79D7           5293                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
218D E583           5294                                                     mov             a,dph
218F F7             5295                                               mov           @r1,a
2190 09             5296                                                     inc             r1
2191 E582           5297                                                     mov             a,dpl
2193 F7             5298                                                     mov             @r1,a
                    5299                                                     ;;;;;;;;;
2194 C3             5300                                                     clr             c;пришли в начало блока?
2195 E582           5301                                                     mov                     a,dpl
2197 9F             5302                                                     subb            a,r7
2198 FF             5303                                                     mov                     r7,a
2199 7006           5304                                                     jnz                     nextmax
219B E583           5305                                                     mov                     a,dph
219D 9E             5306                                                     subb            a,r6
219E FE             5307                                                     mov                     r6,a
219F 601D           5308                                                     jz                      outmax;
                    5309                                                     
                    5310                                                     ;продолжаем сравнение
                    5311                                                     ;;;;;;;;;;;             
21A1 78B8           5312     nextmax:        mov                     r0,#work
21A3 120000   F     5313                                             call            resar2
                    5314                                             ;call           altof;->float;r2..r5
21A6 120000   F     5315                                             call            move28;->r8..r11
21A9 120000   F     5316                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5317     
21AC 120402         5318                                             call            altof;->float;r2..r5
                    5319                                             
21AF 1201D6         5320                                             call            flcmp
21B2 4005           5321                                             jc                      nomaxi
21B4 78B8           5322                                             mov                     r0,#work;>
21B6 120000   F     5323                                             call            saver2;r2..r5
21B9 78D6           5324     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
21BB 06             5325                                             inc                     @r0
21BC 80AE           5326                                             jmp                     maxg
21BE 78B8           5327     outmax:         mov                     r0,#work;1ое измерение блока
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    85

21C0 120000   F     5328                                             call            resar2
                    5329                                     ;       call            altof;->float;r2..r5
21C3 120000   F     5330                                             call            move28;->r8..r11
21C6 120000   F     5331                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5332     
21C9 120402         5333                                             call            altof;->float;r2..r5
                    5334                                             
21CC 1201D6         5335                                             call            flcmp
21CF 4005           5336                                             jc                      maxvix
21D1 78B8           5337                                             mov                     r0,#work;>
21D3 120000   F     5338                                             call            saver2;r2..r5
                    5339                                             ;;;;;;;;;
                    5340     
21D6 020000   F     5341     maxvix:         jmp             minivix
                    5342     
                    5343     
21D9 78CF           5344     bufl_dec:       mov                     r0,#chbuf       
21DB 120000   F     5345                                             call            resar2  
21DE 900000   F     5346                                             mov                     dptr,#ch_1       
21E1 120000   F     5347                                             call            ldc_ltemp
21E4 1201D1         5348                                             call            flsub
21E7 78CF           5349                                             mov                     r0,#chbuf       
21E9 120000   F     5350                                             call            saver2  
21EC 22             5351                                             ret
                    5352     ;прерывание таймера Т2
21ED                5353     inter2:         
21ED E5DA           5354                                             mov             a,PCA0CPM0
21EF 54BF           5355                                             anl             a,#0bfh                         
21F1 F5DA           5356                                             mov             PCA0CPM0,a
                    5357                                             ;mov            a,T2CON         ;T2CON.2=0
                    5358                                             ;anl            a,#0fbh
21F3 75C800         5359                                             mov             T2CON,#00;a
21F6 C2AD           5360                                             clr             IE.5
21F8 32             5361                                             reti
                    5362     
                    5363     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
21F9                5364      ind:   ;;;
21F9 E5E7           5365                             mov             a,EIE2
21FB FA             5366                             mov             r2,a;save
21FC 75E700         5367                             mov             EIE2,#00H
                    5368     
21FF 120000   F     5369                     call    mign
2202 7840           5370                      mov            r0,#bufind;+11
2204 7F0C           5371                      mov            r7,#12
2206 C287           5372      nexin: clr             p0.7;6
2208 E6             5373                     mov             a,@r0
2209 F59B           5374                     mov             SPI0DAT,a
220B 20FBFD         5375                     jb              TXBSY,$
220E D287           5376                     setb    p0.7;6
2210 120000   F     5377                     call    z_9             ;25mks
2213 08             5378                     inc             r0;dec          r0
2214 DFF0           5379                     djnz    r7,nexin
2216 EA             5380                     mov             a,r2
2217 F5E7           5381                     mov             EIE2,a;#30H
                    5382     
2219 22             5383                ret
                    5384     
                    5385     
                    5386     ;$include (d:\amp\subr7.asm) 
                +1  5387     
                +1  5388     ;тест интерфейса
221A            +1  5389     testrs: ;jb     p0.3,goprogr
221A C2AC       +1  5390                                     clr     IE.4
221C 759955     +1  5391     test1:  mov     SBUF0,#55h
221F 3099FD     +1  5392                                     jnb     SCON0.1,$
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    86

2222 78B8       +1  5393                                     mov     r0,#work;chtest
2224 76BE       +1  5394                                     mov     @r0,#190d;60
                +1  5395     
2226 309825     +1  5396     test01: jnb     SCON0.0,test2
2229 E599       +1  5397                                     mov     a,SBUF0
222B B45512     +1  5398                                     cjne    a,#55h,test3
222E C299       +1  5399     test4:  clr     SCON0.1
2230 C298       +1  5400                                     clr     SCON0.0
2232 7D0A       +1  5401                                     mov     r5,#10
2234 7840       +1  5402                                     mov     r0,#bufind              ;- - - -
2236 762D       +1  5403     test04: mov     @r0,#2dh
2238 08         +1  5404                                     inc     r0
2239 DDFB       +1  5405                                     djnz    r5,test04
223B 120000   F +1  5406                                     call    ind
223E 80DC       +1  5407                                     jmp     test1
2240            +1  5408     test3:  
2240 753933     +1  5409                                     mov     nuerr,#33h
2243 120000   F +1  5410                                     call    error           ;на кран прибора ERR 3
                +1  5411                             
2246 120000   F +1  5412                                     call    ind;
2249 120000   F +1  5413                                     call    z_01s           ;100ms
224C 80E0       +1  5414                                     jmp     test4
224E 78B8       +1  5415     test2:  mov     r0,#work;chtest
2250 B60002     +1  5416                                     cjne    @r0,#0,test02
2253 8003       +1  5417                                     jmp     test5
2255 16         +1  5418     test02: dec     @r0
2256 80CE       +1  5419                                     jmp     test01
2258 120000   F +1  5420     test5:  call    z_1ms           ;1ms
225B C299       +1  5421                                     clr     SCON0.1
                +1  5422             
225D 753933     +1  5423                                     mov     nuerr,#33h
2260 120000   F +1  5424                                     call    error           ;на кран прибора ERR 3
                +1  5425                                     
2263 120000   F +1  5426                                     call    ind
2266 120000   F +1  5427                                     call    z_01s           ;100ms
2269 80B1       +1  5428                                     jmp     test1   
                +1  5429     
                +1  5430     
                +1  5431     
                +1  5432     
                +1  5433     
226B 7A08       +1  5434     zapadc:   mov R2,#8
226D D297       +1  5435     sdv:      setb P1.7
226F 33         +1  5436               rlc A
2270 9296       +1  5437                     mov P1.6,C
2272 120000   F +1  5438                     call tim2
                +1  5439                                     
2275 C297       +1  5440                     clr P1.7
2277 120000   F +1  5441                     call tim2
227A DAF1       +1  5442                     djnz R2,sdv
227C D296       +1  5443                     setb P1.6
227E 22         +1  5444                     ret
                +1  5445     
227F 7A08       +1  5446     chtadc:   mov R2,#8
2281 D297       +1  5447     sdv1:     setb P1.7
2283 120000   F +1  5448               call tim2
2286 C297       +1  5449                     clr P1.7
2288 A296       +1  5450                     mov C,P1.6
228A 33         +1  5451                     rlc A
228B 120000   F +1  5452                     call tim2
228E DAF1       +1  5453                     djnz R2,sdv1
2290 22         +1  5454                     ret
                +1  5455     
2291 7E30       +1  5456     tim:      mov R6,#30h;38h
2293 DEFE       +1  5457     tim1:     djnz R6,tim1
2295 22         +1  5458               ret
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    87

                +1  5459               
2296 7E10       +1  5460     tim2:     mov R6,#10h;14h
2298 DEFE       +1  5461     tim3:     djnz R6,tim3
229A 22         +1  5462               ret
                +1  5463     
                +1  5464     ;запись из acc
229B C3         +1  5465     write_x1: clr   c
229C            +1  5466     writeD_x1:
229C 92B1       +1  5467                       mov P3.1,c        ;запись
229E F5A0       +1  5468               mov P2,A
22A0 D2B3       +1  5469                       setb P3.3
22A2 120000   F +1  5470                       call z_5
22A5 C2B3       +1  5471                       clr P3.3
22A7 75A0FF     +1  5472                       mov P2,#0FFh
22AA 22         +1  5473                       ret
                +1  5474     
                +1  5475     ;чтение в acc
22AB C3         +1  5476     read_x2:  clr   c  
22AC 92B1       +1  5477               mov P3.1,c        ;чтение
22AE D2B2       +1  5478               setb P3.2
22B0 D2B3       +1  5479                       setb P3.3
22B2 120000   F +1  5480                     call z_5
22B5 E5A0       +1  5481                       mov A,P2
22B7 C2B3       +1  5482                       clr P3.3
22B9 C2B2       +1  5483                       clr P3.2
22BB 22         +1  5484                       ret
                +1  5485     
                +1  5486     
22BC 120000   F +1  5487     loop:     call read_x2;x2    ;ожидание флага готовности
22BF 20E7FA     +1  5488                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
22C2 22         +1  5489                        ret           ;возврат, если бит А(7)<>1
                +1  5490                                      
                +1  5491                                        
                +1  5492     
                +1  5493     
                +1  5494     
                +1  5495     
                +1  5496     
                +1  5497     
                +1  5498     
                +1  5499     ;принимаемый байт в acc
                +1  5500     ;прием байта последовательным кодом старшими разрядами вперед
22C3 7A08       +1  5501     read:    mov R2,#8
22C5 C297       +1  5502     re1:     clr P1.7;P1.2
22C7 120000   F +1  5503              call tim2        ;5mks
22CA A294       +1  5504                     mov C,P1.4;P1.0
22CC 33         +1  5505                     rlc A           
22CD D297       +1  5506                     setb P1.7;P1.2
22CF 120000   F +1  5507                     call tim2
22D2 DAF1       +1  5508                     djnz R2,re1
22D4 22         +1  5509                     ret
                +1  5510     
                +1  5511      ;in r0-count   
                +1  5512     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5513     ;r2..r5 -значение счетчика
22D5            +1  5514     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
22D5 E6         +1  5515                     mov                     a,@r0
22D6 FC         +1  5516                     mov                     r4,a
22D7 08         +1  5517                     inc                     r0
22D8 E6         +1  5518                     mov                     a,@r0
22D9 FD         +1  5519                     mov                     r5,a
22DA 7B00       +1  5520                     mov                     r3,#0
22DC 7A00       +1  5521                     mov                     r2,#0
22DE 750800     +1  5522                     mov                     r8,#0;clr                       r8
22E1 750900     +1  5523                     mov                     r9,#0;clr                       r9
22E4 120000   F +1  5524                     call            lcmp
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    88

22E7 22         +1  5525                     ret
                +1  5526     
                +1  5527     
                +1  5528     ;in-r1-count
22E8            +1  5529     chdec:          ;mov            r1,#chavt               ;chavt-1
22E8 E7         +1  5530                             mov             a,@r1
22E9 FC         +1  5531                             mov             r4,a
22EA 09         +1  5532                             inc             r1
22EB E7         +1  5533                             mov             a,@r1
22EC FD         +1  5534                             mov             r5,a
22ED C202       +1  5535                             clr             rr2
22EF C203       +1  5536                             clr             rr3
22F1 900000   F +1  5537                             mov             dptr,#ch1        
22F4 120000   F +1  5538                             call    ldc_ltemp
22F7 120000   F +1  5539                             call    lsub
22FA ED         +1  5540                             mov             a,r5
22FB F7         +1  5541                             mov             @r1,a
22FC 19         +1  5542                             dec             r1
22FD EC         +1  5543                             mov             a,r4
22FE F7         +1  5544                             mov             @r1,a
                +1  5545                             
22FF 22         +1  5546                             ret      
                +1  5547     
                +1  5548     
                +1  5549     
                +1  5550     
2300            +1  5551     loadUS: ;если идет тест измерения ус восстановить для теста
2300 201533     +1  5552                                     jb              biteizm,yestest
2303 79AE       +1  5553                                             mov             r1,#diap
2305 E7         +1  5554                             mov             a,@r1
2306 23         +1  5555                             rl              a;*2
2307 FC         +1  5556                             mov             r4,a                    ;save a
2308 900000   F +1  5557                             mov             dptr,#tabus
230B 93         +1  5558                             movc    a,@a+dptr
230C FA         +1  5559                             mov             r2,a                    ;high byte
230D E584       +1  5560                             mov             a,p4
230F 5401       +1  5561                             anl             a,#01
2311 4A         +1  5562                             orl             a,r2
2312 F584       +1  5563                             mov             p4,a
2314 0C         +1  5564                             inc             r4
2315 EC         +1  5565                             mov             a,r4
2316 93         +1  5566                             movc    a,@a+dptr
2317 FB         +1  5567                             mov             r3,a                    ;low byte
2318 E585       +1  5568                             mov             a,p5
231A 5401       +1  5569                             anl             a,#01
231C 4B         +1  5570                             orl             a,r3
231D F585       +1  5571                             mov             p5,a
231F 799A       +1  5572                             mov             r1,#parT
2321 B7010E     +1  5573                             cjne    @r1,#1,bret
2324 79AE       +1  5574                             mov             r1,#diap                  ;10s (parT=1)
2326 7405       +1  5575                             mov             a,#5                      ;10-8..10-11 p4.1=1
2328 C3         +1  5576                             clr             c
2329 97         +1  5577                             subb    a,@r1
232A 5006       +1  5578                             jnc             bret
232C E584       +1  5579                             mov             a,p4
232E 4402       +1  5580                             orl             a,#02
2330 F584       +1  5581                             mov             p4,a                     ;10-8..10-11 p4.1=1
2332 120000   F +1  5582     bret:      call          louizm         ;us если вкл кн ИЗМЕР
2335 22         +1  5583                             ret
2336            +1  5584     yestest:
2336 120000   F +1  5585                             call            lotpus          ;ус теста измерения
2339 22         +1  5586                             ret
                +1  5587                             
                +1  5588     ;загр ус для кор 0
                +1  5589     ;dptr-
233A E4         +1  5590     lospus:         clr             a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    89

                +1  5591                             ;movc   a,@a+dptr
                +1  5592                             ;mov            r2,a                    ;high byte
                +1  5593                             ;mov            a,p4
                +1  5594                             ;anl            a,#01
                +1  5595                             ;orl            a,r2
                +1  5596                             ;mov            p4,a
                +1  5597                             ;inc            dptr
233B E4         +1  5598                             clr             a
233C 93         +1  5599                             movc    a,@a+dptr
233D FB         +1  5600                             mov             r3,a                    ;low byte
233E E585       +1  5601                             mov             a,p5
2340 54BF       +1  5602                             anl             a,#0bfh;01
2342 4B         +1  5603                             orl             a,r3
2343 F585       +1  5604                             mov             p5,a
2345 22         +1  5605                             ret
                +1  5606     
2346 80         +1  5607     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5608     
                +1  5609     ;us кнопка измерения выкл
2347 88D6       +1  5610     tabus:     db           88h,0d6h         ;10-2
2349 88F6       +1  5611                             db      88h,0f6h         ;10-3
234B 88D6       +1  5612                             db              88h,0d6h         ;10-4
234D 88F6       +1  5613                             db              88h,0f6h         ;10-5
234F 9AD6       +1  5614                             db      9ah,0d6h         ;10-6
2351 9AF6       +1  5615                             db              9ah,0f6h         ;10-7
2353 ACD6       +1  5616                             db              0ach,0d6h        ;10-8
2355 ACF6       +1  5617                             db      0ach,0f6h        ;10-9
2357 C8D6       +1  5618                             db              0c8h,0d6h        ;10-10
2359 C8F6       +1  5619                             db              0c8h,0f6h        ;10-11
                +1  5620     
235B            +1  5621     tabt11: 
235B 66E6       +1  5622                             db              66h,0e6h;10-11
235D            +1  5623     tabt9:  
235D 32E6       +1  5624                             db              32h,0e6h;10-9
235F            +1  5625     tabt7:  
235F 18EE       +1  5626                             db              18h,0eeh;10-7
                +1  5627     
                +1  5628      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5629     ;в зав от parT (Tизм)
2361 79B7       +1  5630     loadT:          mov             r1,#load;parT
2363 7840       +1  5631     lolevT:         mov             r0,#bufind+0
2365 7B0A       +1  5632                             mov             r3,#10
2367 75F00A     +1  5633                             mov             b,#10
236A E7         +1  5634                             mov             a,@r1
236B A4         +1  5635                             mul             ab
236C FC         +1  5636                             mov             r4,a                    ;save a
236D 900000   F +1  5637                             mov             dptr,#textT
2370 93         +1  5638             lod1:   movc    a,@a+dptr
2371 F6         +1  5639                             mov             @r0,a
2372 08         +1  5640                             inc             r0
2373 0C         +1  5641                             inc             r4
2374 EC         +1  5642                             mov             a,r4
2375 DBF9       +1  5643                             djnz    r3,lod1
2377 534B03     +1  5644                             anl                     bufind+11,#03h          ;гашение точек
237A 22         +1  5645                             ret     
                +1  5646     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5647     ;dptr-адр строки текста         
237B            +1  5648     lotext:         
237B 7B0A       +1  5649                             mov             r3,#10
237D 7840       +1  5650                             mov             r0,#bufind+0
237F E4         +1  5651     lodt:           clr             a
2380 93         +1  5652                             movc    a,@a+dptr
2381 F6         +1  5653                             mov             @r0,a
2382 08         +1  5654                             inc             r0
2383 A3         +1  5655                             inc             dptr
2384 DBF9       +1  5656                             djnz    r3,lodt
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    90

2386 534B03     +1  5657                             anl                     bufind+11,#03h          ;гашение точек
2389 22         +1  5658                             ret                                     
                +1  5659     
                +1  5660     
                +1  5661     
                +1  5662     
                +1  5663      ;задержка 100 мкс
238A 7978       +1  5664     z_100:    mov R1,#78h     ;загрузка первого числа
238C 7A02       +1  5665     z100:     mov R2,#2h     ;загрузка второго числа
238E DAFE       +1  5666     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
2390 D9FA       +1  5667               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
2392 22         +1  5668               ret           
                +1  5669     
                +1  5670     ;задержка 34 мкс
2393 7B8B       +1  5671     z_5:      mov R3,#8Bh      ;загрузка числа
2395 DBFE       +1  5672     ct:       djnz R3,ct
2397 22         +1  5673               ret
                +1  5674     
                +1  5675     ;задержка 15 мс
2398 79FA       +1  5676     z_15:     mov R1,#0FAh    ;загрузка первого числа
239A 7AED       +1  5677     z15:      mov R2,#0EDh   ;загрузка второго числа
239C DAFE       +1  5678     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
239E D9FA       +1  5679               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
23A0 22         +1  5680               ret   
                +1  5681                                               
                +1  5682      ;задержка 1 мс
23A1 7910       +1  5683     z_1ms:     mov R1,#10h     
23A3 7AED       +1  5684     ss1:       mov R2,#0EDh    
23A5 DAFE       +1  5685                djnz R2, $    
23A7 D9FA       +1  5686                djnz R1, ss1   
23A9 22         +1  5687                ret   
                +1  5688     
                +1  5689      ;????????
                +1  5690     ;задержка 1с
23AA 7D1F       +1  5691     z_1s:   mov             r5,#01fh 
23AC 7EFF       +1  5692     co2s:   mov     R6,#0ffh     
23AE 7FFF       +1  5693     z1s:     mov    R7,#0ffh     
23B0 DFFE       +1  5694     co1s:   djnz    R7, co1s        
23B2 DEFA       +1  5695             djnz    R6, z1s 
23B4 DDF6       +1  5696                     djnz    r5,co2s
23B6 22         +1  5697               ret
                +1  5698     ;задержка 0,1с
23B7 7D03       +1  5699     z_01s:           mov            r5,#03h 
23B9 7EFF       +1  5700     co02s:          mov     R6,#0ffh     
23BB 7FFF       +1  5701     z01s:           mov     R7,#0ffh     
23BD DFFE       +1  5702                             djnz    R7, $   
23BF DEFA       +1  5703                     djnz    R6, z01s 
23C1 DDF6       +1  5704                             djnz    r5,co02s
23C3 22         +1  5705                      ret
                +1  5706                                               
                +1  5707     ;задержка 0,5с
23C4 7D0D       +1  5708     z_05s:           mov            r5,#0dh 
23C6 7EFF       +1  5709     co05s:                  mov     R6,#0ffh     
23C8 7FFF       +1  5710     z05s:           mov     R7,#0ffh     
23CA DFFE       +1  5711                                     djnz    R7, $   
23CC DEFA       +1  5712                     djnz    R6, z05s 
23CE DDF6       +1  5713                                             djnz    r5,co05s
23D0 22         +1  5714                      ret                                                     
                +1  5715                                                               
23D1 000007FF   +1  5716     chzap:  db      00,00,07h,0ffh             
23D5 00000000   +1  5717     ch0:    db      00,00,00,00
23D9 0000000A   +1  5718     ch10:   db      00,00,00,0ah                            ;10
23DD 00000005   +1  5719     ch5:    db      00,00,00,05                                             ;5
23E1 00000004   +1  5720     ch4:    db      00,00,00,04                                             ;4
23E5 000003B9   +1  5721     ch954:  db 00,00,03,0b9h                                                ;954
23E9 000003E8   +1  5722     ch10000:        db 00,00,03h,0e8h                                               ;10000
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    91

23ED 00000064   +1  5723     ch100:  db 00,00,00,64h ;100
23F1 00000002   +1  5724     ch2:    db      00,00,00,02                                             
                +1  5725     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5726     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5727     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
23F5 00000001   +1  5728     ch1:    db  00,00,00,01
23F9 49742400   +1  5729     ch_mln: db      49h,74h,24h,00;10*6
23FD 3F800000   +1  5730     ch_1:   db      3fh,80h,00,00   
2401 40000000   +1  5731     ch_2:   db      40h,00,00,00;2
2405 40800000   +1  5732     ch_4:   db      40h,80h,00,00;4 
2409 40A00000   +1  5733     ch_5:   db      40h,0a0h,00,00;5
240D 40E00000   +1  5734     ch_7:   db      40h,0e0h,00,00;7
                +1  5735             
2411 3F741EDF   +1  5736     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
2415 47C35000   +1  5737     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
2419 3F800347   +1  5738     KD:             db      3fh,80h,03h,47h;1,0001
241D 48435000   +1  5739     CH2tho: db      48h,43h,50h,00;200000
2421 4856D800   +1  5740     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
2425 4856D800   +1  5741     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
2429 461C4000   +1  5742     ch_10th:db  46h,1ch,40h,00;10000-2710h
242D 41200000   +1  5743     ch_10:  db      41h,20h,00,00;10d
2431 48742400   +1  5744     ch_250: db      48h,74h,24h,00;250000
2435 000186A0   +1  5745     chk:            db      00,01,86h,0a0h;
2439 00000320   +1  5746     ch320h: db      00,00,03h,20h;320h=800d
243D 00000150   +1  5747     ch150h: db      00,00,01h,50h;150h
2441 C0400000   +1  5748     ch_m3:  db      0c0h,40h,00,00;-3
                +1  5749     
                +1  5750     
                +1  5751     ;r1- мл байт 2х байтного числа
2445            +1  5752     tenmin:         ;-10
2445 C3         +1  5753                             clr             c
2446 E7         +1  5754                     mov             a,@r1
2447 9405       +1  5755                             subb    a,#5;10
2449 F7         +1  5756                             mov             @r1,a
244A 19         +1  5757                             dec             r1
244B E7         +1  5758                             mov             a,@r1
244C 9400       +1  5759                             subb    a,#0
244E F7         +1  5760                             mov             @r1,a
244F 22         +1  5761                             ret
                +1  5762       ;r0-обнуление ячеек памяти  
2450 7F04       +1  5763       clear4:        mov    r7,#4
2452 E4         +1  5764                             clr             a
2453 F6         +1  5765       cl4:          mov             @r0,a
2454 08         +1  5766                             inc             r0
2455 DFFC       +1  5767                             djnz    r7,cl4
2457 22         +1  5768                             ret     
                +1  5769     
                +1  5770      ;r0-обнуление ячеек памяти 
                +1  5771      ;R7- 
2458            +1  5772       clearN:        
2458 E4         +1  5773                             clr             a
2459 F6         +1  5774       cl4N:         mov             @r0,a
245A 08         +1  5775                             inc             r0
245B DFFC       +1  5776                             djnz    r7,cl4N
245D 22         +1  5777                             ret     
                +1  5778     
                +1  5779       ;чтение номера байта с индикатора(2байта)
                +1  5780     ;bufind+8..bufind+9
                +1  5781     ;-  - - -
                +1  5782     ;- - - - - - - - - -
                +1  5783     ;adec..adec+9
                +1  5784     ;ст            мл
245E 7848       +1  5785     upak2:  mov             r0,#bufind+8;
2460 795C       +1  5786                     mov             r1,#adec+9
2462 7F02       +1  5787                     mov             r7,#2;2bait
2464 C3         +1  5788     upa2:   clr             c
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    92

2465 E6         +1  5789                     mov             a,@r0
2466 9430       +1  5790                     subb    a,#30h
2468 F7         +1  5791                     mov             @r1,a
2469 18         +1  5792                     dec             r0
246A 19         +1  5793                     dec             r1
246B DFF7       +1  5794                     djnz    r7,upa2
246D 22         +1  5795                     ret  
                +1  5796     
                +1  5797     
                +1  5798         
                +1  5799      ;bufind+4..bufind+9
                +1  5800     ;-  - - -
                +1  5801     ;- - - - - - - - - -
                +1  5802     ;adec..adec+9
                +1  5803     ;ст            мл
246E 7849       +1  5804     upak:   mov             r0,#bufind+9;
2470 795C       +1  5805                     mov             r1,#adec+9
2472 7F06       +1  5806                     mov             r7,#6
2474 C3         +1  5807     upa:    clr             c
2475 E6         +1  5808                     mov             a,@r0
2476 9430       +1  5809                     subb    a,#30h
2478 F7         +1  5810                     mov             @r1,a
2479 18         +1  5811                     dec             r0
247A 19         +1  5812                     dec             r1
247B DFF7       +1  5813                     djnz    r7,upa
247D 22         +1  5814                     ret
                +1  5815     
                +1  5816      ;чтение номера байта с индикатора(3байта)
                +1  5817     ;bufind+3..bufind+9
                +1  5818     ;-  - - -
                +1  5819     ;- - - - - - - - - -
                +1  5820     ;adec..adec+9
                +1  5821     ;ст            мл
247E 7849       +1  5822     upak3:  mov             r0,#bufind+9;
2480 795C       +1  5823                     mov             r1,#adec+9
2482 7F03       +1  5824                     mov             r7,#3;3bait
2484 C3         +1  5825     upa1:   clr             c
2485 E6         +1  5826                     mov             a,@r0
2486 9430       +1  5827                     subb    a,#30h
2488 F7         +1  5828                     mov             @r1,a
2489 18         +1  5829                     dec             r0
248A 19         +1  5830                     dec             r1
248B DFF7       +1  5831                     djnz    r7,upa1
248D 22         +1  5832                     ret
                +1  5833     
                +1  5834     ;вых-r2,r3-адрес ячее памяти прогр
248E            +1  5835     findkoef:
248E 79AE       +1  5836                                     mov             r1,#diap
2490 E7         +1  5837                                     mov             a,@r1
2491 23         +1  5838                                     rl              a                                          
                                          ;diap*2(2bait )
2492 FC         +1  5839                                     mov             r4,a                                    ;sa
                             ve
2493 900000   F +1  5840                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5841                                     
2496 93         +1  5842                                     movc    a,@a+dptr                       ;ст байт
2497 FA         +1  5843                                     mov             r2,a
2498 A3         +1  5844                                     inc             dptr
2499 EC         +1  5845                                     mov             a,r4
249A 93         +1  5846                                     movc    a,@a+dptr
249B FB         +1  5847                                     mov             r3,a                    ;мл байт
249C 22         +1  5848                                     ret
                +1  5849     ;r2..r5 в опр яч внешн озу
249D            +1  5850     findext:
249D 79AE       +1  5851                                     mov             r1,#diap
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    93

249F E7         +1  5852                                     mov             a,@r1
24A0 23         +1  5853                                     rl              a                                          
                                          ;diap*2(2bait )
24A1 23         +1  5854                                     rl              a                                          
                                          ;diap*2(2bait )
24A2 F9         +1  5855                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5856                                     
24A3 22         +1  5857                                     ret
                +1  5858     
                +1  5859     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5860     ;(5000h..5027h)
24A4 5000       +1  5861     diKDw:  dw              5000h                   ;10-2
24A6 5004       +1  5862                                     dw              5004h                   ;10-3
24A8 5008       +1  5863                                     dw              5008h                   ;10-4
24AA 500C       +1  5864                                     dw              500ch                   ;10-5
24AC 5010       +1  5865                                     dw              5010h                   ;10-6
24AE 5014       +1  5866                                     dw              5014h                   ;10-7
24B0 5018       +1  5867                                     dw              5018h                   ;10-8
24B2 501C       +1  5868                                     dw              501ch                   ;10-9
24B4 5020       +1  5869                                     dw              5020h                   ;10-10
24B6 5024       +1  5870                                     dw              5024h                   ;10-11
24B8 5028       +1  5871     dipar:  dw              5028h                   ;parol
24BA 502C       +1  5872     diKm:           dw              502ch                   ;Km для теста измерения
24BC 000186A0   +1  5873     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5874     
24C0 AA08       +1  5875     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
24C2 AB09       +1  5876                                             mov     r3,ltemp+1
24C4 AC0A       +1  5877                                             mov     r4,ltemp+2
24C6 AD0B       +1  5878                                             mov     r5,ltemp+3
24C8 22         +1  5879                                             ret
                +1  5880     ;bufind+4..bufind+9
                +1  5881     ;-  - - -
                +1  5882     ;- - - - - - - - - -
                +1  5883     ;adec..adec+9
                +1  5884     ;ст            мл
24C9 7847       +1  5885     upakA:  mov             r0,#bufind+7;
24CB 795C       +1  5886                     mov             r1,#adec+9
24CD 7F04       +1  5887                     mov             r7,#4
24CF C3         +1  5888     upaa4:  clr             c
24D0 E6         +1  5889                     mov             a,@r0
24D1 9430       +1  5890                     subb    a,#30h
24D3 F7         +1  5891                     mov             @r1,a
24D4 18         +1  5892                     dec             r0
24D5 19         +1  5893                     dec             r1
24D6 DFF7       +1  5894                     djnz    r7,upaa4
24D8 22         +1  5895                     ret
                +1  5896     
                +1  5897     ;bufind+4..bufind+9
                +1  5898     ;-  - - -
                +1  5899     ;- - - - - - - - - -
                +1  5900     ;adec..adec+9
                +1  5901     ;ст            мл
24D9 7848       +1  5902     upakB:  mov             r0,#bufind+8;
24DB 795C       +1  5903                     mov             r1,#adec+9
24DD 7F05       +1  5904                     mov             r7,#5
24DF C3         +1  5905     upab:   clr             c
24E0 E6         +1  5906                     mov             a,@r0
24E1 9430       +1  5907                     subb    a,#30h
24E3 F7         +1  5908                     mov             @r1,a
24E4 18         +1  5909                     dec             r0
24E5 19         +1  5910                     dec             r1
24E6 DFF7       +1  5911                     djnz    r7,upab
24E8 C21B       +1  5912                     clr                     bitznB
24EA E543       +1  5913                     mov             a,bufind+3
24EC B42D02     +1  5914                     cjne            a,#2dh,abret
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    94

24EF D21B       +1  5915                     setb            bitznB
24F1            +1  5916     abret:
24F1 22         +1  5917                     ret
24F2            +1  5918     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
24F2 4E6E6AA8   +1  5919                                             db      4eh,6eh,6ah,0a8h;10**9
24F6 43FA0000   +1  5920     CH_500:         db              43h,0fah,00,00;1fah=500
24FA 4856D800   +1  5921     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
24FE 49742400   +1  5922     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5923     
                +1  5924     
                +1  5925     
                +1  5926     ;управление AD7731
                +1  5927     ;r4=b1 r5=b2
2502            +1  5928     iniacp: ;управление AD7731
2502 7403       +1  5929                             mov             a,#03
                +1  5930     
2504 120000   F +1  5931                             call    write
2507 EC         +1  5932                             mov             a,r4;#80h
2508 120000   F +1  5933                             call    write
250B ED         +1  5934                             mov             a,r5;#04
250C 120000   F +1  5935                             call    write
250F 7402       +1  5936                             mov             a,#02
2511 120000   F +1  5937                             call    write
2514 74A1       +1  5938                             mov             a,#0a1h
2516 120000   F +1  5939                             call    write
2519 7474       +1  5940                             mov             a,#74h
251B 120000   F +1  5941                             call    write
251E 2095FD     +1  5942                             jb              p1.5,$;p1.3,$
2521 7402       +1  5943                             mov             a,#02
2523 120000   F +1  5944                             call    write
2526 7481       +1  5945                             mov             a,#81h
2528 120000   F +1  5946                             call    write
252B 7474       +1  5947                             mov             a,#74h
252D 120000   F +1  5948                             call    write
2530 2095FD     +1  5949                             jb              p1.5,$;p1.3,$
2533 7402       +1  5950                             mov             a,#02
2535 120000   F +1  5951                             call    write
2538 7421       +1  5952                             mov             a,#21h
253A 120000   F +1  5953                             call    write
253D 7474       +1  5954                             mov             a,#74h
253F 120000   F +1  5955                             call    write
2542 22         +1  5956                             ret
                +1  5957                             ;;;;;;;;;;;;;;;;
                +1  5958     ;;;;;;;;;;;;;;;;;
                +1  5959     ;;;;;;;;;;;;;;;;;
2543 0000       +1  5960     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
2545 6000       +1  5961                                     db              60h,00h;40h,04h         ;10s
2547 6000       +1  5962                                     db              60h,00;40h,04h          ;1s
2549 6001       +1  5963                                     db              60h,01h;40h,04h         ;0,1s
254B 6001       +1  5964                                     db              60h,01;00h;20h,04h              ;50ms
254D 6001       +1  5965                                     db              60h,01;00h;20h,04h               ;10ms
254F 1333       +1  5966                                     db              13h,33h;32h             ;2ms
                +1  5967     
                +1  5968     ;загр В1,В2 в завис от Т                                
2551 799A       +1  5969     loab12:                 mov             r1,#parT
2553 900000   F +1  5970                                     mov             dptr,#tabB1_2
2556 E7         +1  5971                                     mov             a,@r1
2557 23         +1  5972                                     rl              a;*2
2558 FF         +1  5973                                     mov             r7,a                    ;save a
2559 93         +1  5974                                     movc    a,@a+dptr
255A FC         +1  5975                                     mov             r4,a   ;b1
255B 0F         +1  5976                                     inc             r7
255C EF         +1  5977                                     mov             a,r7
255D 93         +1  5978                                     movc    a,@a+dptr
255E FD         +1  5979                                     mov             r5,a
                +1  5980                                     ;после загр В1,2 загр упр слово для нового Т
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    95

                +1  5981                             
255F 22         +1  5982                                     ret
                +1  5983     
                +1  5984     
2560 7852       +1  5985     loadr2: mov             r0,#abin+3              ;r2..r5
2562 E6         +1  5986                     mov             a,@r0                   ; ст мл   
2563 FA         +1  5987                     mov             r2,a
2564 18         +1  5988                     dec             r0
2565 E6         +1  5989                     mov             a,@r0
2566 FB         +1  5990                     mov             r3,a
2567 18         +1  5991                     dec             r0
2568 E6         +1  5992                     mov             a,@r0
2569 FC         +1  5993                     mov             r4,a
256A 18         +1  5994                     dec             r0
256B E6         +1  5995                     mov             a,@r0
256C FD         +1  5996                     mov             r5,a
256D 22         +1  5997                     ret
                +1  5998                                             
                +1  5999      ;;;;;;;;;;;;;;;;;;;      
                +1  6000      ;загрузка KD в зависимости от диап изм  
                +1  6001      ;koef->r8..r11
256E 78AE       +1  6002     loadKD:                 mov             r0,#diap
2570 E6         +1  6003                                     mov             a,@r0
2571 900000   F +1  6004                                     mov             dptr,#diKDn
2574 75F004     +1  6005                                     mov             b,#4
2577 A4         +1  6006                                     mul             ab
2578 FF         +1  6007                                     mov             r7,a;save
2579 93         +1  6008                                     movc    a,@a+dptr
257A F508       +1  6009                                     mov             r8,a
257C A3         +1  6010                                     inc             dptr
257D EF         +1  6011                                     mov             a,r7
257E 93         +1  6012                                     movc    a,@a+dptr
257F F509       +1  6013                                     mov             r9,a
2581 A3         +1  6014                                     inc             dptr
2582 EF         +1  6015                                     mov             a,r7
2583 93         +1  6016                                     movc    a,@a+dptr
2584 F50A       +1  6017                                     mov             r10,a
2586 A3         +1  6018                                     inc             dptr
2587 EF         +1  6019                                     mov             a,r7
2588 93         +1  6020                                     movc    a,@a+dptr
2589 F50B       +1  6021                                     mov             r11,a
258B 22         +1  6022                                     ret
                +1  6023     
258C 3F506B7B   +1  6024      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
2590 3F507FCC   +1  6025                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
2594 3F4F9D0B   +1  6026                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
2598 3F4FE869   +1  6027                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
259C 3F50294A   +1  6028                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
25A0 3F50639E   +1  6029                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
25A4 3F4BC9F0   +1  6030                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
25A8 3F4C063B   +1  6031                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
25AC 3F50EFDD   +1  6032                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
25B0 3F512AD9   +1  6033                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  6034     
25B4 00000039   +1  6035     ch57:   db      00,00,00,39h;57
25B8 00000014   +1  6036     ch20:   db      00,00,00,14h;20
                +1  6037     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    96

                +1  6038     ;загр ус для тестов ацп 
                +1  6039     ;dptr-
25BC 78B1       +1  6040     lotpus: mov             r0,#vichR
25BE B6210D     +1  6041                                     cjne    @r0,#21h,te22
25C1 900000   F +1  6042                                     mov                     dptr,#tabt11;заслать ус 11А
25C4 E4         +1  6043     lotp:           clr             a
25C5 93         +1  6044                             movc    a,@a+dptr                               ;high byte
25C6 F584       +1  6045                             mov             p4,a
25C8 A3         +1  6046                             inc             dptr
25C9 E4         +1  6047                             clr             a
25CA 93         +1  6048                             movc    a,@a+dptr                               ;low byte
25CB F585       +1  6049                             mov             p5,a
25CD 22         +1  6050                             ret
25CE B62205     +1  6051     te22:                   cjne    @r0,#22h,te23
25D1 900000   F +1  6052                             mov                     dptr,#tabt9;заслать ус 9А       
25D4 80EE       +1  6053                             jmp                     lotp
                +1  6054     
25D6 900000   F +1  6055     te23:   mov                     dptr,#tabt7;заслать ус 7А       
25D9 80E9       +1  6056                             jmp                     lotp
                +1  6057     
                +1  6058     
                +1  6059     
                +1  6060     
                +1  6061     
25DB 02030405   +1  6062     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
25DF 06070809                
25E3 0A0B                    
                +1  6063     
25E5 78AE       +1  6064     findR:                  mov                     r0,#diap
25E7 E6         +1  6065                                                     mov                     a,@r0
25E8 900000   F +1  6066                                                     mov                     dptr,#Tabn
25EB 93         +1  6067                                                     movc            a,@a+dptr
25EC 22         +1  6068                                                     ret
                +1  6069     ;bufind=30h..39h                                                                           
                                           ;
25ED C219       +1  6070     vvchif:                 clr             bitmig
25EF 79B2       +1  6071                                     mov             r1,#marker
25F1 E7         +1  6072                                     mov             a,@r1                   ;изм цифры
25F2 7840       +1  6073                                     mov             r0,#bufind                      ;0000
25F4 28         +1  6074                                     add             a,r0
25F5 F8         +1  6075                                     mov             r0,a
25F6 06         +1  6076                                     inc             @r0
25F7 B63A03     +1  6077                                     cjne    @r0,#3ah,chif
25FA 7630       +1  6078                                     mov             @r0,#30h
25FC 22         +1  6079                                     ret
25FD C3         +1  6080     chif:           clr                     c
25FE 7430       +1  6081                                     mov                     a,#30h
2600 96         +1  6082                                     subb            a,@r0
2601 4002       +1  6083                                     jc                      chif5
2603 7630       +1  6084                                     mov             @r0,#30h
2605 22         +1  6085     chif5:  ret
                +1  6086     
2606 80E5       +1  6087     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  6088     
2608 B641FB     +1  6089     vvnol31:        cjne            @r0,#41h,vvnol41
260B 800A       +1  6090                                             jmp                     chifour
260D B631F8     +1  6091     vvnol23:        cjne            @r0,#31h,vvnol31
2610 8005       +1  6092                                             jmp                     chifour 
                +1  6093     
2612 78B0       +1  6094     vvchibl:        mov                     r0,#level
2614 B623F6     +1  6095                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
2617 C219       +1  6096     chifour:                clr             bitmig
2619 79B2       +1  6097                                     mov             r1,#marker
261B E7         +1  6098                                     mov             a,@r1                   ;изм цифры
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    97

261C 7840       +1  6099                                     mov             r0,#bufind                      ;1..4
261E 28         +1  6100                                     add             a,r0
261F F8         +1  6101                                     mov             r0,a
2620 06         +1  6102                                     inc             @r0
2621 B63504     +1  6103                                     cjne    @r0,#35h,chifb
2624 7631       +1  6104                                     mov             @r0,#31h
2626 8006       +1  6105                                     jmp             chifb1
2628 B63003     +1  6106     chifb:  cjne    @r0,#30h,chifb1
262B 7631       +1  6107                                     mov             @r0,#31h
262D 22         +1  6108                                     ret
262E            +1  6109     chifb1:;;;;;;;;;;
262E C3         +1  6110                                     clr                     c
262F 7430       +1  6111                                     mov                     a,#30h
2631 96         +1  6112                                     subb            a,@r0
2632 4002       +1  6113                                     jc                      chifl5
2634 7630       +1  6114                                     mov             @r0,#30h
                +1  6115                                     
2636 22         +1  6116     chifl5: ret
                +1  6117     ;;;;;;;;;;;;;
2637 22         +1  6118             ret
                +1  6119       ;перевод маркера влево
2638            +1  6120     marle:  
2638 C219       +1  6121                     clr             bitmig
                +1  6122                     ;mov            savba,#0   нельзя обнулять
263A 78B2       +1  6123             mov             r0,#marker
263C 16         +1  6124                     dec             @r0
263D E6         +1  6125                     mov             a,@r0
263E C3         +1  6126                     clr             c
263F 953A       +1  6127                     subb    a,movleft         ;крайне левое положение
2641 5001       +1  6128                     jnc             rler
2643 06         +1  6129                     inc             @r0
2644 22         +1  6130     rler:   ret
                +1  6131         
                +1  6132     ;перевод маркера вправо
2645 C219       +1  6133     marri:  clr             bitmig
2647 78B2       +1  6134                     mov             r0,#marker
2649 06         +1  6135                     inc         @r0
264A E53B       +1  6136                     mov             a,movrig           ;крайне правое положение
264C C3         +1  6137                     clr             c
264D 96         +1  6138                     subb    a,@r0
264E 5001       +1  6139                     jnc             rrir
2650 16         +1  6140                     dec             @r0
2651 22         +1  6141     rrir:   ret
                +1  6142         
                +1  6143     ;konstA->bufind+4..bufind+7
2652 78BC       +1  6144     outA:           mov                     r0,#konstA
2654 120000   F +1  6145                                     call            resar2
2657 120343     +1  6146                                     call            ftol                    ;->hex
265A 784F       +1  6147                                     mov             r0,#abin
265C 120000   F +1  6148                                     call            saver2
265F 7853       +1  6149                                     mov                     r0,#adec
2661 7952       +1  6150                                     mov             r1,#abin+3
2663 120000   F +1  6151                                     call            bindec
2666 785C       +1  6152                                     mov                     r0,#adec+9
2668 7947       +1  6153                                     mov                     r1,#bufind+7
266A 7F04       +1  6154                                     mov                     r7,#4
266C E6         +1  6155     outa2:  mov             a,@r0
266D 2430       +1  6156                               add           a,#30h
266F F7         +1  6157                                     mov             @r1,a
2670 19         +1  6158                                     dec             r1
2671 18         +1  6159                                     dec             r0
2672 DFF8       +1  6160                                     djnz    r7,outa2
2674 22         +1  6161                                     ret
                +1  6162                                             
                +1  6163     ;konstB->bufind+4..bufind+8
                +1  6164     ;outB:          mov                     r0,#konstB
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    98

                +1  6165     ;                               call            resar2
                +1  6166     ;                               mov                     a,r2
                +1  6167     ;                               anl                     a,#80h
                +1  6168     ;                               jz                      outb3
                +1  6169     ;mov                    a,r2
                +1  6170     ;                               anl                     a,#7fh
                +1  6171     ;                               mov                     r2,a
                +1  6172     ;                               mov                     bufind+3,#2dh
                +1  6173     ;outb3: call            ftol                    ;->hex
                +1  6174     ;                               mov             r0,#abin
                +1  6175     ;                               call            saver2
                +1  6176     ;                               mov                     r0,#adec
                +1  6177     ;                               mov             r1,#abin+3
                +1  6178     ;                               call            bindec
                +1  6179     ;                               mov                     r0,#adec+9
                +1  6180     ;                               mov                     r1,#bufind+8
                +1  6181     ;                               mov                     r7,#5
                +1  6182     ;outb2: mov             a,@r0
                +1  6183     ;                         add           a,#30h
                +1  6184     ;                               mov             @r1,a
                +1  6185     ;                               dec             r1
                +1  6186     ;                               dec             r0
                +1  6187     ;                               djnz    r7,outb2
                +1  6188     ;                               ret
                +1  6189     
                +1  6190     
                +1  6191     ;пп мигания индикации
2675 78B2       +1  6192     mign:           mov             r0,#marker
                +1  6193                                     
2677 B6FF03     +1  6194                                     cjne    @r0,#0ffh,mignn
                +1  6195                                     ;реж изм мигает *
267A C219       +1  6196                                     clr             bitmig
267C 22         +1  6197                                     ret
                +1  6198     
267D            +1  6199     mignn:                  ;clr            c
267D 7440       +1  6200                                     mov             a,#bufind
267F 26         +1  6201                                     add             a,@r0                   ;a=bufind+marker
2680 F9         +1  6202                                     mov             r1,a
2681 201907     +1  6203                                     jb              bitmig,onmig
2684 873C       +1  6204                                     mov             savba,@r1
                +1  6205                             ;       mov             a,@r1
                +1  6206                             ;       mov             savba,a
2686 7720       +1  6207                                     mov             @r1,#" "
                +1  6208                                     
2688 D219       +1  6209                                     setb    bitmig
268A 22         +1  6210                                     ret
                +1  6211     
268B A73C       +1  6212     onmig:                  mov             @r1,savba
                +1  6213                                     ;mov            a,savba
                +1  6214                                     ; mov           @r1,a
268D C219       +1  6215                                     clr             bitmig
268F 120000   F +1  6216                                     call    z_01s
2692 22         +1  6217                                     ret
                +1  6218     ;номер ошибки bufind+6
2693 900000   F +1  6219     error:          mov             dptr,#teERR
2696 120000   F +1  6220                                             call    lotext
2699 853946     +1  6221                                             mov             bufind+6,nuerr
269C 22         +1  6222                                     ret
                +1  6223     
                +1  6224     
269D            +1  6225     textT:          
269D FD543D32   +1  6226     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
26A1 6D67FDFD                
26A5 FDFD                    
26A7 FD543D31   +1  6227     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE    99

26AB 306D67FD                
26AF FDFD                    
26B1 FD543D35   +1  6228                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
26B5 306D67FD                
26B9 FDFD                    
26BB FD543D64   +1  6229                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
26BF 3167FDFD                
26C3 FDFD                    
26C5 20202054   +1  6230                             db              " "," "," ","T","=",31h,67h," "," "," "
26C9 3D316720                
26CD 2020                    
26CF 2020543D   +1  6231                             db              " "," ","T","=",31h,30h,67h," "," "," "  
26D3 31306720                
26D7 2020                    
                +1  6232     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  6233     
26D9 42753474   +1  6234     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
26DD 79767454                
26E1 7720                    
26E3 20553D20   +1  6235     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
26E7 20202020                
26EB 2065                    
26ED 20423D2B   +1  6236     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
26F1 20202020                
26F5 2020                    
26F7 20207145   +1  6237     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
26FB 48722020                
26FF 2020                    
                +1  6238     
2701 20544579   +1  6239     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
2705 542D7433                
2709 7120                    
270B 54457954   +1  6240     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
270F 20523520                
2713 2020                    
2715 20794B30   +1  6241     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
2719 50205235                
271D 2020                    
271F 20204142   +1  6242     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
2723 4B202020                
2727 2020                    
2729 204B4176   +1  6243     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
272D 74735020                
2731 202020                  
                +1  6244     
2734 20544579   +1  6245     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
2738 54202020                
273C 5431                    
273E 20544579   +1  6246     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
2742 54202020                
2746 5432                    
2748 20544579   +1  6247     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
274C 54202020                
2750 5433                    
                +1  6248     
                +1  6249     
2752 20202035   +1  6250     teS57_6:                db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
2756 37362020                
275A 2020                    
275C 20202031   +1  6251     teS19_2:                db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2760 39322020                
2764 2020                    
                +1  6252     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   100

2766 61415030   +1  6253     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
276A 76772030                
276E 3030                    
2770 20303030   +1  6254     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2774 30302020                
2778 2041                    
277A 74337120   +1  6255     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
277E 4B304879                
2782 5420                    
2784 20204275   +1  6256     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
2788 58307820                
278C 2020                    
278E 2020304C   +1  6257     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
2792 4C202020                
2796 2020                    
2798 20203034   +1  6258     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
279C 7479544B                
27A0 4120                    
27A2 20203041   +1  6259     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
27A6 71795420                
27AA 20203341   +1  6260     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
27AE 61747977                
27B2 2020                    
27B4 20206150   +1  6261     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
27B8 30797130                
27BC 545020                  
27BF 20206130   +1  6262     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
27C3 76484162                
27C7 2020                    
27C9 20744854   +1  6263     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
27CD 20303030                
27D1 3067                    
27D3 20207376   +1  6264     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
27D7 304B2020                
27DB 2020                    
27DD 20207376   +1  6265     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
27E1 304B2030                
27E5 2020                    
27E7 30547934   +1  6266     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
27EB 45542030                
27EF 3031                    
27F1 79544154   +1  6267     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
27F5 74795474                
27F9 4B41                    
27FB 71744820   +1  6268     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
27FF 20202020                
2803 2020                    
2805 71414B79   +1  6269     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2809 20202020                
280D 2020                    
280F 79504578   +1  6270     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
2813 20202020                
2817 2020                    
                +1  6271      ;;;;;;;;;;;;;;;;;;;         
2819 2020304C   +1  6272     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
281D 4C204920                
2821 2020                    
2823 2020304C   +1  6273     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
2827 4C206620                
282B 2020                    
282D 20204552   +1  6274     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
2831 52202020                
2835 2020                    
2837 2020454E   +1  6275     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
283B 44202020                
283F 2020                    
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   101

                +1  6276     
                +1  6277     ;dptr+4-приемник
                +1  6278     ;dptr-источник
                +1  6279     ;r7-кол байт  
2841            +1  6280     xCIKLWR:
2841 7F04       +1  6281                             mov             r7,#4   
2843 E0         +1  6282     lwrx:   movx    a,@dptr
2844 C083       +1  6283                             push    dph
2846 C082       +1  6284                             push    dpl
2848 A3         +1  6285                             inc             dptr
2849 A3         +1  6286                             inc             dptr
284A A3         +1  6287                             inc             dptr
284B A3         +1  6288                             inc             dptr
284C F0         +1  6289                             movx    @dptr,a
284D D082       +1  6290                             pop             dpl
284F D083       +1  6291                             pop             dph
                +1  6292                             
2851 A3         +1  6293                             inc             dptr
2852 DFEF       +1  6294                             djnz    r7,lwrx
2854 22         +1  6295                             ret
                +1  6296     ;r2..r5->@dptr..@dptr+3                         
2855 EA         +1  6297     saveIr2:                mov     a,r2
2856 F0         +1  6298                                             movx    @dptr,a
2857 A3         +1  6299                                             inc     dptr
2858 EB         +1  6300                                             mov     a,r3
2859 F0         +1  6301                                             movx    @dptr,a
285A A3         +1  6302                                             inc     dptr
285B EC         +1  6303                                             mov     a,r4
285C F0         +1  6304                                             movx    @dptr,a
285D A3         +1  6305                                             inc     dptr
285E ED         +1  6306                                             mov     a,r5
285F F0         +1  6307                                             movx    @dptr,a
2860 22         +1  6308                                             ret
                +1  6309     ;r2..r5-> @r0..@r0+3
                +1  6310     
2861 EA         +1  6311     saver2:         mov     a,r2
2862 F6         +1  6312                                             mov     @r0,a
2863 08         +1  6313                                             inc     r0
2864 EB         +1  6314                                             mov     a,r3
2865 F6         +1  6315                                             mov     @r0,a
2866 08         +1  6316                                             inc     r0
2867 EC         +1  6317                                             mov     a,r4
2868 F6         +1  6318                                             mov     @r0,a
2869 08         +1  6319                                             inc     r0
286A ED         +1  6320                                             mov     a,r5
286B F6         +1  6321                                             mov     @r0,a
286C 22         +1  6322                                             ret 
286D 7F50       +1  6323     clmassix:       mov                     r7,#50h;28h
286F 900100     +1  6324                             mov     dptr,#MASS0        ;забить массив A нулями
2872 7400       +1  6325     clmax:          mov          a,#00h
2874 F0         +1  6326                  movx    @dptr,a
2875 A3         +1  6327                  inc     dptr
2876 DFFA       +1  6328                 djnz                r7,clmax                
2878 F56E       +1  6329                  mov     chmas,a
287A C201       +1  6330                  clr     bitmas
287C 22         +1  6331                 ret
                +1  6332     ;r1-яЁшхьшъ
                +1  6333     ;r0-шёЄюўшъ
                +1  6334     ;r7-ъюы срщЄ  
287D            +1  6335     CIKLWR:
287D 7F04       +1  6336                             mov             r7,#4   
287F E6         +1  6337     lwr:    mov     a,@r0
2880 F7         +1  6338                             mov     @r1,a
2881 09         +1  6339                             inc             r1
2882 08         +1  6340                             inc             r0
2883 DFFA       +1  6341                             djnz    r7,lwr
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   102

2885 22         +1  6342                             ret     
                +1  6343     ;r2..r5-> @dptr..@dptr+3
                +1  6344     
2886 120000   F +1  6345     zmul:   call    maform
2889 120000   F +1  6346                     call    lmul
288C 120000   F +1  6347                     call    bform
288F 22         +1  6348                     ret
                +1  6349     
2890 120000   F +1  6350     zdiv:   call    maform
2893 120000   F +1  6351                     call    divide
2896 120000   F +1  6352                     call    bform
2899 22         +1  6353                     ret
                +1  6354     
289A EA         +1  6355     maform: mov a,r2
289B 33         +1  6356             rlc a
289C 5006       +1  6357             jnc             fo1m
289E D202       +1  6358                     setb            znmat
28A0 120000   F +1  6359                     call   form4
28A3 22         +1  6360                     ret
28A4 C202       +1  6361     fo1m:   clr             znmat
28A6 22         +1  6362                     ret
                +1  6363     
28A7 300203     +1  6364     bform:  jnb             znmat,fo2m
28AA 120000   F +1  6365                     call    form4
28AD 22         +1  6366     fo2m:   ret
                +1  6367       
                +1  6368     ;r2..r5 яхЁхтхёЄш т фюя ъюф
28AE ED         +1  6369     form4:          mov a,r5
28AF F4         +1  6370             cpl a
28B0 2401       +1  6371             add a,#1
28B2 FD         +1  6372             mov r5,a
28B3 EC         +1  6373             mov a,r4
28B4 F4         +1  6374             cpl a
28B5 3400       +1  6375             addc    a,#0
28B7 FC         +1  6376             mov r4,a
28B8 EB         +1  6377             mov a,r3
28B9 F4         +1  6378                 cpl a
28BA 3400       +1  6379             addc    a,#0
28BC FB         +1  6380             mov r3,a
28BD EA         +1  6381             mov a,r2
28BE F4         +1  6382             cpl a
28BF 3400       +1  6383             addc    a,#0
28C1 FA         +1  6384             mov r2,a
28C2 22         +1  6385             ret
                +1  6386     
28C3 120000   F +1  6387     zcmp:   call            maform
28C6 120000   F +1  6388                     call            lcmp
28C9 C0D0       +1  6389                     push            psw
28CB 120000   F +1  6390                     call    bform
28CE D0D0       +1  6391                     pop             psw
28D0 22         +1  6392                     ret
                +1  6393     
                +1  6394     
                +1  6395     ;@r0..@r0+3->r8..r11
                +1  6396     
28D1 E6         +1  6397     resar8: mov     a,@r0
28D2 F508       +1  6398                     mov     ltemp,a
28D4 08         +1  6399                     inc     r0
28D5 E6         +1  6400                     mov     a,@r0
28D6 F509       +1  6401                     mov     ltemp+1,a
28D8 08         +1  6402                     inc     r0
28D9 E6         +1  6403                     mov     a,@r0
28DA F50A       +1  6404                     mov     ltemp+2,a
28DC 08         +1  6405                     inc     r0
28DD E6         +1  6406                     mov     a,@r0
28DE F50B       +1  6407                     mov     ltemp+3,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   103

28E0 22         +1  6408                     ret
                +1  6409     
                +1  6410     ;
                +1  6411     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6412     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6413     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6414     ;r2 a    ўшёыю 180
                +1  6415     ;00 b4
                +1  6416     ;т_ї- mabin..mabin+2
                +1  6417     ;     80 01 00
                +1  6418      
28E1 C8         +1  6419     cond:   xch     a,r0    
28E2 F9         +1  6420                     mov     r1,a
28E3 C8         +1  6421                     xch     a,r0
28E4 7C03       +1  6422                     mov     r4,#03
28E6 7700       +1  6423     dcoa:   mov     @r1,#00
28E8 09         +1  6424                     inc     r1
28E9 DCFB       +1  6425                     djnz    r4,dcoa
28EB 7B10       +1  6426                     mov     r3,#10h
28ED C3         +1  6427     dcob:   clr     c
28EE 33         +1  6428                     rlc     a
28EF CA         +1  6429                     xch     a,r2
28F0 33         +1  6430                     rlc     a
28F1 CA         +1  6431                     xch     a,r2
28F2 C8         +1  6432                     xch     a,r0
28F3 F9         +1  6433                     mov     r1,a
28F4 C8         +1  6434                     xch     a,r0
28F5 7C03       +1  6435                     mov     r4,#03
28F7 FD         +1  6436                     mov     r5,a
28F8 E7         +1  6437     dcoc:   mov     a,@r1 
28F9 37         +1  6438                     addc    a,@r1
28FA D4         +1  6439                     da      a
28FB F7         +1  6440                     mov     @r1,a
28FC 09         +1  6441                     inc     r1
28FD DCF9       +1  6442                     djnz    r4,dcoc
28FF ED         +1  6443                     mov     a,r5
2900 4003       +1  6444                     jc      dcod
2902 DBE9       +1  6445                     djnz    r3,dcob
2904 C3         +1  6446                     clr     c
2905 00         +1  6447     dcod:   nop
2906 22         +1  6448                     ret
                +1  6449     
2907 8A08       +1  6450     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2909 850309     +1  6451                     mov     ltemp+1,3
290C 85040A     +1  6452                     mov     ltemp+2,4
290F 85050B     +1  6453                     mov     ltemp+3,5
2912 22         +1  6454                     ret
                +1  6455     
                +1  6456     ;@r0..@r0+3->r2..r5
                +1  6457     
2913 E6         +1  6458     resar2: mov     a,@r0
2914 FA         +1  6459                     mov     r2,a
2915 08         +1  6460                     inc     r0
2916 E6         +1  6461                     mov     a,@r0
2917 FB         +1  6462                     mov     r3,a
2918 08         +1  6463                     inc     r0
2919 E6         +1  6464                     mov     a,@r0
291A FC         +1  6465                     mov     r4,a
291B 08         +1  6466                     inc     r0
291C E6         +1  6467                     mov     a,@r0
291D FD         +1  6468                     mov     r5,a
291E 22         +1  6469                     ret
                +1  6470     
                +1  6471     ;25mkc !!!!!!!!!!!!!!!1
291F 7B4B       +1  6472     z_9:      mov R3,#4Bh      ;загрузка числа
2921 DBFE       +1  6473                    djnz R3,$
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   104

2923 22         +1  6474               ret
                +1  6475     
                +1  6476     ;запись   передаваемый байт в acc
                +1  6477     ;передача байта послед кодом старшими разрядами  вперед
2924 7A08       +1  6478     write:     mov R2,#8
2926 C3         +1  6479                             clr  c  
2927 C297       +1  6480     wr1:            clr             p1.7;P1.2
2929 00         +1  6481                         nop 
292A 33         +1  6482                             rlc A
292B 9296       +1  6483                             mov P1.6,C;P1.1,C
292D 120000   F +1  6484                        call tim2
2930 D297       +1  6485                        setb P1.7;P1.2
2932 120000   F +1  6486                call tim2
2935 DAF0       +1  6487                       djnz R2,wr1
2937 C296       +1  6488                       clr P1.6;P1.1
2939 22         +1  6489                                              ret
                +1  6490     
                +1  6491     ;чтение номера байта с индикатора(2байта)
                +1  6492     ;bufind+8..bufind+9
                +1  6493     ;-  - - -
                +1  6494     ;- - - - - - - - - -
                +1  6495     ;adec..adec+9
                +1  6496     ;ст            мл
293A 7847       +1  6497     upak1:  mov             r0,#bufind+7;
293C 795C       +1  6498                                     mov             r1,#adec+9
293E C3         +1  6499                                     clr             c
293F E6         +1  6500                                     mov             a,@r0
2940 9430       +1  6501                                     subb    a,#30h
2942 FF         +1  6502                                     mov             r7,a
2943 C3         +1  6503                                     clr             c
2944 9405       +1  6504                                     subb    a,#5
2946 4004       +1  6505                                     jc              upk1
2948 7404       +1  6506                                     mov             a,#4
294A 8001       +1  6507                                     jmp             upk2
294C EF         +1  6508     upk1:           mov             a,r7
294D F7         +1  6509     upk2:           mov             @r1,a
294E 22         +1  6510                                     ret  
                +1  6511     ;r1-мл байт счетчика ячеек
294F C3         +1  6512     chminus:        clr                     c
2950 E7         +1  6513                                             mov                     a,@r1
2951 9401       +1  6514                                             subb            a,#01
2953 F7         +1  6515                                             mov                     @r1,a;low
2954 19         +1  6516                                             dec                     r1
2955 E7         +1  6517                                             mov                     a,@r1
2956 9400       +1  6518                                             subb            a,#00
2958 F7         +1  6519                                             mov                     @r1,a
2959 22         +1  6520                                             ret
                +1  6521     
                +1  6522     
                +1  6523     ;чтение номера байта с индикатора(4байта)
                +1  6524     ;bufind+6..bufind+9
                +1  6525     ;-  - - -
                +1  6526     ;- - - - - - - - - -
                +1  6527     ;adec..adec+9
                +1  6528     ;ст            мл
295A 7848       +1  6529     upak4:  mov             r0,#bufind+8;
295C 795C       +1  6530                     mov             r1,#adec+9
295E 7F04       +1  6531                     mov             r7,#4
2960 C3         +1  6532     upaa:   clr             c
2961 E6         +1  6533                     mov             a,@r0
2962 9430       +1  6534                     subb    a,#30h
2964 F7         +1  6535                     mov             @r1,a
2965 18         +1  6536                     dec             r0
2966 19         +1  6537                     dec             r1
2967 DFF7       +1  6538                     djnz    r7,upaa
2969 22         +1  6539                     ret
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   105

                +1  6540     
                +1  6541     ;dptr-адр ячейки 1й соотв блока 
296A E538       +1  6542     adrblok:         mov            a,nblok
296C C3         +1  6543                              clr            c
296D 9401       +1  6544                              subb           a,#1
296F FD         +1  6545                              mov            r5,a
2970 E4         +1  6546                              clr            a
2971 FC         +1  6547                              mov            r4,a
2972 FB         +1  6548                              mov            r3,a
2973 FA         +1  6549                              mov            r2,a
2974 900000   F +1  6550                                     mov                     dptr,#ch320h
2977 120000   F +1  6551                                     CALL   ldc_ltemp                 ; ltemp <-320
297A 120000   F +1  6552                                     call            lmul;r2..r5
297D ED         +1  6553                                     mov                     a,r5
297E 2450       +1  6554                                     add                     a,#50h
2980 F582       +1  6555                                     mov                     dpl,a
2982 EC         +1  6556                                     mov                     a,r4
2983 3401       +1  6557                                     addc            a,#01           
2985 F583       +1  6558                                     mov                     dph,a                   ;dptr-
2987 22         +1  6559                                     ret
                +1  6560     
                +1  6561     ;
                +1  6562     ;saven_bl<-dptr  адрес след ячейки внешн озу 
2988 E538       +1  6563     save_hl:                mov             a,nblok
298A B4011D     +1  6564                                                     cjne    a,#1,sa_hl1
298D 79D3       +1  6565                                                     mov             r1,#saven_bl
298F E583       +1  6566     sa_hl:                  mov             a,dph
2991 F7         +1  6567                                               mov           @r1,a
2992 09         +1  6568                                                     inc             r1
2993 E582       +1  6569                                                     mov             a,dpl
2995 F7         +1  6570                                                     mov             @r1,a
                +1  6571                                                     ;;;;;;;;;не конец ли блока
                +1  6572                             
2996 79D6       +1  6573                                     mov                     r1,#volume+1;work+1
2998 120000   F +1  6574                                     call            chminus
299B 78D5       +1  6575                                     mov             r0,#volume
299D E6         +1  6576                                     mov             a,@r0
299E 30E708     +1  6577                                     jnb             acc.7,noendli
29A1 C20A       +1  6578                                     clr                     bitbon                  ;блок закон
                             чился
29A3 534BFD     +1  6579                                     anl                     bufind+11,#0fdh
29A6 120000   F +1  6580                                     call            ind
29A9 22         +1  6581     noendli:ret
                +1  6582     
29AA B40204     +1  6583     sa_hl1:         cjne    a,#2,sa_hl2
29AD 79C0       +1  6584                                                     mov             r1,#saven_bl2
29AF 80DE       +1  6585                                                     jmp             sa_hl
                +1  6586     
29B1 B40304     +1  6587     sa_hl2:         cjne    a,#3,sa_hl3
29B4 79C2       +1  6588                                                     mov             r1,#saven_bl3
29B6 80D7       +1  6589                                                     jmp             sa_hl
29B8 79D9       +1  6590     sa_hl3:                 mov             r1,#saven_bl4
29BA 80D3       +1  6591                                                     jmp             sa_hl
                +1  6592     
                +1  6593     ;загрузка dptr сохр ранее значением адреса ячейки
29BC E538       +1  6594     resa_hl:                mov             a,nblok
29BE B4010A     +1  6595                                                     cjne    a,#1,re_hl1
29C1 79D3       +1  6596                                                     mov             r1,#saven_bl;блок1 150h..46
                             fh
29C3 E7         +1  6597     re_hl:                  mov             a,@r1   
29C4 F583       +1  6598                                                     mov             dph,a
                +1  6599                                               
29C6 09         +1  6600                                                     inc             r1
29C7 E7         +1  6601                                                     mov             a,@r1
29C8 F582       +1  6602                                                     mov             dpl,a
29CA 22         +1  6603                                                     ret
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   106

                +1  6604     
29CB B40204     +1  6605     re_hl1:                 cjne    a,#2,re_hl2
29CE 79C0       +1  6606                                                     mov             r1,#saven_bl2   ;блок2 470h
                             ..78fh
29D0 80F1       +1  6607                                                     jmp             re_hl
                +1  6608     
29D2 B40304     +1  6609     re_hl2:                 cjne    a,#3,re_hl3
29D5 79C2       +1  6610                                                     mov             r1,#saven_bl3   ;блок3 790h
                             ..aafh
29D7 80EA       +1  6611                                                     jmp             re_hl
                +1  6612     
29D9 79D9       +1  6613     re_hl3:                 mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
29DB 80E6       +1  6614                                                     jmp             re_hl
                +1  6615     ;загрузка rez_A3 в соотв яч внешн озу
29DD 789C       +1  6616     loA3_X:                 mov             r0,#rez_A3
29DF 120000   F +1  6617                                                     call    resar2
                +1  6618                                                     
29E2 EA         +1  6619                                                     mov             a,r2                    ;
29E3 F0         +1  6620                                                     movx    @dptr,a
29E4 A3         +1  6621                                                     inc             dptr
29E5 EB         +1  6622                                                     mov             a,r3
29E6 F0         +1  6623                                                     movx    @dptr,a
29E7 A3         +1  6624                                                     inc             dptr
29E8 EC         +1  6625                                                     mov             a,r4
29E9 F0         +1  6626                                                     movx    @dptr,a
29EA A3         +1  6627                                                     inc             dptr
29EB ED         +1  6628                                                     mov             a,r5
29EC F0         +1  6629                                                     movx    @dptr,a
29ED A3         +1  6630                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
29EE 22         +1  6631                                                     ret             ;в ячейке saven_bl
                +1  6632     ;чтение в rez_A3 из соотв яч внешн озу
29EF            +1  6633     reA3_X:         
                +1  6634                                                     
29EF E0         +1  6635                                                     movx    a,@dptr
29F0 FA         +1  6636                                                     mov             r2,a
29F1 A3         +1  6637                                                     inc             dptr
29F2 E0         +1  6638                                                     movx    a,@dptr
29F3 FB         +1  6639                                                     mov             r3,a
29F4 A3         +1  6640                                                     inc             dptr
29F5 E0         +1  6641                                                     movx    a,@dptr
29F6 FC         +1  6642                                                     mov             r4,a
29F7 A3         +1  6643                                                     inc             dptr
29F8 E0         +1  6644                                                     movx    a,@dptr
29F9 FD         +1  6645                                                     mov             r5,a
29FA A3         +1  6646                                                     inc             dptr
29FB 789C       +1  6647                                                     mov             r0,#rez_A3
29FD 120000   F +1  6648                                                     call    saver2
2A00 22         +1  6649                                                     ret
                +1  6650     ;;;;;;;;;;;;;;;;;
                +1  6651     ;разбивка внешнего озу
                +1  6652     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6653     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  6654     ;150h..46fh 1й блок
                +1  6655     ;470h..78fh     2й блок
                +1  6656     ;790h..aaf      3й блок
                +1  6657     ;ab0h..dcfh 4й блок
                +1  6658     ;dd0..fffh свободная область
                +1  6659     ;
                +1  6660     ;светодиоды и точки для индикатора
                +1  6661     ;такт
                +1  6662     ;измер
                +1  6663     ;avp
                +1  6664     ;нуль
                +1  6665     ;0,1s
                +1  6666     ;1s
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   107

                +1  6667     ;10s
                +1  6668     ;кмп
                +1  6669     ;память
                +1  6670     ;пуск
                +1  6671     ;
                +1  6672     ;
                    6673     
                    6674     ;$include (d:\amp\sarifm3.asm) 
                +1  6675     ; ” ©« SARIFM.ASM 8.11.95
                +1  6676     ;файл арифметики
                +1  6677       
  0008          +1  6678     ltemp    equ       8           ;long temporary
  000C          +1  6679     xtemp    equ       12          ;other temporaries
  000A          +1  6680     DECSIZE  EQU       10
  0004          +1  6681     NUMSIZE  EQU       4
  0004          +1  6682     RR4  EQU       4
  0005          +1  6683     RR5  EQU       5
                +1  6684     
                +1  6685                                                     
                +1  6686     
                +1  6687                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6688     ;             using    0              ; Specify register bank for the following
                +1  6689                                            ; program code.
                +1  6690     ;                                               cseg AT 400h
                +1  6691     ; Arithmetics:  CLEARING string
                +1  6692     ; Input:
                +1  6693     ; R0 - pointer to string,
                +1  6694     ; NUMSIZE - byte count if CLRNUM used,
                +1  6695     ; DECSIZE - byte count if CLRDEC used,
                +1  6696     ; R2 - byte count if CLEAR used;
                +1  6697     ; Output:  none.
                +1  6698     
2A01            +1  6699     CLRDEC:
2A01 7A0A       +1  6700         MOV R2, #DECSIZE
2A03 8002       +1  6701         SJMP    CLEAR
2A05            +1  6702     CLRNUM:
2A05 7A04       +1  6703         MOV R2, #NUMSIZE
                +1  6704         ;JMP    CLEAR
2A07            +1  6705     CLEAR:
2A07 E4         +1  6706         CLR A
2A08 F6         +1  6707     CLR11:  MOV @R0, A
2A09 08         +1  6708         INC R0
2A0A DAFC       +1  6709         DJNZ    R2, CLR11
2A0C 22         +1  6710         RET
                +1  6711     
                +1  6712     ;**********************************
                +1  6713     ;mov    r1,#abin+3
                +1  6714     ;mov    r0,#adec
                +1  6715     ; _ _ _ _
                +1  6716     ;     03ff
                +1  6717     ;ст     мл   - вход
                +1  6718     ; _ _ _ _ _ _ _ _ _ _
                +1  6719     ;             1 0 2 3
                +1  6720     ;ст                мл 
                +1  6721     ;**********************************
                +1  6722     
2A0D            +1  6723     BINDEC:
                +1  6724     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6725     ; Input:
                +1  6726     ; R0 - pointer to destination (high digit is the first),
                +1  6727     ; R1 - pointer to source,
                +1  6728     ; NUMSIZE - byte count in binary number;
                +1  6729     ; DECSIZE - byte count in decimal number;
                +1  6730     ; Output:  none.
                +1  6731     ; Source saved
                +1  6732     
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   108

                +1  6733         ; 1. Clear result
2A0D 7A05       +1  6734         MOV R2, #DECSIZE/2
2A0F 120000   F +1  6735         CALL   CLEAR  ; incrementing R0
                +1  6736     
                +1  6737         ; 2. Prepare convertion
2A12 18         +1  6738         DEC R0
2A13 8804       +1  6739         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
2A15 8905       +1  6740         MOV RR5, R1 ; R5 - pointer to low byte of binary number
2A17 7B20       +1  6741         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6742     
                +1  6743         ; 3. Convert cyrcle
2A19            +1  6744     BIN30:
                +1  6745     
                +1  6746         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
2A19 A905       +1  6747         MOV R1, RR5
2A1B 7A04       +1  6748         MOV R2, #NUMSIZE
2A1D E7         +1  6749     BIN31:  MOV A, @R1
2A1E 33         +1  6750         RLC A
2A1F F7         +1  6751         MOV @R1, A
2A20 19         +1  6752         DEC R1
2A21 DAFA       +1  6753         DJNZ    R2, BIN31
2A23 A905       +1  6754         MOV R1, RR5
2A25 E7         +1  6755         MOV A, @R1
2A26 92E0       +1  6756         MOV ACC.0, C
2A28 F7         +1  6757         MOV @R1, A
                +1  6758     
                +1  6759         ; 3.2. Doubling decimal result with <Carry>
2A29 A804       +1  6760         MOV R0, RR4
2A2B 7A05       +1  6761         MOV R2, #DECSIZE/2
2A2D E6         +1  6762     BIN32:  MOV A, @R0
2A2E 36         +1  6763         ADDC    A, @R0
2A2F D4         +1  6764         DA  A
2A30 F6         +1  6765         MOV @R0, A
2A31 18         +1  6766         DEC R0
2A32 DAF9       +1  6767         DJNZ    R2, BIN32
                +1  6768     
                +1  6769         ; 3.3. End of convert cyrcle
2A34 DBE3       +1  6770         DJNZ    R3, BIN30
                +1  6771     
                +1  6772         ; 4. Make bytes from half-bytes
2A36 E8         +1  6773         MOV A, R0
2A37 240A       +1  6774         ADD A, #DECSIZE
2A39 F8         +1  6775         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
2A3A A904       +1  6776         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2A3C 7A05       +1  6777         MOV R2, #DECSIZE/2
2A3E E7         +1  6778     BIN41:  MOV A, @R1
2A3F 540F       +1  6779         ANL A, #00FH
2A41 F6         +1  6780         MOV @R0, A
2A42 18         +1  6781         DEC R0
2A43 E7         +1  6782         MOV A, @R1
2A44 C4         +1  6783         SWAP    A
2A45 540F       +1  6784         ANL A, #00FH
2A47 F6         +1  6785         MOV @R0, A
2A48 18         +1  6786         DEC R0
2A49 19         +1  6787         DEC R1
2A4A DAF2       +1  6788         DJNZ    R2, BIN41
2A4C 22         +1  6789         RET
                +1  6790     
                +1  6791     
                +1  6792     ;*********************************
                +1  6793     ;mov    r0,#abin
                +1  6794     ;mov    r1,#adec
                +1  6795     ; _ _ _ _       -выход
                +1  6796     ; ff0000
                +1  6797     ;0004
                +1  6798     ;мл      ст
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   109

                +1  6799     
                +1  6800     ;ст                       мл
                +1  6801     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6802     ;                       2 5 5
                +1  6803     ;                   1 0 2 4
                +1  6804     
2A4D            +1  6805     DECBIN:
                +1  6806     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6807     ; Input:
                +1  6808     ; R0 - pointer to destination,
                +1  6809     ; R1 - pointer to source (high digit is the first),
                +1  6810     ; NUMSIZE - byte count in binary number;
                +1  6811     ; DECSIZE - byte count in decimal number;
                +1  6812     ; Output:  none
                +1  6813     ; Source cleared
                +1  6814     
                +1  6815         ; 1. Clear result
2A4D 120000   F +1  6816         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6817     
                +1  6818         ; 2. Prepare convertion
2A50 18         +1  6819         DEC R0
2A51 8804       +1  6820         MOV RR4, R0 ; R4 - pointer to high byte of binary result
2A53 8905       +1  6821         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
2A55 900000   F +1  6822         MOV DPTR, #DECT2
2A58 7B20       +1  6823         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6824     
                +1  6825         ; 3. Convert cyrcle
2A5A            +1  6826     DEC30:
                +1  6827     
                +1  6828         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2A5A C3         +1  6829         CLR C
2A5B A905       +1  6830         MOV R1, RR5
2A5D 7A0A       +1  6831         MOV R2, #DECSIZE
2A5F E7         +1  6832     DEC31:  MOV A, @R1
2A60 540F       +1  6833         ANL A, #00FH
2A62 92E4       +1  6834         MOV ACC.4, C
2A64 93         +1  6835         MOVC    A,@A+DPTR
2A65 F7         +1  6836         MOV @R1, A
2A66 A2E7       +1  6837         MOV C, ACC.7
2A68 09         +1  6838         INC R1
2A69 DAF4       +1  6839         DJNZ    R2, DEC31
                +1  6840     
                +1  6841         ; 3.2. Rotate binary result one bit to right with <Carry>
2A6B A804       +1  6842         MOV R0, RR4
2A6D 7A04       +1  6843         MOV R2, #NUMSIZE
2A6F E6         +1  6844     DEC32:  MOV A, @R0
2A70 13         +1  6845         RRC A
2A71 F6         +1  6846         MOV @R0, A
2A72 18         +1  6847         DEC R0
2A73 DAFA       +1  6848         DJNZ    R2, DEC32
                +1  6849     
                +1  6850         ; 3.3. End of convert cyrcle
2A75 DBE3       +1  6851         DJNZ    R3, DEC30
2A77 22         +1  6852         RET
                +1  6853     
2A78 00800181   +1  6854     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2A7C 02820383                
2A80 0484                    
2A82 00000000   +1  6855         DB  00,00,00,00,00,00
2A86 0000                    
2A88 05850686   +1  6856         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2A8C 07870888                
2A90 0989                    
                +1  6857     
                +1  6858     ;   Long comparison
                +1  6859     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   110

                +1  6860     ;   flags and acc set as though a long subtraction was done.
                +1  6861     ;*******************************
                +1  6862     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6863     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6864     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6865     ;*******************************
2A92            +1  6866     lcmp:
2A92 C3         +1  6867         clr c
2A93 EA         +1  6868         mov a,r2
2A94 9508       +1  6869         subb    a,8
2A96 700F       +1  6870         jnz done
2A98 EB         +1  6871         mov a,r3
2A99 9509       +1  6872         subb    a,9
2A9B 7008       +1  6873         jnz done1
2A9D EC         +1  6874         mov a,r4
2A9E 950A       +1  6875         subb    a,10
2AA0 7003       +1  6876         jnz done1
2AA2 ED         +1  6877         mov a,r5
2AA3 950B       +1  6878         subb    a,11
2AA5            +1  6879     done1:
2AA5 C2D2       +1  6880         clr ov      ;overflow is significant only for top byte
2AA7            +1  6881     done:
2AA7 22         +1  6882         ret
                +1  6883     
                +1  6884     ;   Load long into r2-5 from [dptr]
                +1  6885     
2AA8            +1  6886     ldc_long:
2AA8 E583       +1  6887         mov a,dph       ;is it in on board memory
2AAA 6010       +1  6888         jz  onboard     ;yes
2AAC E4         +1  6889         clr a
2AAD 93         +1  6890         movc    a,@a+dptr
2AAE FA         +1  6891         mov r2,a
2AAF 7401       +1  6892         mov a,#1
2AB1 93         +1  6893         movc    a,@a+dptr
2AB2 FB         +1  6894         mov r3,a
2AB3 7402       +1  6895         mov a,#2
2AB5 93         +1  6896         movc    a,@a+dptr
2AB6 FC         +1  6897         mov r4,a
2AB7 7403       +1  6898         mov a,#3
2AB9 93         +1  6899         movc    a,@a+dptr
2ABA FD         +1  6900         mov r5,a
2ABB 22         +1  6901         ret
2ABC            +1  6902     onboard:
2ABC A882       +1  6903         mov r0,dpl
2ABE E6         +1  6904         mov a,@r0
2ABF FA         +1  6905         mov r2,a
2AC0 08         +1  6906         inc r0
2AC1 E6         +1  6907         mov a,@r0
2AC2 FB         +1  6908         mov r3,a
2AC3 08         +1  6909         inc r0
2AC4 E6         +1  6910         mov a,@r0
2AC5 FC         +1  6911         mov r4,a
2AC6 08         +1  6912         inc r0
2AC7 E6         +1  6913         mov a,@r0
2AC8 FD         +1  6914         mov r5,a
2AC9 22         +1  6915         ret
                +1  6916     
                +1  6917     ;**************************************
                +1  6918     ;загрузить ltemp...+3 из памяти программ
                +1  6919     ;mov    dptr,#CH5
                +1  6920     ;call   ldc_ltemp        ltemp <--5
                +1  6921     ;**************************************
2ACA            +1  6922     ldc_ltemp:
2ACA E583       +1  6923         mov a,dph       ;is it in on board memory
2ACC 6014       +1  6924         jz  oboard      ;yes
2ACE E4         +1  6925         clr a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   111

2ACF 93         +1  6926         movc    a,@a+dptr
2AD0 F508       +1  6927         mov 8,a
2AD2 7401       +1  6928         mov a,#1
2AD4 93         +1  6929         movc    a,@a+dptr
2AD5 F509       +1  6930         mov 9,a
2AD7 7402       +1  6931         mov a,#2
2AD9 93         +1  6932         movc    a,@a+dptr
2ADA F50A       +1  6933         mov 10,a
2ADC 7403       +1  6934         mov a,#3
2ADE 93         +1  6935         movc    a,@a+dptr
2ADF F50B       +1  6936         mov 11,a
2AE1 22         +1  6937         ret
2AE2            +1  6938     oboard:
2AE2 A882       +1  6939         mov r0,dpl
2AE4 8608       +1  6940         mov 8,@r0
2AE6 08         +1  6941         inc r0
2AE7 8609       +1  6942         mov 9,@r0
2AE9 08         +1  6943         inc r0
2AEA 860A       +1  6944         mov 10,@r0
2AEC 08         +1  6945         inc r0
2AED 860B       +1  6946         mov 11,@r0
2AEF 22         +1  6947         ret
                +1  6948     
                +1  6949     ;*****************************
                +1  6950     ;mov    dptr,#k1
                +1  6951     ;call   ldx_long
                +1  6952     ;k1->r2..r5
                +1  6953     ;*****************************
                +1  6954     ;   Load long into r2-5 from [dptr]
                +1  6955     ;
                +1  6956     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
2AF0            +1  6957     ldx_long:
2AF0 E583       +1  6958         mov a,dph       ;is it in on board memory
2AF2 6014       +1  6959         jz  onboar1        ;yes
2AF4 C082       +1  6960         push    dpl
2AF6 C083       +1  6961         push    dph
2AF8 E0         +1  6962         movx    a,@dptr
2AF9 FA         +1  6963         mov r2,a
2AFA A3         +1  6964         inc dptr
2AFB E0         +1  6965         movx    a,@dptr
2AFC FB         +1  6966         mov r3,a
2AFD A3         +1  6967         inc dptr
2AFE E0         +1  6968         movx    a,@dptr
2AFF FC         +1  6969         mov r4,a
2B00 A3         +1  6970         inc dptr
2B01 E0         +1  6971         movx    a,@dptr
2B02 FD         +1  6972         mov r5,a
2B03 D083       +1  6973         pop dph
2B05 D082       +1  6974         pop dpl
2B07 22         +1  6975         ret
2B08            +1  6976     onboar1:
2B08 A882       +1  6977         mov r0,dpl
2B0A E6         +1  6978         mov a,@r0
2B0B FA         +1  6979         mov r2,a
2B0C 08         +1  6980         inc r0
2B0D E6         +1  6981         mov a,@r0
2B0E FB         +1  6982         mov r3,a
2B0F 08         +1  6983         inc r0
2B10 E6         +1  6984         mov a,@r0
2B11 FC         +1  6985         mov r4,a
2B12 08         +1  6986         inc r0
2B13 E6         +1  6987         mov a,@r0
2B14 FD         +1  6988         mov r5,a
2B15 22         +1  6989         ret
                +1  6990     
                +1  6991     ;*********************************
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   112

                +1  6992     ;mov    dptr,#k2
                +1  6993     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6994     ;**********************************
2B16            +1  6995     ldx_ltemp:
2B16 E583       +1  6996         mov a,dph       ;is it in on board memory
2B18 6010       +1  6997         jz  oboard1     ;yes
2B1A E0         +1  6998         movx    a,@dptr
2B1B F508       +1  6999         mov 8,a
2B1D A3         +1  7000         inc dptr
2B1E E0         +1  7001         movx    a,@dptr
2B1F F509       +1  7002         mov 9,a
2B21 A3         +1  7003         inc dptr
2B22 E0         +1  7004         movx    a,@dptr
2B23 F50A       +1  7005         mov 10,a
2B25 A3         +1  7006         inc dptr
2B26 E0         +1  7007         movx    a,@dptr
2B27 F50B       +1  7008         mov 11,a
2B29 22         +1  7009         ret
2B2A            +1  7010     oboard1:
2B2A A882       +1  7011         mov r0,dpl
2B2C 8608       +1  7012         mov 8,@r0
2B2E 08         +1  7013         inc r0
2B2F 8609       +1  7014         mov 9,@r0
2B31 08         +1  7015         inc r0
2B32 860A       +1  7016         mov 10,@r0
2B34 08         +1  7017         inc r0
2B35 860B       +1  7018         mov 11,@r0
2B37 22         +1  7019         ret
                +1  7020     ;   Long division routines for 8051
                +1  7021     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  7022     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  7023     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  7024     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  7025     ;   r1 must be saved by the caller.
                +1  7026     ;   This is long unsigned division.
                +1  7027     
                +1  7028     
                +1  7029     ;   Register usage:
                +1  7030     ;       r0 loop counter
                +1  7031     ;       xtemp (12-15) accumulates quotient
                +1  7032     ;       r5-r2 holds dividend
                +1  7033     ;       ltemp holds divisor
                +1  7034     
                +1  7035     ;************************************
                +1  7036     ;r2..r5-делимое
                +1  7037     ;ltemp..-делитель
                +1  7038     ;частное -r2..r5
                +1  7039     ;*************************************
2B38            +1  7040     divide:
2B38 E4         +1  7041         clr a
2B39 F8         +1  7042         mov r0,a        ;initialize count
2B3A F50C       +1  7043         mov xtemp,a     ;zero quotient
2B3C F50D       +1  7044         mov xtemp+1,a
2B3E F50E       +1  7045         mov xtemp+2,a
2B40 F50F       +1  7046         mov xtemp+3,a
2B42 ED         +1  7047         mov a,r5        ;check for zero dividend
2B43 4C         +1  7048         orl a,r4
2B44 4B         +1  7049         orl a,r3
2B45 4A         +1  7050         orl a,r2
2B46 600B       +1  7051         jz  jfinis
2B48 E508       +1  7052         mov a,ltemp     ;check for zero divisor
2B4A 4509       +1  7053         orl a,ltemp+1
2B4C 450A       +1  7054         orl a,ltemp+2
2B4E 450B       +1  7055         orl a,ltemp+3
2B50 7037       +1  7056         jnz midl
2B52 22         +1  7057         ret
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   113

                +1  7058     
2B53 020000   F +1  7059     jfinis: jmp finis
                +1  7060     
2B56            +1  7061     loops:
2B56 EA         +1  7062         mov a,r2
2B57 C3         +1  7063         clr c
2B58 9508       +1  7064         subb    a,ltemp+0   ;is divisor greater than dividend yet
2B5A 4033       +1  7065         jc  yes     ;yes, go no further
2B5C 7013       +1  7066         jnz no
2B5E EB         +1  7067         mov a,r3
2B5F 9509       +1  7068         subb    a,ltemp+1
2B61 402C       +1  7069         jc  yes
2B63 700C       +1  7070         jnz no
2B65 EC         +1  7071         mov a,r4
2B66 950A       +1  7072         subb    a,ltemp+2
2B68 4025       +1  7073         jc  yes
2B6A 7005       +1  7074         jnz no
2B6C ED         +1  7075         mov a,r5
2B6D 950B       +1  7076         subb    a,ltemp+3
2B6F 401E       +1  7077         jc  yes
2B71            +1  7078     no:
2B71 E50B       +1  7079         mov a,ltemp+3   ;shift divisor up one bit
2B73 250B       +1  7080         add a,ltemp+3
2B75 F50B       +1  7081         mov ltemp+3,a
2B77 E50A       +1  7082         mov a,ltemp+2
2B79 350A       +1  7083         addc    a,ltemp+2
2B7B F50A       +1  7084         mov ltemp+2,a
2B7D E509       +1  7085         mov a,ltemp+1
2B7F 3509       +1  7086         addc    a,ltemp+1
2B81 F509       +1  7087         mov ltemp+1,a
2B83 E508       +1  7088         mov a,ltemp+0
2B85 3508       +1  7089         addc    a,ltemp+0
2B87 F508       +1  7090         mov ltemp+0,a
2B89            +1  7091     midl:
2B89 08         +1  7092         inc r0      ;increment count
2B8A E508       +1  7093         mov a,ltemp+0   ;check for safe to shift some more
2B8C 30E7C7     +1  7094         jnb acc.7,loops  ;loop if top bit clear
2B8F            +1  7095     yes:
2B8F E508       +1  7096         mov a,ltemp+0
2B91 C3         +1  7097         clr c
2B92 9A         +1  7098         subb    a,r2        ;can we subtract now?
2B93 401A       +1  7099         jc  dosub       ;yes, go and do it
2B95 7015       +1  7100         jnz nosub
2B97 E509       +1  7101         mov a,ltemp+1
2B99 9B         +1  7102         subb    a,r3
2B9A 4013       +1  7103         jc  dosub
2B9C 700E       +1  7104         jnz nosub
2B9E E50A       +1  7105         mov a,ltemp+2
2BA0 9C         +1  7106         subb    a,r4
2BA1 400C       +1  7107         jc  dosub
2BA3 7007       +1  7108         jnz nosub
2BA5 E50B       +1  7109         mov a,ltemp+3
2BA7 9D         +1  7110         subb    a,r5
2BA8 4005       +1  7111         jc  dosub
2BAA 6003       +1  7112         jz  dosub
2BAC            +1  7113     nosub:
2BAC C3         +1  7114         clr c
2BAD 8012       +1  7115         sjmp    dosh
2BAF            +1  7116     dosub:
2BAF C3         +1  7117         clr c       ;subtract divisor from dividend
2BB0 ED         +1  7118         mov a,r5
2BB1 950B       +1  7119         subb    a,ltemp+3
2BB3 FD         +1  7120         mov r5,a
2BB4 EC         +1  7121         mov a,r4
2BB5 950A       +1  7122         subb    a,ltemp+2
2BB7 FC         +1  7123         mov r4,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   114

2BB8 EB         +1  7124         mov a,r3
2BB9 9509       +1  7125         subb    a,ltemp+1
2BBB FB         +1  7126         mov r3,a
2BBC EA         +1  7127         mov a,r2
2BBD 9508       +1  7128         subb    a,ltemp+0
2BBF FA         +1  7129         mov r2,a
2BC0 D3         +1  7130         setb    c       ;now set bit for quotient
2BC1            +1  7131     dosh:
2BC1 E50F       +1  7132         mov a,xtemp+3
2BC3 33         +1  7133         rlc a
2BC4 F50F       +1  7134         mov xtemp+3,a
2BC6 E50E       +1  7135         mov a,xtemp+2
2BC8 33         +1  7136         rlc a
2BC9 F50E       +1  7137         mov xtemp+2,a
2BCB E50D       +1  7138         mov a,xtemp+1
2BCD 33         +1  7139         rlc a
2BCE F50D       +1  7140         mov xtemp+1,a
2BD0 E50C       +1  7141         mov a,xtemp+0
2BD2 33         +1  7142         rlc a
2BD3 F50C       +1  7143         mov xtemp+0,a
2BD5 E508       +1  7144         mov a,ltemp+0       ;shift divisor down
2BD7 C3         +1  7145         clr c
2BD8 13         +1  7146         rrc a
2BD9 F508       +1  7147         mov ltemp+0,a
2BDB E509       +1  7148         mov a,ltemp+1
2BDD 13         +1  7149         rrc a
2BDE F509       +1  7150         mov ltemp+1,a
2BE0 E50A       +1  7151         mov a,ltemp+2
2BE2 13         +1  7152         rrc a
2BE3 F50A       +1  7153         mov ltemp+2,a
2BE5 E50B       +1  7154         mov a,ltemp+3
2BE7 13         +1  7155         rrc a
2BE8 F50B       +1  7156         mov ltemp+3,a
                +1  7157     
2BEA D8A3       +1  7158         djnz    r0,yes      ;and continue with the rest
                +1  7159     
2BEC            +1  7160     finis:
2BEC 8D0B       +1  7161         mov ltemp+3,r5
2BEE 8C0A       +1  7162         mov ltemp+2,r4
2BF0 8B09       +1  7163         mov ltemp+1,r3
2BF2 8A08       +1  7164         mov ltemp+0,r2
2BF4 AD0F       +1  7165         mov r5,xtemp+3
2BF6 AC0E       +1  7166         mov r4,xtemp+2
2BF8 AB0D       +1  7167         mov r3,xtemp+1
2BFA AA0C       +1  7168         mov r2,xtemp+0
2BFC 22         +1  7169         ret         ;and return with the satisfaction of a job well done
                +1  7170     
                +1  7171     
                +1  7172     ;   Long multiplication
                +1  7173     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  7174     ;   other in ltemp. It really doesn't matter which one is where.
                +1  7175     
                +1  7176     ;**********************************
                +1  7177     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  7178     ;ст  мл
                +1  7179     ;**********************************
2BFD            +1  7180     llmul:
2BFD            +1  7181     almul:
2BFD            +1  7182     lmul:
2BFD ED         +1  7183         mov a,r5        ;low order byte
2BFE 850BF0     +1  7184         mov b,ltemp+3       ;times low order byte
2C01 A4         +1  7185         mul ab
2C02 F50F       +1  7186         mov xtemp+3,a       ;store low
2C04 85F00E     +1  7187         mov xtemp+2,b   ;and high
2C07 ED         +1  7188         mov a,r5        ;low order
2C08 850AF0     +1  7189         mov b,ltemp+2   ;times next
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   115

2C0B A4         +1  7190         mul ab
2C0C 250E       +1  7191         add a,xtemp+2   ;add in
2C0E F50E       +1  7192         mov xtemp+2,a
2C10 E5F0       +1  7193         mov a,b
2C12 3400       +1  7194         addc    a,#0
2C14 F50D       +1  7195         mov xtemp+1,a
2C16 ED         +1  7196         mov a,r5
2C17 8509F0     +1  7197         mov b,ltemp+1
2C1A A4         +1  7198         mul ab
2C1B 250D       +1  7199         add a,xtemp+1
2C1D F50D       +1  7200         mov xtemp+1,a
2C1F E5F0       +1  7201         mov a,b
2C21 3400       +1  7202         addc    a,#0
2C23 F50C       +1  7203         mov xtemp+0,a
2C25 ED         +1  7204         mov a,r5
2C26 8508F0     +1  7205         mov b,ltemp+0
2C29 A4         +1  7206         mul ab
2C2A 250C       +1  7207         add a,xtemp+0
2C2C F50C       +1  7208         mov xtemp+0,a
2C2E EC         +1  7209         mov a,r4
2C2F 850BF0     +1  7210         mov b,ltemp+3
2C32 A4         +1  7211         mul ab
2C33 250E       +1  7212         add a,xtemp+2
2C35 F50E       +1  7213         mov xtemp+2,a
2C37 E5F0       +1  7214         mov a,b
2C39 350D       +1  7215         addc    a,xtemp+1
2C3B F50D       +1  7216         mov xtemp+1,a
2C3D E50C       +1  7217         mov a,xtemp+0
2C3F 3400       +1  7218         addc    a,#0
2C41 F50C       +1  7219         mov xtemp+0,a
2C43 EC         +1  7220         mov a,r4
2C44 850AF0     +1  7221         mov b,ltemp+2
2C47 A4         +1  7222         mul ab
2C48 250D       +1  7223         add a,xtemp+1
2C4A F50D       +1  7224         mov xtemp+1,a
2C4C E5F0       +1  7225         mov a,b
2C4E 350C       +1  7226         addc    a,xtemp+0
2C50 F50C       +1  7227         mov xtemp+0,a
2C52 EC         +1  7228         mov a,r4
2C53 8509F0     +1  7229         mov b,ltemp+1
2C56 A4         +1  7230         mul ab
2C57 250C       +1  7231         add a,xtemp+0
2C59 F50C       +1  7232         mov xtemp+0,a
                +1  7233     
2C5B EB         +1  7234         mov a,r3
2C5C 850BF0     +1  7235         mov b,ltemp+3
2C5F A4         +1  7236         mul ab
2C60 250D       +1  7237         add a,xtemp+1
2C62 F50D       +1  7238         mov xtemp+1,a
2C64 E5F0       +1  7239         mov a,b
2C66 350C       +1  7240         addc    a,xtemp+0
2C68 F50C       +1  7241         mov xtemp+0,a
2C6A EB         +1  7242         mov a,r3
2C6B 850AF0     +1  7243         mov b,ltemp+2
2C6E A4         +1  7244         mul ab
2C6F 250C       +1  7245         add a,xtemp+0
2C71 F50C       +1  7246         mov xtemp+0,a
                +1  7247     
2C73 EA         +1  7248         mov a,r2
2C74 850BF0     +1  7249         mov b,ltemp+3
2C77 A4         +1  7250         mul ab
2C78 250C       +1  7251         add a,xtemp+0
2C7A FA         +1  7252         mov r2,a
2C7B AB0D       +1  7253         mov r3,xtemp+1
2C7D AC0E       +1  7254         mov r4,xtemp+2
2C7F AD0F       +1  7255         mov r5,xtemp+3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   116

                +1  7256     
2C81 22         +1  7257         ret         ;all done
                +1  7258     ;******************************
                +1  7259     ;из содержимого  r2-r5  вычесть
                +1  7260     ;содержимое          ltemp..ltemp+3
                +1  7261     ;******************************
2C82            +1  7262     llsub:
2C82            +1  7263      lsub:
2C82 ED         +1  7264         mov a,r5
2C83 C3         +1  7265         clr c
2C84 950B       +1  7266         subb    a,11
2C86 FD         +1  7267         mov r5,a
2C87 EC         +1  7268         mov a,r4
2C88 950A       +1  7269         subb    a,10
2C8A FC         +1  7270         mov r4,a
2C8B EB         +1  7271         mov a,r3
2C8C 9509       +1  7272         subb    a,9
2C8E FB         +1  7273         mov r3,a
2C8F EA         +1  7274         mov a,r2
2C90 9508       +1  7275         subb    a,8
2C92 FA         +1  7276         mov r2,a
2C93 22         +1  7277         ret
                +1  7278     
                +1  7279     ;***********************************************
                +1  7280     ;                                                      ст мл
                +1  7281     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7282     ;  r0- адрес младшего байта !!!
                +1  7283     ;результат- r2..r5
                +1  7284     ;***********************************************
                +1  7285     
2C94 C3         +1  7286     ladd:    clr       c
2C95 ED         +1  7287          mov       a,r5
2C96 26         +1  7288          add       a,@r0
2C97 FD         +1  7289          mov       r5,a
2C98 18         +1  7290          dec       r0
2C99 EC         +1  7291          mov       a,r4
2C9A 36         +1  7292          addc      a,@r0
2C9B FC         +1  7293          mov       r4,a
2C9C 18         +1  7294          dec       r0
2C9D EB         +1  7295          mov       a,r3
2C9E 36         +1  7296          addc      a,@r0
2C9F FB         +1  7297          mov       r3,a
2CA0 18         +1  7298          dec       r0
2CA1 EA         +1  7299          mov       a,r2
2CA2 36         +1  7300          addc      a,@r0
2CA3 FA         +1  7301          mov       r2,a
2CA4 22         +1  7302          ret
                +1  7303     ;***********************************************
                +1  7304     ;                                                      ст мл
                +1  7305     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7306     ;  r0- адрес младшего байта !!!
                +1  7307     ;результат- r2..r5
                +1  7308     ;***********************************************
                +1  7309     
2CA5 C3         +1  7310     laddx:    clr       c
2CA6 E2         +1  7311                                             movx            a,@r0
2CA7 2D         +1  7312                                             add                     a,r5
2CA8 FD         +1  7313               mov     r5,a
2CA9 18         +1  7314                             dec     r0
2CAA E2         +1  7315                             movx    a,@r0
2CAB 3C         +1  7316                             addc    a,r4
2CAC FC         +1  7317                             mov     r4,a
2CAD 18         +1  7318                             dec     r0
2CAE E2         +1  7319                             movx    a,@r0
2CAF 3B         +1  7320                             addc    a,r3
2CB0 FB         +1  7321                             mov     r3,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   117

2CB1 18         +1  7322                             dec     r0
2CB2 E2         +1  7323                             movx    a,@r0
2CB3 3A         +1  7324                             addc    a,r2
2CB4 FA         +1  7325                             mov       r2,a
2CB5 22         +1  7326                             ret
                +1  7327     
                +1  7328     ;***********************************************
                +1  7329     ;                                                      ст мл
                +1  7330     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7331     ;  dptr- адрес младшего байта !!!
                +1  7332     ;результат- r2..r5
                +1  7333     ;***********************************************
                +1  7334     
2CB6 C3         +1  7335     addx:    clr       c
2CB7 E0         +1  7336                                             movx            a,@dptr
2CB8 2D         +1  7337                                             add                     a,r5
2CB9 FD         +1  7338               mov     r5,a
2CBA 120000   F +1  7339                             call            dedptr;dec     dptr
2CBD E0         +1  7340                             movx    a,@dptr
2CBE 3C         +1  7341                             addc    a,r4
2CBF FC         +1  7342                             mov     r4,a
2CC0 120000   F +1  7343                             call            dedptr;dec     dptr
2CC3 E0         +1  7344                             movx    a,@dptr
2CC4 3B         +1  7345                             addc    a,r3
2CC5 FB         +1  7346                             mov     r3,a
2CC6 120000   F +1  7347                             call            dedptr;dec     dptr
2CC9 E0         +1  7348                             movx    a,@dptr
2CCA 3A         +1  7349                             addc    a,r2
2CCB FA         +1  7350                             mov       r2,a
2CCC 22         +1  7351                             ret
                +1  7352     
2CCD C0D0       +1  7353     dedptr:         push    psw
2CCF C3         +1  7354                                             clr             c
2CD0 E582       +1  7355                                             mov             a,dpl
2CD2 9401       +1  7356                                             subb    a,#1
2CD4 F582       +1  7357                                             mov             dpl,a
2CD6 E583       +1  7358                                             mov             a,dph
2CD8 9400       +1  7359                                             subb    a,#0
2CDA F583       +1  7360                                             mov             dph,a
2CDC D0D0       +1  7361                                             pop             psw
2CDE 22         +1  7362                                             ret
                    7363     
                    7364     ;$include (d:\amp\floatm.asm)
                +1  7365     ;       Copyright (C) 1988 HI-TECH Software
                +1  7366     
                +1  7367     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7368     
                +1  7369     ;       The format of floating point numbers is as follows:
                +1  7370     
                +1  7371     ;       -----------------
                +1  7372     ;       *     sign      *  1 bit
                +1  7373     ;       -----------------
                +1  7374     ;       *   exponent    *  8 bits
                +1  7375     ;       -----------------
                +1  7376     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7377     ;       -----------------
                +1  7378     
                +1  7379     
                +1  7380     ;       As usual for the 8051 the memory layout has the most significant
                +1  7381     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7382     ;       lowest address.
                +1  7383     
                +1  7384     ;       Calling conventions:
                +1  7385     
                +1  7386     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7387     ;
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   118

                +1  7388     ;       Return value is in r2-r5
                +1  7389     
                +1  7390     ;       Naming conventions: A routine name is constructed by
                +1  7391     
                +1  7392     ;             ASOP
                +1  7393     
                +1  7394     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7395     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7396     ;       Conversion routines are named
                +1  7397     
                +1  7398     ;               AStof
                +1  7399     
                +1  7400     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7401     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7402     ;       Conversion from float to integer is ftol.
                +1  7403     
                +1  7404     ;               .ORG  5000h
                +1  7405     ;               .CODE
                +1  7406     ;       seg     c_text
                +1  7407     
                +1  7408     ;;      $MOD812
----            +1  7409             CSEG
                +1  7410             ;ORG 1000h
                +1  7411     
                +1  7412                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  7413             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7414     
                +1  7415     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7416     ;       macros
                +1  7417     
                +1  7418     saveregs        macro
                +1  7419             push    7
                +1  7420             push    6
                +1  7421             push    1
                +1  7422             push    0
                +1  7423             endm
                +1  7424     
                +1  7425     restregs        macro
                +1  7426             pop     0
                +1  7427             pop     1
                +1  7428             pop     6
                +1  7429             pop     7
                +1  7430             endm
                +1  7431     
                +1  7432     ;addr   
                +1  7433     dan     macro   pad
                +1  7434             mov     a,r5
                +1  7435             add     a,pad+3
                +1  7436             mov     pad+3,a
                +1  7437             mov     a,pad+2
                +1  7438             addc    a,r4
                +1  7439             mov     pad+2,a
                +1  7440             mov     a,pad+1
                +1  7441             addc    a,r3
                +1  7442             mov     pad+1,a
                +1  7443             mov     a,pad+0
                +1  7444             addc    a,r2
                +1  7445             mov     pad,a
                +1  7446             endm
                +1  7447     
                +1  7448     addl    macro  addr
                +1  7449             mov     a,r5
                +1  7450             add     a,addr+3
                +1  7451             mov     r5,a
                +1  7452             mov     a,addr+2
                +1  7453             addc    a,r4
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   119

                +1  7454             mov     r4,a
                +1  7455             mov     a,addr+1
                +1  7456             addc    a,r3
                +1  7457             mov     r3,a
                +1  7458             mov     a,addr+0
                +1  7459             addc    a,r2
                +1  7460             mov     r2,a
                +1  7461             endm
                +1  7462     
                +1  7463     
                +1  7464     add1    macro
                +1  7465             mov     a,r5
                +1  7466             add     a,#1
                +1  7467             mov     r5,a
                +1  7468             clr     a
                +1  7469             addc    a,r4
                +1  7470             mov     r4,a
                +1  7471             clr     a
                +1  7472             addc    a,r3
                +1  7473             mov     r3,a
                +1  7474             clr     a
                +1  7475             addc    a,r2
                +1  7476             mov     r2,a
                +1  7477             endm
                +1  7478     
                +1  7479     shfdn   macro  addr
                +1  7480             clr     c
                +1  7481             mov     a,addr
                +1  7482             rrc     a
                +1  7483             mov     addr,a
                +1  7484             mov     a,addr+1
                +1  7485             rrc     a
                +1  7486             mov     addr+1,a
                +1  7487             mov     a,addr+2
                +1  7488             rrc     a
                +1  7489             mov     addr+2,a
                +1  7490             mov     a,addr+3
                +1  7491             rrc     a
                +1  7492             mov     addr+3,a
                +1  7493             endm
                +1  7494     
                +1  7495     shfup   macro  addr
                +1  7496             clr     c
                +1  7497             mov     a,addr+3
                +1  7498             rlc     a
                +1  7499             mov     addr+3,a
                +1  7500             mov     a,addr+2
                +1  7501             rlc     a
                +1  7502             mov     addr+2,a
                +1  7503             mov     a,addr+1
                +1  7504             rlc     a
                +1  7505             mov     addr+1,a
                +1  7506             mov     a,addr
                +1  7507             rlc     a
                +1  7508             mov     addr,a
                +1  7509             endm
                +1  7510     
                +1  7511     rshift  macro
                +1  7512             clr     c
                +1  7513             mov     a,r2
                +1  7514             rrc     a
                +1  7515             mov     r2,a
                +1  7516             mov     a,r3
                +1  7517             rrc     a
                +1  7518             mov     r3,a
                +1  7519             mov     a,r4
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   120

                +1  7520             rrc     a
                +1  7521             mov     r4,a
                +1  7522             mov     a,r5
                +1  7523             rrc     a
                +1  7524             mov     r5,a
                +1  7525             endm
                +1  7526     rshift1 macro
                +1  7527             setb    c
                +1  7528             mov     a,r2
                +1  7529             rrc     a
                +1  7530             mov     r2,a
                +1  7531             mov     a,r3
                +1  7532             rrc     a
                +1  7533             mov     r3,a
                +1  7534             mov     a,r4
                +1  7535             rrc     a
                +1  7536             mov     r4,a
                +1  7537             mov     a,r5
                +1  7538             rrc     a
                +1  7539             mov     r5,a
                +1  7540             endm
                +1  7541     
                +1  7542     
                +1  7543     lshift  macro
                +1  7544             mov     a,r5
                +1  7545             rlc     a
                +1  7546             mov     r5,a
                +1  7547             mov     a,r4
                +1  7548             rlc     a
                +1  7549             mov     r4,a
                +1  7550             mov     a,r3
                +1  7551             rlc     a
                +1  7552             mov     r3,a
                +1  7553             mov     a,r2
                +1  7554             rlc     a
                +1  7555             mov     r2,a
                +1  7556             endm
                +1  7557     
                +1  7558     neg1    macro
                +1  7559             clr     c
                +1  7560             clr     a
                +1  7561             subb    a,r5
                +1  7562             mov     r5,a
                +1  7563             clr     a
                +1  7564             subb    a,r4
                +1  7565             mov     r4,a
                +1  7566             clr     a
                +1  7567             subb    a,r3
                +1  7568             mov     r3,a
                +1  7569             clr     a
                +1  7570             subb    a,r2
                +1  7571             mov     r2,a
                +1  7572             endm
                +1  7573     
                +1  7574     negm    macro  addr
                +1  7575             clr     c
                +1  7576             clr     a
                +1  7577             subb    a,addr+3
                +1  7578             mov     addr+3,a
                +1  7579             clr     a
                +1  7580             subb    a,addr+2
                +1  7581             mov     addr+2,a
                +1  7582             clr     a
                +1  7583             subb    a,addr+1
                +1  7584             mov     addr+1,a
                +1  7585             clr     a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   121

                +1  7586             subb    a,addr
                +1  7587             mov     addr,a
                +1  7588             endm
                +1  7589     
                +1  7590     copytor macro  addr
                +1  7591             mov     r2,addr
                +1  7592             mov     r3,addr+1
                +1  7593             mov     r4,addr+2
                +1  7594             mov     r5,addr+3
                +1  7595             endm
                +1  7596     
                +1  7597     
                +1  7598     copyrto macro  addr
                +1  7599             mov     addr,r2
                +1  7600             mov     addr+1,r3
                +1  7601             mov     addr+2,r4
                +1  7602             mov     addr+3,r5
                +1  7603             endm
                +1  7604     
                +1  7605     
                +1  7606     ;       Internal representation: in this set of routines a floating number
                +1  7607     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7608     
                +1  7609     ;       Stack offset values
                +1  7610     ;ltemp   equ     28h
                +1  7611     
  0006          +1  7612     cntr    equ     6               ;r6 is the counter
  0007          +1  7613     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7614     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7615     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  7616     exp2    equ     1               ;exponent 1 in r1
  0008          +1  7617     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7618     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7619     
                +1  7620     
                +1  7621     
                +1  7622     
                +1  7623     
                +1  7624     ;DECSIZE EQU     10
                +1  7625     ;NUMSIZE EQU     4
                +1  7626     ;RR4     EQU     4
                +1  7627     ;RR5     EQU     5
                +1  7628     
                +1  7629     ;       unpack1 - unpacks the left operand
                +1  7630     
009E            +1  7631     unpack1:
009E EA         +1  7632             mov     a,r2            ;get sign
009F 5480       +1  7633             anl     a,#80h
00A1 530740     +1  7634             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7635             orl     sign,a          ;store sign
00A6 EB         +1  7636             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7637             rlc     a               ;rotate into carry
00A8 EA         +1  7638             mov     a,r2            ;get rest of exponent
00A9 33         +1  7639             rlc     a               ;and make it 8 bits
00AA F8         +1  7640             mov     r0,a            ;store it
00AB 6006       +1  7641             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  7642             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7643             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7644             ret
00B3            +1  7645     zer1:
00B3 E4         +1  7646             clr     a
00B4 FA         +1  7647             mov     r2,a
00B5 FB         +1  7648             mov     r3,a
00B6 FC         +1  7649             mov     r4,a
00B7 FD         +1  7650             mov     r5,a            ;zero mantissa
00B8 F8         +1  7651             mov     r0,a            ;zero exponent
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   122

00B9 22         +1  7652             ret
                +1  7653     
                +1  7654     ;       unpack2 - unpacks right operand
                +1  7655     
00BA            +1  7656     unpack2:
00BA E508       +1  7657             mov     a,ltemp         ;get sign
00BC 13         +1  7658             rrc     a               ;shift down
00BD 5440       +1  7659             anl     a,#40h          ;mask out sign
00BF 530780     +1  7660             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7661             orl     sign,a
00C4 E509       +1  7662             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7663             rlc     a               ;rotate into carry
00C7 E508       +1  7664             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7665             rlc     a               ;and make it 8 bits
00CA F9         +1  7666             mov     r1,a            ;store it
00CB 6007       +1  7667             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7668             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7669             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7670             ret
00D4            +1  7671     zer2:
00D4 E4         +1  7672             clr     a
00D5 F508       +1  7673             mov     ltemp,a
00D7 F509       +1  7674             mov     ltemp+1,a
00D9 F50A       +1  7675             mov     ltemp+2,a
00DB F50B       +1  7676             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7677             ret
                +1  7678     
                +1  7679     ;       pack1 - put operand 1 back into float format
                +1  7680     
00DE            +1  7681     pack1:
00DE E8         +1  7682             mov     a,r0            ;get exponent
00DF C3         +1  7683             clr     c
00E0 13         +1  7684             rrc     a               ;shift down 1 bit
00E1 530780     +1  7685             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7686             orl     a,r7            ;or in sign bit
00E5 FA         +1  7687             mov     r2,a            ;store
00E6 E8         +1  7688             mov     a,r0            ;get other bit
00E7 03         +1  7689             rr      a               ;rotate into hi bit
00E8 5480       +1  7690             anl     a,#80h          ;mask
00EA 53037F     +1  7691             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7692             orl     mant1+1,a       ;put in
00EF 22         +1  7693             ret
                +1  7694     
                +1  7695     
                +1  7696     ;       norm1 - normalize the unpacked value in 1
                +1  7697     
00F0            +1  7698     norm1:
00F0 E8         +1  7699             mov     a,r0            ;get exponent
00F1 60C0       +1  7700             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7701             mov     a,r2            ;get hi byte
00F4 6023       +1  7702             jz      norup           ;zero, so shift up if anything
00F6            +1  7703     nordn:
00F6 EA         +1  7704             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7705             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7706+3           add1                    ;add in a rounding bit
00FA ED         +1  7707+1           mov     a,r5
00FB 2401       +1  7708+1           add     a,#1
00FD FD         +1  7709+1           mov     r5,a
00FE E4         +1  7710+1           clr     a
00FF 3C         +1  7711+1           addc    a,r4
0100 FC         +1  7712+1           mov     r4,a
0101 E4         +1  7713+1           clr     a
0102 3B         +1  7714+1           addc    a,r3
0103 FB         +1  7715+1           mov     r3,a
0104 E4         +1  7716+1           clr     a
0105 3A         +1  7717+1           addc    a,r2
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   123

0106 FA         +1  7718+1           mov     r2,a
0107            +1  7719     nordn1:
                +1  7720+3           rshift                  ;shift down 1 bit
0107 C3         +1  7721+1           clr     c
0108 EA         +1  7722+1           mov     a,r2
0109 13         +1  7723+1           rrc     a
010A FA         +1  7724+1           mov     r2,a
010B EB         +1  7725+1           mov     a,r3
010C 13         +1  7726+1           rrc     a
010D FB         +1  7727+1           mov     r3,a
010E EC         +1  7728+1           mov     a,r4
010F 13         +1  7729+1           rrc     a
0110 FC         +1  7730+1           mov     r4,a
0111 ED         +1  7731+1           mov     a,r5
0112 13         +1  7732+1           rrc     a
0113 FD         +1  7733+1           mov     r5,a
0114 08         +1  7734             inc     r0              ;adjust exponent
0115 EA         +1  7735             mov     a,r2            ;test high byte
0116 70DE       +1  7736             jnz     nordn           ;loop
0118 22         +1  7737             ret                     ;done
                +1  7738     
0119            +1  7739     norup:
0119 4B         +1  7740             orl     a,r3
011A 4C         +1  7741             orl     a,r4
011B 4D         +1  7742             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7743             jz      zer1            ;it is - make it true zero
011E            +1  7744     norup1:
011E EB         +1  7745             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7746             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7747             clr     c
                +1  7748+3           lshift                  ;shift mantissa up
0123 ED         +1  7749+1           mov     a,r5
0124 33         +1  7750+1           rlc     a
0125 FD         +1  7751+1           mov     r5,a
0126 EC         +1  7752+1           mov     a,r4
0127 33         +1  7753+1           rlc     a
0128 FC         +1  7754+1           mov     r4,a
0129 EB         +1  7755+1           mov     a,r3
012A 33         +1  7756+1           rlc     a
012B FB         +1  7757+1           mov     r3,a
012C EA         +1  7758+1           mov     a,r2
012D 33         +1  7759+1           rlc     a
012E FA         +1  7760+1           mov     r2,a
012F 18         +1  7761             dec     r0              ;adjust exponent
0130 80EC       +1  7762             jmp     norup1
0132            +1  7763     norup2:
0132 22         +1  7764             ret                     ;finito
                +1  7765     
                +1  7766     
                +1  7767     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7768     ;       exponents are equal. This requires the smaller number to have
                +1  7769     ;       its exponent incremented and its mantissa shifted right.
                +1  7770     
0133            +1  7771     denorm:
0133 E8         +1  7772             mov     a,r0
0134 C3         +1  7773             clr     c
0135 99         +1  7774             subb    a,r1            ;compare exponents
0136 5029       +1  7775             jnc     up2a            ;shift operand 2
0138            +1  7776     up1:
0138 08         +1  7777             inc     r0              ;increment exponent
                +1  7778+3           rshift                  ;shift mantissa down
0139 C3         +1  7779+1           clr     c
013A EA         +1  7780+1           mov     a,r2
013B 13         +1  7781+1           rrc     a
013C FA         +1  7782+1           mov     r2,a
013D EB         +1  7783+1           mov     a,r3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   124

013E 13         +1  7784+1           rrc     a
013F FB         +1  7785+1           mov     r3,a
0140 EC         +1  7786+1           mov     a,r4
0141 13         +1  7787+1           rrc     a
0142 FC         +1  7788+1           mov     r4,a
0143 ED         +1  7789+1           mov     a,r5
0144 13         +1  7790+1           rrc     a
0145 FD         +1  7791+1           mov     r5,a
0146 E8         +1  7792             mov     a,r0
0147 B501EE     +1  7793             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7794             ret
                +1  7795     
014B            +1  7796     up2:
014B 09         +1  7797             inc     r1              ;increment exponent 2
                +1  7798+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7799+1           clr     c
014D E508       +1  7800+1           mov     a,mant2
014F 13         +1  7801+1           rrc     a
0150 F508       +1  7802+1           mov     mant2,a
0152 E509       +1  7803+1           mov     a,mant2+1
0154 13         +1  7804+1           rrc     a
0155 F509       +1  7805+1           mov     mant2+1,a
0157 E50A       +1  7806+1           mov     a,mant2+2
0159 13         +1  7807+1           rrc     a
015A F50A       +1  7808+1           mov     mant2+2,a
015C E50B       +1  7809+1           mov     a,mant2+3
015E 13         +1  7810+1           rrc     a
015F F50B       +1  7811+1           mov     mant2+3,a
0161            +1  7812     up2a:
0161 E8         +1  7813             mov     a,r0            ;compare exponents
0162 B501E6     +1  7814             cjne    a,exp2,up2
0165 22         +1  7815             ret                     ;all done
                +1  7816     ;------------------------------------------------------------------
                +1  7817     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7818     
0166            +1  7819     fladd:
                +1  7820+3           saveregs
0166 C007       +1  7821+1           push    7
0168 C006       +1  7822+1           push    6
016A C001       +1  7823+1           push    1
016C C000       +1  7824+1           push    0
016E 119E       +1  7825             call    unpack1
0170 11BA       +1  7826             call    unpack2
0172 3133       +1  7827             call    denorm
0174 E507       +1  7828             mov     a,sign
0176 30E70D     +1  7829             jnb     acc.7,ok1       ;test left sign
                +1  7830+3           neg1                    ;negate op1
0179 C3         +1  7831+1           clr     c
017A E4         +1  7832+1           clr     a
017B 9D         +1  7833+1           subb    a,r5
017C FD         +1  7834+1           mov     r5,a
017D E4         +1  7835+1           clr     a
017E 9C         +1  7836+1           subb    a,r4
017F FC         +1  7837+1           mov     r4,a
0180 E4         +1  7838+1           clr     a
0181 9B         +1  7839+1           subb    a,r3
0182 FB         +1  7840+1           mov     r3,a
0183 E4         +1  7841+1           clr     a
0184 9A         +1  7842+1           subb    a,r2
0185 FA         +1  7843+1           mov     r2,a
0186            +1  7844     ok1:
0186 E507       +1  7845             mov     a,sign
0188 30E615     +1  7846             jnb     acc.6,ok2       ;test right sign
                +1  7847+3           negm    mant2           ;negate op2
018B C3         +1  7848+1           clr     c
018C E4         +1  7849+1           clr     a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   125

018D 950B       +1  7850+1           subb    a,mant2+3
018F F50B       +1  7851+1           mov     mant2+3,a
0191 E4         +1  7852+1           clr     a
0192 950A       +1  7853+1           subb    a,mant2+2
0194 F50A       +1  7854+1           mov     mant2+2,a
0196 E4         +1  7855+1           clr     a
0197 9509       +1  7856+1           subb    a,mant2+1
0199 F509       +1  7857+1           mov     mant2+1,a
019B E4         +1  7858+1           clr     a
019C 9508       +1  7859+1           subb    a,mant2
019E F508       +1  7860+1           mov     mant2,a
01A0            +1  7861     ok2:
                +1  7862+3           addl    mant2           ;add mantissas
01A0 ED         +1  7863+1           mov     a,r5
01A1 250B       +1  7864+1           add     a,mant2+3
01A3 FD         +1  7865+1           mov     r5,a
01A4 E50A       +1  7866+1           mov     a,mant2+2
01A6 3C         +1  7867+1           addc    a,r4
01A7 FC         +1  7868+1           mov     r4,a
01A8 E509       +1  7869+1           mov     a,mant2+1
01AA 3B         +1  7870+1           addc    a,r3
01AB FB         +1  7871+1           mov     r3,a
01AC E508       +1  7872+1           mov     a,mant2+0
01AE 3A         +1  7873+1           addc    a,r2
01AF FA         +1  7874+1           mov     r2,a
01B0 E4         +1  7875             clr     a
01B1 FF         +1  7876             mov     r7,a            ;clear sign
01B2 EA         +1  7877             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7878             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7879             mov     r7,a            ;store sign
                +1  7880+3           neg1                    ;negate mantissa
01B7 C3         +1  7881+1           clr     c
01B8 E4         +1  7882+1           clr     a
01B9 9D         +1  7883+1           subb    a,r5
01BA FD         +1  7884+1           mov     r5,a
01BB E4         +1  7885+1           clr     a
01BC 9C         +1  7886+1           subb    a,r4
01BD FC         +1  7887+1           mov     r4,a
01BE E4         +1  7888+1           clr     a
01BF 9B         +1  7889+1           subb    a,r3
01C0 FB         +1  7890+1           mov     r3,a
01C1 E4         +1  7891+1           clr     a
01C2 9A         +1  7892+1           subb    a,r2
01C3 FA         +1  7893+1           mov     r2,a
01C4            +1  7894     ok3:
01C4 11F0       +1  7895             call    norm1
01C6 11DE       +1  7896             call    pack1           ;pack normalized result
                +1  7897+3           restregs                ;and return
01C8 D000       +1  7898+1           pop     0
01CA D001       +1  7899+1           pop     1
01CC D006       +1  7900+1           pop     6
01CE D007       +1  7901+1           pop     7
01D0 22         +1  7902             ret
                +1  7903     ;-------------------------------------------------------------
                +1  7904     ;       Subtract the number ltemp from the number in r2-r5
                +1  7905     
01D1            +1  7906     flsub:
01D1 630880     +1  7907             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7908             jmp     fladd           ;and add!
                +1  7909     
                +1  7910     ;================================================================
                +1  7911     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7912     
01D6            +1  7913     flcmp:
01D6 EA         +1  7914            mov     a,r2            ;get sign of left
01D7 6508       +1  7915            xrl     a,ltemp         ;calculate new sign
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   126

01D9 30E706     +1  7916            jnb     acc.7,cexp      ;same, go check exponent
                +1  7917     ;ifdef SMALL_MODEL
01DC EA         +1  7918             mov     a,r2            ;get sign of left again
01DD 33         +1  7919             rlc     a
01DE 5001       +1  7920             jnc     flout
                +1  7921     ;endif
01E0 D3         +1  7922             setb    c
01E1 22         +1  7923     flout:          ret                    ;return with acc < 0
                +1  7924     
01E2            +1  7925     cexp:
01E2 C3         +1  7926            clr     c
01E3 EA         +1  7927            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7928            subb    a,ltemp
01E6 7010       +1  7929            jnz     fnd
01E8 EB         +1  7930            mov     a,r3
01E9 9509       +1  7931            subb    a,ltemp+1
01EB 700B       +1  7932            jnz     fnd
01ED EC         +1  7933            mov     a,r4
01EE 950A       +1  7934            subb    a,ltemp+2
01F0 7006       +1  7935            jnz     fnd
01F2 ED         +1  7936            mov     a,r5
01F3 950B       +1  7937            subb    a,ltemp+3
01F5 7001       +1  7938            jnz     fnd
01F7            +1  7939     cdone:
01F7 22         +1  7940            ret                     ;return with acc == 0
01F8            +1  7941     fnd:
01F8 8AF0       +1  7942           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7943          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7944            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7945                         orl         a,#1                          ;make non-zero
0201 B3         +1  7946             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7947             ret
                +1  7948     ;==============================================================
                +1  7949     
                +1  7950     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7951     ;       the result in r2-r5
                +1  7952     
0203            +1  7953     flmul:
                +1  7954+3           saveregs
0203 C007       +1  7955+1           push    7
0205 C006       +1  7956+1           push    6
0207 C001       +1  7957+1           push    1
0209 C000       +1  7958+1           push    0
020B 119E       +1  7959             call    unpack1
020D 11BA       +1  7960             call    unpack2
020F E4         +1  7961             clr     a
0210 F50C       +1  7962             mov     prod,a
0212 F50D       +1  7963             mov     prod+1,a        ;clear product
0214 F50E       +1  7964             mov     prod+2,a
0216 F50F       +1  7965             mov     prod+3,a
0218 7E07       +1  7966             mov     r6,#7           ;initialize counter
021A            +1  7967     mup1:
                +1  7968+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7969+1           clr     c
021B E508       +1  7970+1           mov     a,mant2
021D 13         +1  7971+1           rrc     a
021E F508       +1  7972+1           mov     mant2,a
0220 E509       +1  7973+1           mov     a,mant2+1
0222 13         +1  7974+1           rrc     a
0223 F509       +1  7975+1           mov     mant2+1,a
0225 E50A       +1  7976+1           mov     a,mant2+2
0227 13         +1  7977+1           rrc     a
0228 F50A       +1  7978+1           mov     mant2+2,a
022A E50B       +1  7979+1           mov     a,mant2+3
022C 13         +1  7980+1           rrc     a
022D F50B       +1  7981+1           mov     mant2+3,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   127

022F 5014       +1  7982             jnc     nobit           ;skip if lsb was zero
                +1  7983+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7984+1           mov     a,r5
0232 250F       +1  7985+1           add     a,prod+3
0234 F50F       +1  7986+1           mov     prod+3,a
0236 E50E       +1  7987+1           mov     a,prod+2
0238 3C         +1  7988+1           addc    a,r4
0239 F50E       +1  7989+1           mov     prod+2,a
023B E50D       +1  7990+1           mov     a,prod+1
023D 3B         +1  7991+1           addc    a,r3
023E F50D       +1  7992+1           mov     prod+1,a
0240 E50C       +1  7993+1           mov     a,prod+0
0242 3A         +1  7994+1           addc    a,r2
0243 F50C       +1  7995+1           mov     prod,a
0245            +1  7996     nobit:
                +1  7997+3           lshift                  ;shift multiplicand up
0245 ED         +1  7998+1           mov     a,r5
0246 33         +1  7999+1           rlc     a
0247 FD         +1  8000+1           mov     r5,a
0248 EC         +1  8001+1           mov     a,r4
0249 33         +1  8002+1           rlc     a
024A FC         +1  8003+1           mov     r4,a
024B EB         +1  8004+1           mov     a,r3
024C 33         +1  8005+1           rlc     a
024D FB         +1  8006+1           mov     r3,a
024E EA         +1  8007+1           mov     a,r2
024F 33         +1  8008+1           rlc     a
0250 FA         +1  8009+1           mov     r2,a
0251 DEC7       +1  8010             djnz    r6,mup1         ;loop if more
                +1  8011     
0253 7E11       +1  8012             mov     r6,#17          ;re-initalize counter
0255 8015       +1  8013             sjmp    mup3
0257            +1  8014     mup11:
                +1  8015+3           shfdn   prod            ;shift product right
0257 C3         +1  8016+1           clr     c
0258 E50C       +1  8017+1           mov     a,prod
025A 13         +1  8018+1           rrc     a
025B F50C       +1  8019+1           mov     prod,a
025D E50D       +1  8020+1           mov     a,prod+1
025F 13         +1  8021+1           rrc     a
0260 F50D       +1  8022+1           mov     prod+1,a
0262 E50E       +1  8023+1           mov     a,prod+2
0264 13         +1  8024+1           rrc     a
0265 F50E       +1  8025+1           mov     prod+2,a
0267 E50F       +1  8026+1           mov     a,prod+3
0269 13         +1  8027+1           rrc     a
026A F50F       +1  8028+1           mov     prod+3,a
026C            +1  8029     mup3:
                +1  8030+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  8031+1           clr     c
026D E508       +1  8032+1           mov     a,mant2
026F 13         +1  8033+1           rrc     a
0270 F508       +1  8034+1           mov     mant2,a
0272 E509       +1  8035+1           mov     a,mant2+1
0274 13         +1  8036+1           rrc     a
0275 F509       +1  8037+1           mov     mant2+1,a
0277 E50A       +1  8038+1           mov     a,mant2+2
0279 13         +1  8039+1           rrc     a
027A F50A       +1  8040+1           mov     mant2+2,a
027C E50B       +1  8041+1           mov     a,mant2+3
027E 13         +1  8042+1           rrc     a
027F F50B       +1  8043+1           mov     mant2+3,a
0281 5014       +1  8044             jnc     mup2            ;skip if bit not set
                +1  8045+3           dan     prod            ;add to prod
0283 ED         +1  8046+1           mov     a,r5
0284 250F       +1  8047+1           add     a,prod+3
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   128

0286 F50F       +1  8048+1           mov     prod+3,a
0288 E50E       +1  8049+1           mov     a,prod+2
028A 3C         +1  8050+1           addc    a,r4
028B F50E       +1  8051+1           mov     prod+2,a
028D E50D       +1  8052+1           mov     a,prod+1
028F 3B         +1  8053+1           addc    a,r3
0290 F50D       +1  8054+1           mov     prod+1,a
0292 E50C       +1  8055+1           mov     a,prod+0
0294 3A         +1  8056+1           addc    a,r2
0295 F50C       +1  8057+1           mov     prod,a
0297            +1  8058     mup2:
0297 DEBE       +1  8059             djnz    r6,mup11        ;loop if more
0299 E8         +1  8060             mov     a,r0            ;get exp1
029A 29         +1  8061             add     a,r1            ;add exp2
029B 247A       +1  8062             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  8063             mov     r0,a            ;store
029E EF         +1  8064             mov     a,r7            ;get sign
029F 23         +1  8065             rl      a               ;rotate bit into msb
02A0 6207       +1  8066             xrl     sign,a          ;xor with other bit
                +1  8067+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  8068+1           mov     r2,prod
02A4 AB0D       +1  8069+1           mov     r3,prod+1
02A6 AC0E       +1  8070+1           mov     r4,prod+2
02A8 AD0F       +1  8071+1           mov     r5,prod+3
02AA 11F0       +1  8072             call    norm1           ;normalize
02AC 11DE       +1  8073             call    pack1
                +1  8074+3           restregs
02AE D000       +1  8075+1           pop     0
02B0 D001       +1  8076+1           pop     1
02B2 D006       +1  8077+1           pop     6
02B4 D007       +1  8078+1           pop     7
02B6 22         +1  8079             ret
                +1  8080     ;-----------------------------------------------------------
                +1  8081     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  8082     
02B7            +1  8083     fldiv:
                +1  8084+3           saveregs
02B7 C007       +1  8085+1           push    7
02B9 C006       +1  8086+1           push    6
02BB C001       +1  8087+1           push    1
02BD C000       +1  8088+1           push    0
02BF 119E       +1  8089             call    unpack1
02C1 11BA       +1  8090             call    unpack2
02C3 E4         +1  8091             clr     a
02C4 F50C       +1  8092             mov     prod,a
02C6 F50D       +1  8093             mov     prod+1,a
02C8 F50E       +1  8094             mov     prod+2,a
02CA F50F       +1  8095             mov     prod+3,a
02CC E9         +1  8096             mov     a,r1            ;check for zero divisor
02CD 6067       +1  8097             jz      div9
02CF E8         +1  8098             mov     a,r0            ;check for zero dividend
02D0 6064       +1  8099             jz      div9
02D2 C3         +1  8100             clr     c
02D3 99         +1  8101             subb    a,r1            ;compute new exponent
02D4 2478       +1  8102             add     a,#127-7        ;unbias
02D6 F8         +1  8103             mov     r0,a            ;store back
02D7 EF         +1  8104             mov     a,r7            ;get sign
02D8 23         +1  8105             rl      a
02D9 6207       +1  8106             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  8107             mov     r6,#24+7        ;initialize counter
02DD            +1  8108     div1:
                +1  8109+3           shfup   prod            ;shift quotient up
02DD C3         +1  8110+1           clr     c
02DE E50F       +1  8111+1           mov     a,prod+3
02E0 33         +1  8112+1           rlc     a
02E1 F50F       +1  8113+1           mov     prod+3,a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   129

02E3 E50E       +1  8114+1           mov     a,prod+2
02E5 33         +1  8115+1           rlc     a
02E6 F50E       +1  8116+1           mov     prod+2,a
02E8 E50D       +1  8117+1           mov     a,prod+1
02EA 33         +1  8118+1           rlc     a
02EB F50D       +1  8119+1           mov     prod+1,a
02ED E50C       +1  8120+1           mov     a,prod
02EF 33         +1  8121+1           rlc     a
02F0 F50C       +1  8122+1           mov     prod,a
02F2 C3         +1  8123             clr     c
02F3 EA         +1  8124             mov     a,r2            ;compare values
02F4 9508       +1  8125             subb    a,mant2
02F6 4028       +1  8126             jc      div2            ;skip if bigger
02F8 7013       +1  8127             jnz     div3
02FA EB         +1  8128             mov     a,r3            ;compare values
02FB 9509       +1  8129             subb    a,mant2+1
02FD 4021       +1  8130             jc      div2            ;skip if bigger
02FF 700C       +1  8131             jnz     div3
0301 EC         +1  8132             mov     a,r4            ;compare values
0302 950A       +1  8133             subb    a,mant2+2
0304 401A       +1  8134             jc      div2            ;skip if bigger
0306 7005       +1  8135             jnz     div3
0308 ED         +1  8136             mov     a,r5            ;compare values
0309 950B       +1  8137             subb    a,mant2+3
030B 4013       +1  8138             jc      div2            ;skip if bigger
030D            +1  8139     div3:
030D ED         +1  8140             mov     a,r5
030E 950B       +1  8141             subb    a,mant2+3
0310 FD         +1  8142             mov     r5,a
0311 EC         +1  8143             mov     a,r4
0312 950A       +1  8144             subb    a,mant2+2               ;do subtraction
0314 FC         +1  8145             mov     r4,a
0315 EB         +1  8146             mov     a,r3
0316 9509       +1  8147             subb    a,mant2+1               ;do subtraction
0318 FB         +1  8148             mov     r3,a
0319 EA         +1  8149             mov     a,r2
031A 9508       +1  8150             subb    a,mant2         ;do subtraction
031C FA         +1  8151             mov     r2,a
031D 430F01     +1  8152             orl     prod+3,#1       ;set lsb in quotient
0320            +1  8153     div2:
                +1  8154+3           lshift                  ;shift dividend up
0320 ED         +1  8155+1           mov     a,r5
0321 33         +1  8156+1           rlc     a
0322 FD         +1  8157+1           mov     r5,a
0323 EC         +1  8158+1           mov     a,r4
0324 33         +1  8159+1           rlc     a
0325 FC         +1  8160+1           mov     r4,a
0326 EB         +1  8161+1           mov     a,r3
0327 33         +1  8162+1           rlc     a
0328 FB         +1  8163+1           mov     r3,a
0329 EA         +1  8164+1           mov     a,r2
032A 33         +1  8165+1           rlc     a
032B FA         +1  8166+1           mov     r2,a
032C DEAF       +1  8167             djnz    r6,div1         ;loop if more
                +1  8168+3           copytor prod            ;copy quotient
032E AA0C       +1  8169+1           mov     r2,prod
0330 AB0D       +1  8170+1           mov     r3,prod+1
0332 AC0E       +1  8171+1           mov     r4,prod+2
0334 AD0F       +1  8172+1           mov     r5,prod+3
0336            +1  8173     div9:
0336 11F0       +1  8174             call    norm1           ;now normalize result
0338 11DE       +1  8175             call    pack1           ;pack it up
                +1  8176+3           restregs                ;restore registers
033A D000       +1  8177+1           pop     0
033C D001       +1  8178+1           pop     1
033E D006       +1  8179+1           pop     6
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   130

0340 D007       +1  8180+1           pop     7
0342 22         +1  8181             ret
                +1  8182     ;------------------------------------------------------------------
                +1  8183     
                +1  8184     ;       Float to long conversion: if the exponent is less than the
                +1  8185     ;       excess value, the result is zero. If the exponent is so large
                +1  8186     ;       that the value would be shifted out, the result is overflow.
                +1  8187     ;       Otherwise shift the mantissa up or down as required.
                +1  8188     
0343            +1  8189     ftol:
                +1  8190+3           saveregs
0343 C007       +1  8191+1           push    7
0345 C006       +1  8192+1           push    6
0347 C001       +1  8193+1           push    1
0349 C000       +1  8194+1           push    0
034B EA         +1  8195             mov     a,r2
034C B4BF09     +1  8196             cjne    a,#0bfh,ne05
034F EB         +1  8197             mov     a,r3
0350 7006       +1  8198             jnz     ne05
0352 EC         +1  8199             mov     a,r4
0353 7003       +1  8200             jnz     ne05
0355 ED         +1  8201             mov     a,r5
0356 6024       +1  8202             jz      ftol1
0358 119E       +1  8203     ne05:   call    unpack1
035A E8         +1  8204             mov     a,r0            ;get exponent
035B 2482       +1  8205             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  8206             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  8207             mov     a,r7            ;get sign
0361 30E70D     +1  8208             jnb     acc.7,ftol4     ;skip if +ve
                +1  8209+3           neg1                    ;negate it
0364 C3         +1  8210+1           clr     c
0365 E4         +1  8211+1           clr     a
0366 9D         +1  8212+1           subb    a,r5
0367 FD         +1  8213+1           mov     r5,a
0368 E4         +1  8214+1           clr     a
0369 9C         +1  8215+1           subb    a,r4
036A FC         +1  8216+1           mov     r4,a
036B E4         +1  8217+1           clr     a
036C 9B         +1  8218+1           subb    a,r3
036D FB         +1  8219+1           mov     r3,a
036E E4         +1  8220+1           clr     a
036F 9A         +1  8221+1           subb    a,r2
0370 FA         +1  8222+1           mov     r2,a
0371            +1  8223     ftol4:
0371 E8         +1  8224             mov     a,r0            ;get exponent
0372 246A       +1  8225             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  8226             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  8227             mov     r0,a            ;save it
0378 24F8       +1  8228             add     a,#-8           ;if > 8, too big
037A 500E       +1  8229             jnc     ftol3
037C            +1  8230     ftol1:
037C E4         +1  8231             clr     a
037D FA         +1  8232             mov     r2,a
037E FB         +1  8233             mov     r3,a
037F FC         +1  8234             mov     r4,a
0380 FD         +1  8235             mov     r5,a
0381            +1  8236     ftol9:
                +1  8237+3           restregs
0381 D000       +1  8238+1           pop     0
0383 D001       +1  8239+1           pop     1
0385 D006       +1  8240+1           pop     6
0387 D007       +1  8241+1           pop     7
0389 22         +1  8242             ret
038A            +1  8243     ftol3:
038A E8         +1  8244             mov     a,r0
038B FE         +1  8245             mov     r6,a            ;store in counter
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   131

038C 60F3       +1  8246             jz      ftol9           ;if zero, do nothing
038E            +1  8247     ftol33:
                +1  8248+3           lshift                  ;shift up
038E ED         +1  8249+1           mov     a,r5
038F 33         +1  8250+1           rlc     a
0390 FD         +1  8251+1           mov     r5,a
0391 EC         +1  8252+1           mov     a,r4
0392 33         +1  8253+1           rlc     a
0393 FC         +1  8254+1           mov     r4,a
0394 EB         +1  8255+1           mov     a,r3
0395 33         +1  8256+1           rlc     a
0396 FB         +1  8257+1           mov     r3,a
0397 EA         +1  8258+1           mov     a,r2
0398 33         +1  8259+1           rlc     a
0399 FA         +1  8260+1           mov     r2,a
039A DEF2       +1  8261             djnz    r6,ftol33       ;and loop
039C 80E3       +1  8262             sjmp    ftol9
039E            +1  8263     ftol2:
039E F4         +1  8264             cpl     a               ;complement
039F FE         +1  8265             mov     r6,a
03A0 6022       +1  8266             jz      ftol22
03A2            +1  8267     ftol23:
03A2 EF         +1  8268             mov     a,r7
03A3 30E70F     +1  8269             jnb     acc.7,ftol24
                +1  8270+3           rshift1
03A6 D3         +1  8271+1           setb    c
03A7 EA         +1  8272+1           mov     a,r2
03A8 13         +1  8273+1           rrc     a
03A9 FA         +1  8274+1           mov     r2,a
03AA EB         +1  8275+1           mov     a,r3
03AB 13         +1  8276+1           rrc     a
03AC FB         +1  8277+1           mov     r3,a
03AD EC         +1  8278+1           mov     a,r4
03AE 13         +1  8279+1           rrc     a
03AF FC         +1  8280+1           mov     r4,a
03B0 ED         +1  8281+1           mov     a,r5
03B1 13         +1  8282+1           rrc     a
03B2 FD         +1  8283+1           mov     r5,a
03B3 800D       +1  8284             jmp     ftol25
03B5            +1  8285+3   ftol24: rshift                  ;shift down
03B5 C3         +1  8286+1           clr     c
03B6 EA         +1  8287+1           mov     a,r2
03B7 13         +1  8288+1           rrc     a
03B8 FA         +1  8289+1           mov     r2,a
03B9 EB         +1  8290+1           mov     a,r3
03BA 13         +1  8291+1           rrc     a
03BB FB         +1  8292+1           mov     r3,a
03BC EC         +1  8293+1           mov     a,r4
03BD 13         +1  8294+1           rrc     a
03BE FC         +1  8295+1           mov     r4,a
03BF ED         +1  8296+1           mov     a,r5
03C0 13         +1  8297+1           rrc     a
03C1 FD         +1  8298+1           mov     r5,a
03C2 DEDE       +1  8299     ftol25: djnz    r6,ftol23
03C4            +1  8300     ftol22:
                +1  8301+3           add1                    ;round
03C4 ED         +1  8302+1           mov     a,r5
03C5 2401       +1  8303+1           add     a,#1
03C7 FD         +1  8304+1           mov     r5,a
03C8 E4         +1  8305+1           clr     a
03C9 3C         +1  8306+1           addc    a,r4
03CA FC         +1  8307+1           mov     r4,a
03CB E4         +1  8308+1           clr     a
03CC 3B         +1  8309+1           addc    a,r3
03CD FB         +1  8310+1           mov     r3,a
03CE E4         +1  8311+1           clr     a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   132

03CF 3A         +1  8312+1           addc    a,r2
03D0 FA         +1  8313+1           mov     r2,a
03D1 EF         +1  8314             mov     a,r7
03D2 30E70F     +1  8315             jnb     acc.7,ftol26
                +1  8316+3           rshift1
03D5 D3         +1  8317+1           setb    c
03D6 EA         +1  8318+1           mov     a,r2
03D7 13         +1  8319+1           rrc     a
03D8 FA         +1  8320+1           mov     r2,a
03D9 EB         +1  8321+1           mov     a,r3
03DA 13         +1  8322+1           rrc     a
03DB FB         +1  8323+1           mov     r3,a
03DC EC         +1  8324+1           mov     a,r4
03DD 13         +1  8325+1           rrc     a
03DE FC         +1  8326+1           mov     r4,a
03DF ED         +1  8327+1           mov     a,r5
03E0 13         +1  8328+1           rrc     a
03E1 FD         +1  8329+1           mov     r5,a
03E2 809D       +1  8330             jmp     ftol9
03E4            +1  8331+3   ftol26: rshift
03E4 C3         +1  8332+1           clr     c
03E5 EA         +1  8333+1           mov     a,r2
03E6 13         +1  8334+1           rrc     a
03E7 FA         +1  8335+1           mov     r2,a
03E8 EB         +1  8336+1           mov     a,r3
03E9 13         +1  8337+1           rrc     a
03EA FB         +1  8338+1           mov     r3,a
03EB EC         +1  8339+1           mov     a,r4
03EC 13         +1  8340+1           rrc     a
03ED FC         +1  8341+1           mov     r4,a
03EE ED         +1  8342+1           mov     a,r5
03EF 13         +1  8343+1           rrc     a
03F0 FD         +1  8344+1           mov     r5,a
03F1 808E       +1  8345             jmp     ftol9
                +1  8346     
                +1  8347     ;       arithmetic integer to floating conversions
                +1  8348     
03F3            +1  8349     abtof:
03F3 ED         +1  8350             mov     a,r5
03F4 23         +1  8351             rl      a
03F5 FC         +1  8352             mov     r4,a
03F6 9C         +1  8353             subb    a,r4
03F7 FC         +1  8354             mov     r4,a
03F8 FB         +1  8355             mov     r3,a
03F9 FA         +1  8356             mov     r2,a
03FA 8006       +1  8357             jmp     altof
03FC            +1  8358     awtof:
03FC EC         +1  8359             mov     a,r4
03FD 23         +1  8360             rl      a
03FE FB         +1  8361             mov     r3,a
03FF 9B         +1  8362             subb    a,r3
0400 FB         +1  8363             mov     r3,a
0401 FA         +1  8364             mov     r2,a
0402            +1  8365     altof:
                +1  8366+3           saveregs
0402 C007       +1  8367+1           push    7
0404 C006       +1  8368+1           push    6
0406 C001       +1  8369+1           push    1
0408 C000       +1  8370+1           push    0
040A EA         +1  8371             mov     a,r2            ;get sign
040B 5480       +1  8372             anl     a,#80h
040D FF         +1  8373             mov     r7,a            ;store it
040E 30E70D     +1  8374             jnb     acc.7,altof1    ;skip if +ve
                +1  8375+3           neg1
0411 C3         +1  8376+1           clr     c
0412 E4         +1  8377+1           clr     a
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   133

0413 9D         +1  8378+1           subb    a,r5
0414 FD         +1  8379+1           mov     r5,a
0415 E4         +1  8380+1           clr     a
0416 9C         +1  8381+1           subb    a,r4
0417 FC         +1  8382+1           mov     r4,a
0418 E4         +1  8383+1           clr     a
0419 9B         +1  8384+1           subb    a,r3
041A FB         +1  8385+1           mov     r3,a
041B E4         +1  8386+1           clr     a
041C 9A         +1  8387+1           subb    a,r2
041D FA         +1  8388+1           mov     r2,a
041E            +1  8389     altof1:
041E 7896       +1  8390             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8391             call    norm1           ;normalize it
0422 11DE       +1  8392             call    pack1           ;and pack up
                +1  8393+3           restregs
0424 D000       +1  8394+1           pop     0
0426 D001       +1  8395+1           pop     1
0428 D006       +1  8396+1           pop     6
042A D007       +1  8397+1           pop     7
042C 22         +1  8398             ret
                +1  8399     
042D            +1  8400     lbtof:
042D 7C00       +1  8401             mov     r4,#0
042F            +1  8402     lwtof:
042F E4         +1  8403             clr     a
0430 FB         +1  8404             mov     r3,a
0431 FA         +1  8405             mov     r2,a
0432            +1  8406     lltof:
                +1  8407+3           saveregs
0432 C007       +1  8408+1           push    7
0434 C006       +1  8409+1           push    6
0436 C001       +1  8410+1           push    1
0438 C000       +1  8411+1           push    0
043A 7F00       +1  8412             mov     r7,#0           ;zero sign
043C 80E0       +1  8413             sjmp    altof1
                +1  8414     
                +1  8415     ;-------------------------------------------------------
                +1  8416     
                +1  8417     
                    8418     
                    8419     ;$include (d:\amp\wriread.asm)
                +1  8420     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8421     cle256:          mov            IE,#00H
0441 75B601     +1  8422                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8423                              MOV            PSCTL,#03
                +1  8424                                             
0447 7400       +1  8425                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  8426                                     movx    @dptr,a                         ;wr
044A 758F00     +1  8427                                     mov             PSCTL,#00
044D 75B600     +1  8428                                 mov         FLSCL,#00
0450 75A880     +1  8429                               mov           IE,#80H
0453 22         +1  8430                                     ret
                +1  8431     
                +1  8432     ;чтение памяти программ в r8..r11
                +1  8433     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8434     re4byte:        mov                     dph,r2
0456 8B82       +1  8435                                             mov                     dpl,r3
0458 E4         +1  8436                                             clr                     a
0459 93         +1  8437                                             movc            a,@a+dptr
045A F508       +1  8438                                             mov                     r8,a
045C A3         +1  8439                                             inc                     dptr
045D E4         +1  8440                                             clr                     a
045E 93         +1  8441                                             movc            a,@a+dptr
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   134

045F F509       +1  8442                                             mov                     r9,a
0461 A3         +1  8443                                             inc                     dptr
0462 E4         +1  8444                                             clr                     a
0463 93         +1  8445                                             movc            a,@a+dptr
0464 F50A       +1  8446                                             mov                     r10,a
0466 A3         +1  8447                                             inc                     dptr
0467 E4         +1  8448                                             clr                     a
0468 93         +1  8449                                             movc            a,@a+dptr
0469 F50B       +1  8450                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  8451                                             ret
                +1  8452      ;чтение памяти программ в r2..r5
                +1  8453     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8454     rebyte2:        mov                     dph,r2
046E 8B82       +1  8455                                             mov                     dpl,r3
0470 E4         +1  8456                                             clr                     a
0471 93         +1  8457                                             movc            a,@a+dptr
0472 FA         +1  8458                                             mov                     r2,a
0473 A3         +1  8459                                             inc                     dptr
0474 E4         +1  8460                                             clr                     a
0475 93         +1  8461                                             movc            a,@a+dptr
0476 FB         +1  8462                                             mov                     r3,a
0477 A3         +1  8463                                             inc                     dptr
0478 E4         +1  8464                                             clr                     a
0479 93         +1  8465                                             movc            a,@a+dptr
047A FC         +1  8466                                             mov                     r4,a
047B A3         +1  8467                                             inc                     dptr
047C E4         +1  8468                                             clr                     a
047D 93         +1  8469                                             movc            a,@a+dptr
047E FD         +1  8470                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  8471                                             ret
                +1  8472      
                +1  8473     
                +1  8474      ;r7-количество байт
                +1  8475     ;dptr-адр ячейки для записи
                +1  8476     ;r1-адр ячейки  внешнего озу
                +1  8477     
0480 75A800     +1  8478     wrpage:  mov            IE,#00H
0483 75B601     +1  8479     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  8480                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  8481                      movx           a,@r1
048A F0         +1  8482                      movx           @dptr,a                         ;wr
048B 758F00     +1  8483                      mov            PSCTL,#0
048E 75B600     +1  8484                      mov            FLSCL,#00
0491 A3         +1  8485                     inc                     dptr
0492 09         +1  8486                     inc                     r1
0493 DFEE       +1  8487                     djnz            r7,WW5
0495 75A880     +1  8488                     mov             IE,#80H
0498 22         +1  8489                     ret
                +1  8490                             
                +1  8491     
                +1  8492     
                +1  8493                                                             
                +1  8494     
                +1  8495     
                +1  8496     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8497     ;чтение памяти программ во внешнее озу
                +1  8498     ;вх-r2,r3-адр яч памяти прогр
                +1  8499     ;r1- яч внешнее озу
0499 8A83       +1  8500     copyPP:         mov                     dph,r2
049B 8B82       +1  8501                                             mov                     dpl,r3
049D 7FFF       +1  8502                                             mov                     r7,#0ffh
049F E4         +1  8503     copy1:          clr                     a
04A0 93         +1  8504                                             movc            a,@a+dptr
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   135

04A1 F3         +1  8505                                             movx                    @r1,a
04A2 A3         +1  8506                                             inc                     dptr
04A3 09         +1  8507                                             inc                     r1
04A4 DFF9       +1  8508                                             djnz            r7,copy1
04A6 22         +1  8509                                             ret
                +1  8510     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8511     
                +1  8512                                     
                +1  8513     
                +1  8514     ;r8..r11->@r0..@r0+3
                +1  8515     ;r0-адр ячейки
                +1  8516     ;сохранить в ячейке озу
04A7 E508       +1  8517     savelte:        mov     a,ltemp
04A9 F6         +1  8518                                             mov     @r0,a
04AA 08         +1  8519                                             inc     r0
04AB E509       +1  8520                                             mov     a,ltemp+1
04AD F6         +1  8521                                             mov     @r0,a
04AE 08         +1  8522                                             inc     r0
04AF E50A       +1  8523                                             mov     a,ltemp+2
04B1 F6         +1  8524                                             mov     @r0,a
04B2 08         +1  8525                                             inc     r0
04B3 E50B       +1  8526                                             mov     a,ltemp+3
04B5 F6         +1  8527                                             mov     @r0,a
04B6 22         +1  8528                                             ret
                +1  8529     
                +1  8530     ;
                +1  8531     
                +1  8532     
                +1  8533     
                +1  8534     
                +1  8535     
                +1  8536                     
                +1  8537     
                +1  8538     
                +1  8539     
                +1  8540     
                +1  8541      
                    8542     
                    8543                                                   
                    8544     END
                                                                             
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   136

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   03B7H   R   SEG=MAIN   871#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1479 1536 1561 1582 1586 1589 1590 1592 1685 1690 3727 3741 3822
                                           3825 3868 3963 4007 4010 4087 4091 4092 4093 4096 4346 4383 4384 4386 4463
                                           4483 4574 4578 4621 4624 4993 4998 5183 5188 5985 6147 6150
ABRET. . . . . . .  C ADDR   24F1H   R   SEG=MAIN   5914 5916#
ABTOF. . . . . . .  C ADDR   03F3H   A      8349#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 682 699 749 757 765 773 775 795 1150 1161 1169 1248 1835 1844 1853
                                           1862 1883 2281 2306 2311 2315 2320 2323 2326 2329 2332 2526 2588 2634 2645
                                           2737 2746 2754 2763 2912 2970 2995 3000 3004 3007 3010 3017 3020 3023 3362
                                           3450 3496 3518 3537 3559 3610 4523 4529 4566 4655 5488 6577 6756 6834 6837
                                           7094 7746 7829 7846 7878 7916 7944 8206 8208 8226 8269 8315 8374
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2CB6H   R   SEG=MAIN   906 943 945 947 949 951 953 955 957 959 1025 1027 1029 1031 1033
                                           1035 1037 1039 1041 1044 1046 1048 1050 1052 1054 1056 1058 1060 1062 1081
                                           1083 1085 7335#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1535 1547 1551 1566 1591 1594 1595 1689 1693 3740 3744 3819 3823
                                           3865 3869 3960 3964 4009 4013 4095 4108 4356 4370 4372 4374 4385 4388 4473
                                           4484 4579 4625 4997 5001 5187 5191 5786 5805 5823 5886 5903 6149 6152 6498
                                           6530
ADRBLOK. . . . . .  C ADDR   296AH   R   SEG=MAIN   3434 3457 3838 3981 4886 4915 5043 5102 5212 5272 6542#
AFTERK . . . . . .  C ADDR   06AEH   R   SEG=MAIN   1178 1257#
AGE2 . . . . . . .  C ADDR   024EH   R   SEG=MAIN   634# 637
AGE9 . . . . . . .  C ADDR   0874H   R   SEG=MAIN   1483# 1486
AGEON. . . . . . .  C ADDR   025CH   R   SEG=MAIN   643# 645
ALLSUM . . . . . .  C ADDR   0355H   R   SEG=MAIN   815# 850 868 884
ALMUL. . . . . . .  C ADDR   2BFDH   R   SEG=MAIN   7181#
ALTOF. . . . . . .  C ADDR   0402H   A      1144 1242 1273 1281 1299 1315 1326 1343 1356 1441 1995 2105 2185 2223
                                           3872 3969 4487 4582 4628 4727 4805 4813 4831 4956 4968 4983 5086 5148 5164
                                           5256 5318 5333 8357 8365#
ALTOF1 . . . . . .  C ADDR   041EH   A      8374 8389# 8413
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   0614H   R   SEG=MAIN   1142 1158#
ANLP1. . . . . . .  C ADDR   0A87H   R   SEG=MAIN   1807 1813#
AN_T7. . . . . . .  C ADDR   124CH   R   SEG=MAIN   3024# 3089 3091 3099 3109
AUTOKA . . . . . .  C ADDR   0CA4H   R   SEG=MAIN   1176 2153#
AVPGO. . . . . . .  C ADDR   07DFH   R   SEG=MAIN   1403 1405#
AVTDEC1. . . . . .  C ADDR   0670H   R   SEG=MAIN   1211 1220#
AWTOF. . . . . . .  C ADDR   03FCH   A      8358#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   137

B. . . . . . . . .  D ADDR   00F0H   A      122# 5633 6005 7184 7187 7189 7193 7197 7201 7205 7210 7214 7221 7225
                                           7229 7235 7239 7243 7249 7942 7943
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 462#
BFORM. . . . . . .  C ADDR   28A7H   R   SEG=MAIN   6347 6352 6364# 6390
BIFL_KT. . . . . .  B ADDR   0021H.5 A      337# 4723 4779 4878
BIN30. . . . . . .  C ADDR   2A19H   R   SEG=MAIN   6744# 6770
BIN31. . . . . . .  C ADDR   2A1DH   R   SEG=MAIN   6749# 6753
BIN32. . . . . . .  C ADDR   2A2DH   R   SEG=MAIN   6762# 6767
BIN41. . . . . . .  C ADDR   2A3EH   R   SEG=MAIN   6778# 6788
BINDEC . . . . . .  C ADDR   2A0DH   R   SEG=MAIN   1537 1593 1691 3742 4011 4097 4387 4999 5189 6151 6723#
BITAKT . . . . . .  B ADDR   0023H.2 A      356# 1778 1779 1782
BITAVP . . . . . .  B ADDR   0020H.5 A      327# 1369 1603 1768 3087 3088 3090
BITBON . . . . . .  B ADDR   0021H.2 A      334# 1804 1939 2126 2153 2341 2342 2350 6578
BITBUF . . . . . .  B ADDR   0021H.0 A      332#
BITEIZM. . . . . .  B ADDR   0022H.5 A      347# 1267 1712 1719 1786 2392 2436 3058 3074 4259 5552
BITIZM . . . . . .  B ADDR   0020H.4 A      326# 583 717 1608 2312 2394 2408 2484 2519 2550 3001 3061 3185 3207 3282
                                           3314 3339 3453 3577 3842 3890 3918 4079 4207 4260 4307 4419 4496 4610
BITKLB . . . . . .  B ADDR   0022H.2 A      344# 1336 1802 2317 3060 3078 3086 3093 3313 4494 4793
BITMAS . . . . . .  B ADDR   0020H.1 A      323# 1092 1095 6330
BITMEM . . . . . .  B ADDR   0021H.3 A      335# 1675 2731 3317 3335 3351 3452 3576 3843 3889 4078
BITMENU. . . . . .  B ADDR   0022H.1 A      343# 1674 2549 2662 3062 3338 3898 3917 4212 4261 4306 4418 4493
BITMIG . . . . . .  B ADDR   0023H.1 A      355# 2627 2820 2923 3250 3639 3779 3792 4325 4452 4558 4659 6070 6096
                                           6121 6133 6196 6203 6209 6215
BITNUL . . . . . .  B ADDR   0021H.7 A      339# 1417 1631 1747 2381 3107 3111 3112 3119
BITOLL . . . . . .  B ADDR   0022H.7 A      349# 658 1615 1672 3063
BITPAR . . . . . .  B ADDR   0022H.6 A      348# 4794
BITPRD . . . . . .  B ADDR   0021H.1 A      333# 1938
BITPRER. . . . . .  B ADDR   0023H.4 A      358#
BITRS. . . . . . .  B ADDR   0020H.3 A      325#
BITT2. . . . . . .  B ADDR   0022H.0 A      342# 1671 2485 2520 2523 3126 3283
BITV19 . . . . . .  B ADDR   0022H.3 A      345# 527 531 2698 2703 2709 4196 4201 4289 4302 4424 4428 4433
BITVI11. . . . . .  B ADDR   0020H.6 A      328# 1367 1383 1426 1611 2335 2337 2393 2407 2548 3057 3177 3184 3337
                                           4609
BITVICH. . . . . .  B ADDR   0022H.4 A      346# 1425 1670 2336 2395 2405 2547 2555 3144 3176 3206 3336 4608
BITZNAK. . . . . .  B ADDR   0020H.0 A      322# 683 732
BITZNB . . . . . .  B ADDR   0023H.3 A      357# 4629 5912 5915
BITZUS . . . . . .  B ADDR   0020H.7 A      329# 1418 1632 2053 2056 2445
BLOIN. . . . . . .  C ADDR   1705H   R   SEG=MAIN   3747# 3752
BLOKVV . . . . . .  C ADDR   16D7H   R   SEG=MAIN   3717#
BLOKVVC. . . . . .  C ADDR   16E1H   R   SEG=MAIN   3720 3723#
BL_LI. . . . . . .  C ADDR   16A2H   R   SEG=MAIN   3667 3675#
BONPART. . . . . .  C ADDR   0C74H   R   SEG=MAIN   2125#
BOUT7. . . . . . .  C ADDR   1426H   R   SEG=MAIN   3293# 3295 3313
BRET . . . . . . .  C ADDR   2332H   R   SEG=MAIN   5573 5578 5582#
BUFDEC . . . . . .  C ADDR   09CBH   R   SEG=MAIN   1696# 1701
BUFIND . . . . . .  D ADDR   0040H   A      298# 633 637 642 645 651 1482 1486 1552 1573 1594 1595 1596 1597 1650
                                           1655 1694 1702 1704 1709 1745 1766 1772 1780 1783 1788 1803 1805 2300 2347
                                           2351 2602 2620 2636 2638 2641 2701 2702 2707 2708 2815 2862 2881 2988 3066
                                           3128 3186 3187 3233 3237 3263 3285 3299 3306 3318 3319 3425 3634 3661 3689
                                           3718 3745 3759 3760 3764 3765 3772 3773 3778 3794 3933 3940 4014 4022 4024
                                           4040 4064 4098 4107 4109 4173 4195 4202 4317 4355 4388 4389 4390 4391 4393
                                           4427 4432 4444 4472 4495 4550 4596 5002 5010 5014 5192 5200 5204 5370 5402
                                           5631 5644 5650 5657 5785 5804 5822 5885 5902 5913 6073 6099 6153 6200 6221
                                           6497 6529 6579
BUFL_DEC . . . . .  C ADDR   21D9H   R   SEG=MAIN   5344#
BUFMEA . . . . . .  C ADDR   1FF8H   R   SEG=MAIN   5004# 5009
BUFMIN . . . . . .  C ADDR   2107H   R   SEG=MAIN   5194# 5199
BUFON. . . . . . .  C ADDR   0E04H   R   SEG=MAIN   2341 2350#
BUFR . . . . . . .  C ADDR   0919H   R   SEG=MAIN   1575# 1580
BUFR2. . . . . . .  C ADDR   08FBH   R   SEG=MAIN   1554# 1559
BUFR3. . . . . . .  C ADDR   08F4H   R   SEG=MAIN   1545 1550#
BUFR30 . . . . . .  C ADDR   08F7H   R   SEG=MAIN   1548 1552#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   138

CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7939# 7943
CELLBIT. . . . . .  D ADDR   0020H   A      321# 322 323 324 325 326 327 328 329
CELLBIT1 . . . . .  D ADDR   0021H   A      331# 332 333 334 335 337 339
CELLBIT2 . . . . .  D ADDR   0022H   A      341# 342 343 344 345 346 347 348 349
CELLBIT3 . . . . .  D ADDR   0023H   A      353# 354 355 356 357 358
CEXP . . . . . . .  C ADDR   01E2H   A      7916 7925#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   23D5H   R   SEG=MAIN   1463 3120 4585 5717#
CH1. . . . . . . .  C ADDR   23F5H   R   SEG=MAIN   5537 5728#
CH10 . . . . . . .  C ADDR   23D9H   R   SEG=MAIN   867 1106 3999 5718#
CH100. . . . . . .  C ADDR   23EDH   R   SEG=MAIN   814 5723#
CH10000. . . . . .  C ADDR   23E9H   R   SEG=MAIN   5722#
CH150H . . . . . .  C ADDR   243DH   R   SEG=MAIN   5747#
CH2. . . . . . . .  C ADDR   23F1H   R   SEG=MAIN   1101 5724#
CH20 . . . . . . .  C ADDR   25B8H   R   SEG=MAIN   849 1111 6036#
CH2THO . . . . . .  C ADDR   241DH   R   SEG=MAIN   2192 2230 5739#
CH320H . . . . . .  C ADDR   2439H   R   SEG=MAIN   5746# 6550
CH4. . . . . . . .  C ADDR   23E1H   R   SEG=MAIN   1115 5720#
CH43 . . . . . . .  C ADDR   1910H   R   SEG=MAIN   4016# 4021
CH43_42. . . . . .  C ADDR   19B7H   R   SEG=MAIN   4111# 4116
CH5. . . . . . . .  C ADDR   23DDH   R   SEG=MAIN   883 5719#
CH57 . . . . . . .  C ADDR   25B4H   R   SEG=MAIN   6035#
CH954. . . . . . .  C ADDR   23E5H   R   SEG=MAIN   5721#
CHAIBL . . . . . .  C ADDR   153BH   R   SEG=MAIN   3427 3429#
CHAIPR . . . . . .  C ADDR   1865H   R   SEG=MAIN   3935 3937#
CHANMA . . . . . .  C ADDR   0FDFH   R   SEG=MAIN   2634 2643#
CHANZ. . . . . . .  C ADDR   0FC6H   R   SEG=MAIN   2588 2632#
CHAVT. . . . . . .  D ADDR   0081H   A      371# 562 1167 1212 1220 2145 2249 4208
CHBEFORE . . . . .  D ADDR   009BH   A      381# 585 811 825 844 862 878
CHBLOK . . . . . .  D ADDR   00D6H   A      408# 4913 4963 4979 5100 5154 5270 5324
CHBUF. . . . . . .  D ADDR   00CFH   A      405# 596 1913 2021 2062 2067 2127 2135 3887 5344 5349
CHBUF1 . . . . . .  X ADDR   0E00H   A      438# 1923 2008
CHCMP. . . . . . .  C ADDR   22D5H   R   SEG=MAIN   1173 5514#
CHDEC. . . . . . .  C ADDR   22E8H   R   SEG=MAIN   1221 1234 5529#
CHDEL. . . . . . .  D ADDR   0083H   A      372# 2086 2113 2155 2205 2243
CHDELMO. . . . . .  C ADDR   0C5FH   R   SEG=MAIN   2096 2113# 2118
CHIF . . . . . . .  C ADDR   25FDH   R   SEG=MAIN   6077 6080#
CHIF5. . . . . . .  C ADDR   2605H   R   SEG=MAIN   6083 6085#
CHIFB. . . . . . .  C ADDR   2628H   R   SEG=MAIN   6103 6106#
CHIFB1 . . . . . .  C ADDR   262EH   R   SEG=MAIN   6105 6106 6109#
CHIFL5 . . . . . .  C ADDR   2636H   R   SEG=MAIN   6113 6116#
CHIFOUR. . . . . .  C ADDR   2617H   R   SEG=MAIN   6090 6092 6096#
CHIND. . . . . . .  D ADDR   00ACH   A      387# 1385 1820
CHIND2 . . . . . .  D ADDR   0033H   A      315# 719 721 729
CHINKOR. . . . . .  D ADDR   0098H   A      370# 557 793 1159 1172 1214 1228 1233 2120
CHK. . . . . . . .  C ADDR   2435H   R   SEG=MAIN   1337 5745#
CHKL . . . . . . .  D ADDR   003DH   A      305# 698 709 711 712 714 2463 2490 2538 2649 3038 3323 4070 4499
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1089 1096 1119 6329
CHMASN . . . . . .  D ADDR   003FH   A      306# 800 809 845 863 879 895 1094 1096 1097
CHMINUS. . . . . .  C ADDR   294FH   R   SEG=MAIN   3447 3493 3515 3534 3556 6512# 6574
CHTADC . . . . . .  C ADDR   227FH   R   SEG=MAIN   5446#
CHTHO. . . . . . .  C ADDR   2415H   R   SEG=MAIN   1306 1344 4736 4821 4839 5737#
CHTHOU . . . . . .  C ADDR   24BCH   R   SEG=MAIN   5873#
CHZAP. . . . . . .  C ADDR   23D1H   R   SEG=MAIN   1902 5716#
CH_1 . . . . . . .  C ADDR   23FDH   R   SEG=MAIN   588 1499 1522 1920 2064 2139 3970 5346 5730#
CH_10. . . . . . .  C ADDR   242DH   R   SEG=MAIN   1505 1528 2004 2034 4488 4988 5177 5743#
CH_10TH. . . . . .  C ADDR   2429H   R   SEG=MAIN   1398 5742#
CH_2 . . . . . . .  C ADDR   2401H   R   SEG=MAIN   1915 1999 2027 2043 5731#
CH_200 . . . . . .  C ADDR   2425H   R   SEG=MAIN   5741#
CH_220 . . . . . .  C ADDR   2421H   R   SEG=MAIN   1360 5740#
CH_22T . . . . . .  C ADDR   24FAH   R   SEG=MAIN   1451 5921#
CH_250 . . . . . .  C ADDR   2431H   R   SEG=MAIN   1262 5744#
CH_4 . . . . . . .  C ADDR   2405H   R   SEG=MAIN   2037 3973 5732#
CH_5 . . . . . . .  C ADDR   2409H   R   SEG=MAIN   5733#
CH_500 . . . . . .  C ADDR   24F6H   R   SEG=MAIN   1447 5920#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   139

CH_7 . . . . . . .  C ADDR   240DH   R   SEG=MAIN   2131 5734#
CH_953 . . . . . .  C ADDR   2411H   R   SEG=MAIN   5736#
CH_B . . . . . . .  C ADDR   24F2H   R   SEG=MAIN   1467 5918#
CH_FL. . . . . . .  C ADDR   24FEH   R   SEG=MAIN   1491 5922#
CH_M3. . . . . . .  C ADDR   2441H   R   SEG=MAIN   5748#
CH_MLN . . . . . .  C ADDR   23F9H   R   SEG=MAIN   5729#
CIKLWR . . . . . .  C ADDR   287DH   R   SEG=MAIN   6335#
CKCON. . . . . . .  D ADDR   008EH   A      30# 480 511
CL4. . . . . . . .  C ADDR   2453H   R   SEG=MAIN   5765# 5767
CL4N . . . . . . .  C ADDR   2459H   R   SEG=MAIN   5774# 5776
CLE20. . . . . . .  C ADDR   19A4H   R   SEG=MAIN   4101# 4103
CLE256 . . . . . .  C ADDR   043EH   A      4295 4769 4871 8421#
CLEAR. . . . . . .  C ADDR   2A07H   R   SEG=MAIN   6701 6705# 6735
CLEAR4 . . . . . .  C ADDR   2450H   R   SEG=MAIN   823 1414 1416 1562 1583 1628 1630 2378 2380 3104 3106 4912 5763#
CLEARN . . . . . .  C ADDR   2458H   R   SEG=MAIN   3820 3866 3961 4347 4464 4575 4622 5772#
CLMASSIX . . . . .  C ADDR   286DH   R   SEG=MAIN   548 1412 1626 2124 2253 2376 3102 3281 6323#
CLMASV . . . . . .  C ADDR   07E4H   R   SEG=MAIN   1407 1409#
CLMAX. . . . . . .  C ADDR   2872H   R   SEG=MAIN   6325# 6328
CLR11. . . . . . .  C ADDR   2A08H   R   SEG=MAIN   6707# 6709
CLRDEC . . . . . .  C ADDR   2A01H   R   SEG=MAIN   6699#
CLRNUM . . . . . .  C ADDR   2A05H   R   SEG=MAIN   6702# 6816
CLRVICH. . . . . .  C ADDR   1393H   R   SEG=MAIN   3206# 3223
CL_HL. . . . . . .  C ADDR   15EEH   R   SEG=MAIN   3570# 3585 3590 3594
CL_HL1 . . . . . .  C ADDR   1600H   R   SEG=MAIN   3567 3582#
CL_HL2 . . . . . .  C ADDR   160AH   R   SEG=MAIN   3582 3587#
CL_HL3 . . . . . .  C ADDR   1614H   R   SEG=MAIN   3587 3592#
CNTR . . . . . . .  N NUMB   0006H   A      7612#
CO02S. . . . . . .  C ADDR   23B9H   R   SEG=MAIN   5700# 5704
CO05S. . . . . . .  C ADDR   23C6H   R   SEG=MAIN   5709# 5713
CO1S . . . . . . .  C ADDR   23B0H   R   SEG=MAIN   5694# 5694
CO2S . . . . . . .  C ADDR   23ACH   R   SEG=MAIN   5692# 5696
COMPA1 . . . . . .  C ADDR   0890H   R   SEG=MAIN   1499# 1508
COMPA2 . . . . . .  C ADDR   08C6H   R   SEG=MAIN   1522# 1531
COND . . . . . . .  C ADDR   28E1H   R   SEG=MAIN   6419#
COPY1. . . . . . .  C ADDR   049FH   A      8503# 8508
COPYPP . . . . . .  C ADDR   0499H   A      4282 4748 4849 8500#
COPY_HL. . . . . .  D ADDR   00D7H   A      409# 3986 4122 4905 4921 4936 5093 5108 5123 5263 5278 5293
COUNT. . . . . . .  C ADDR   238EH   R   SEG=MAIN   5666# 5666
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   2395H   R   SEG=MAIN   5672# 5672
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 485
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1910
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1907
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 486
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   28E6H   R   SEG=MAIN   6423# 6425
DCOB . . . . . . .  C ADDR   28EDH   R   SEG=MAIN   6427# 6445
DCOC . . . . . . .  C ADDR   28F8H   R   SEG=MAIN   6437# 6442
DCOD . . . . . . .  C ADDR   2905H   R   SEG=MAIN   6444 6447#
DDOUTF . . . . . .  C ADDR   1657H   R   SEG=MAIN   3416 3472 3620 3628# 3713
DDOUTFR. . . . . .  C ADDR   151FH   R   SEG=MAIN   3416# 3422
DEC30. . . . . . .  C ADDR   2A5AH   R   SEG=MAIN   6826# 6851
DEC31. . . . . . .  C ADDR   2A5FH   R   SEG=MAIN   6832# 6839
DEC32. . . . . . .  C ADDR   2A6FH   R   SEG=MAIN   6844# 6848
DECBIN . . . . . .  C ADDR   2A4DH   R   SEG=MAIN   3824 3870 3965 4485 4580 4626 6805#
DECSIZE. . . . . .  N NUMB   000AH   A      6680# 6700 6734 6761 6774 6777 6831
DECT2. . . . . . .  C ADDR   2A78H   R   SEG=MAIN   6822 6854#
DEDPTR . . . . . .  C ADDR   2CCDH   R   SEG=MAIN   7339 7343 7347 7353#
DENORM . . . . . .  C ADDR   0133H   A      7771# 7827
DGOTO7 . . . . . .  C ADDR   17E9H   R   SEG=MAIN   3873# 3881
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   140

DIAP . . . . . . .  D ADDR   00AEH   A      389# 576 1402 1605 1708 1808 1949 2370 2415 3095 4392 4776 5553 5574 5836
                                           5851 6002 6064
DIINC. . . . . . .  C ADDR   0E2AH   R   SEG=MAIN   2373 2376#
DIKDN. . . . . . .  C ADDR   258CH   R   SEG=MAIN   6004 6024#
DIKDW. . . . . . .  C ADDR   24A4H   R   SEG=MAIN   5840 5861#
DIKM . . . . . . .  C ADDR   24BAH   R   SEG=MAIN   5872#
DIPAR. . . . . . .  C ADDR   24B8H   R   SEG=MAIN   5871#
DIV1 . . . . . . .  C ADDR   02DDH   A      8108# 8167
DIV2 . . . . . . .  C ADDR   0320H   A      8126 8130 8134 8138 8153#
DIV3 . . . . . . .  C ADDR   030DH   A      8127 8131 8135 8139#
DIV9 . . . . . . .  C ADDR   0336H   A      8097 8099 8173#
DIVIDE . . . . . .  C ADDR   2B38H   R   SEG=MAIN   6351 7040#
DONE . . . . . . .  C ADDR   2AA7H   R   SEG=MAIN   6870 6881#
DONE1. . . . . . .  C ADDR   2AA5H   R   SEG=MAIN   6873 6876 6879#
DOSH . . . . . . .  C ADDR   2BC1H   R   SEG=MAIN   7115 7131#
DOSUB. . . . . . .  C ADDR   2BAFH   R   SEG=MAIN   7099 7103 7107 7111 7112 7116#
DPH. . . . . . . .  D ADDR   0083H   A      19# 554 600 608 615 622 2292 2901 2981 3570 3991 3993 4127 4132 4644 4889
                                           4898 4906 4918 4923 4932 4934 4937 4948 5035 5037 5046 5055 5094 5105 5110
                                           5119 5121 5124 5135 5215 5224 5264 5275 5280 5289 5291 5294 5305 6283 6291
                                           6558 6566 6598 6887 6923 6958 6961 6973 6996 7358 7360 8434 8454 8500
DPL. . . . . . . .  D ADDR   0082H   A      18# 603 611 618 625 2291 2902 2980 3573 3987 3989 4124 4135 4645 4887
                                           4894 4909 4916 4926 4929 4931 4940 4944 5032 5034 5044 5051 5097 5103 5113
                                           5116 5118 5127 5131 5213 5220 5267 5273 5283 5286 5288 5297 5301 6284 6290
                                           6555 6569 6602 6903 6939 6960 6974 6977 7011 7355 7357 8435 8455 8501
DVIG0. . . . . . .  C ADDR   0AC3H   R   SEG=MAIN   1856# 1858
DVIG1. . . . . . .  C ADDR   0AB8H   R   SEG=MAIN   1847# 1849
DVIG2. . . . . . .  C ADDR   0AADH   R   SEG=MAIN   1838# 1840
DVIG3. . . . . . .  C ADDR   0AA1H   R   SEG=MAIN   1829# 1831
DVIG4. . . . . . .  C ADDR   0ACFH   R   SEG=MAIN   1867# 1869
DVIG6. . . . . . .  C ADDR   0AF1H   R   SEG=MAIN   1895# 1897
DVM. . . . . . . .  C ADDR   0AEFH   R   SEG=MAIN   1883 1894#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 483
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 534 703 2278 2967 5365 5367 5381
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1E0FH   R   SEG=MAIN   3084 4722#
ENDSDV . . . . . .  C ADDR   0AF5H   R   SEG=MAIN   1889 1898#
ENDSUM . . . . . .  C ADDR   05A2H   R   SEG=MAIN   907 960 1063 1088#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   08C1H   R   SEG=MAIN   1502 1518#
EQU00. . . . . . .  C ADDR   08DFH   R   SEG=MAIN   1520 1525 1534#
EQU1L. . . . . . .  C ADDR   1123H   R   SEG=MAIN   2826 2830#
EQU2L. . . . . . .  C ADDR   16BDH   R   SEG=MAIN   3699 3704#
ERRA0. . . . . . .  C ADDR   1D2EH   R   SEG=MAIN   4588 4600#
ERRA01 . . . . . .  C ADDR   07FAH   R   SEG=MAIN   1421# 1466
ERROR. . . . . . .  C ADDR   2693H   R   SEG=MAIN   1428 1815 4220 4415 4603 5410 5424 6219#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168# 1985 2942 4678
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      7614#
EXP2 . . . . . . .  N NUMB   0001H   A      7616# 7793 7814
EXTCLE . . . . . .  C ADDR   01BEH   R   SEG=MAIN   551# 555
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   249DH   R   SEG=MAIN   4750 5850#
FINDKOEF . . . . .  C ADDR   248EH   R   SEG=MAIN   1340 5835#
FINDMEM. . . . . .  C ADDR   1081H   R   SEG=MAIN   2661 2731#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   141

FINDR. . . . . . .  C ADDR   25E5H   R   SEG=MAIN   1588 4382 6064#
FINIS. . . . . . .  C ADDR   2BECH   R   SEG=MAIN   7059 7160#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      2020 4960 4972 7819# 7908
FLCMP. . . . . . .  C ADDR   01D6H   A      1264 1362 1400 1449 1453 1465 1501 1524 1917 4587 5150 5166 5320 5335
                                           7913#
FLDIV. . . . . . .  C ADDR   02B7H   A      1287 1308 1346 1474 1493 1507 2036 2194 2232 4734 4819 4837 4987 4990
                                           5179 8083#
FLMUL. . . . . . .  C ADDR   0203H   A      1153 1253 1305 1351 1469 1530 2007 2029 2039 2045 3975 4490 4738 4823
                                           4841 7953#
FLOUT. . . . . . .  C ADDR   01E1H   A      7920 7923#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8422 8428 8479 8484
FLSUB. . . . . . .  C ADDR   01D1H   A      1245 1922 2066 2134 2190 2228 3972 5348 7906#
FND. . . . . . . .  C ADDR   01F8H   A      7929 7932 7935 7938 7941#
FO1M . . . . . . .  C ADDR   28A4H   R   SEG=MAIN   6357 6361#
FO2M . . . . . . .  C ADDR   28ADH   R   SEG=MAIN   6364 6366#
FORM4. . . . . . .  C ADDR   28AEH   R   SEG=MAIN   6359 6365 6369#
FT1IZM . . . . . .  C ADDR   0F1DH   R   SEG=MAIN   2533#
FTOL . . . . . . .  C ADDR   0343H   A      1198 1353 1477 3976 4739 4842 4991 5180 6146 8189#
FTOL1. . . . . . .  C ADDR   037CH   A      8202 8206 8230#
FTOL2. . . . . . .  C ADDR   039EH   A      8226 8263#
FTOL22 . . . . . .  C ADDR   03C4H   A      8266 8300#
FTOL23 . . . . . .  C ADDR   03A2H   A      8267# 8299
FTOL24 . . . . . .  C ADDR   03B5H   A      8269 8285#
FTOL25 . . . . . .  C ADDR   03C2H   A      8284 8299#
FTOL26 . . . . . .  C ADDR   03E4H   A      8315 8331#
FTOL3. . . . . . .  C ADDR   038AH   A      8229 8243#
FTOL33 . . . . . .  C ADDR   038EH   A      8247# 8261
FTOL4. . . . . . .  C ADDR   0371H   A      8208 8223#
FTOL9. . . . . . .  C ADDR   0381H   A      8236# 8246 8262 8330 8345
FULKALIB . . . . .  C ADDR   1E7EH   R   SEG=MAIN   4777 4792# 4880
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   491# 492
GO23NO . . . . . .  C ADDR   161BH   R   SEG=MAIN   3473 3596#
GO31L. . . . . . .  C ADDR   1129H   R   SEG=MAIN   2804 2835#
GO41L. . . . . . .  C ADDR   112EH   R   SEG=MAIN   2835 2837#
GOA2 . . . . . . .  C ADDR   079AH   R   SEG=MAIN   1366 1368 1371# 1393
GOA3A2 . . . . . .  C ADDR   07A4H   R   SEG=MAIN   1376#
GOCIKLE. . . . . .  C ADDR   0BF8H   R   SEG=MAIN   1940 2024 2053# 2060 2069
GOFULL . . . . . .  C ADDR   164EH   R   SEG=MAIN   3602 3624#
GOGO7. . . . . . .  C ADDR   1D4CH   R   SEG=MAIN   4561 4566 4613#
GOKAA2 . . . . . .  C ADDR   07C2H   R   SEG=MAIN   1391#
GOKLB. . . . . . .  C ADDR   0DECH   R   SEG=MAIN   2317 2339#
GOOFF1 . . . . . .  C ADDR   1582H   R   SEG=MAIN   3487# 3496
GOOFF2 . . . . . .  C ADDR   159DH   R   SEG=MAIN   3509# 3518
GOOFF3 . . . . . .  C ADDR   15B8H   R   SEG=MAIN   3528# 3537
GOOFF4 . . . . . .  C ADDR   15D3H   R   SEG=MAIN   3550# 3559
GOONIN . . . . . .  C ADDR   07B4H   R   SEG=MAIN   1384# 1419 1431 1616 1633
GOONIN1. . . . . .  C ADDR   096AH   R   SEG=MAIN   1608 1616#
GOONIN2. . . . . .  C ADDR   0968H   R   SEG=MAIN   1611 1615#
GOONIND. . . . . .  C ADDR   09A2H   R   SEG=MAIN   1387 1662#
GOONOFF. . . . . .  C ADDR   1547H   R   SEG=MAIN   3441# 3450
GOONT. . . . . . .  C ADDR   0B81H   R   SEG=MAIN   1943 1986#
GOPAROL. . . . . .  C ADDR   1BB0H   R   SEG=MAIN   4217 4368 4376#
GOPAROM. . . . . .  C ADDR   1A8AH   R   SEG=MAIN   4215# 4218 4225
GOPART . . . . . .  C ADDR   0333H   R   SEG=MAIN   795 798#
GOSK19 . . . . . .  C ADDR   1052H   R   SEG=MAIN   2698 2705#
GOTO7. . . . . . .  C ADDR   124CH   R   SEG=MAIN   3037# 3117 3124 3188 3210 3239 3251 3293 3297 3346 3393 3408 3470
                                           3649 3652 3703 3706 3762 3775 3781 3807 3809 3850 3873 3891 3946 4082 4145
                                           4153 4161 4262 4329 4333 4412 4422 4456 4507 4509 4525 4537 4598 4789 4800
GOTOKD . . . . . .  C ADDR   0635H   R   SEG=MAIN   1156 1180#
GOTOSTROB. . . . .  C ADDR   0B63H   R   SEG=MAIN   1954 1957 1960 1963 1966#
GOUT6. . . . . . .  C ADDR   0DA1H   R   SEG=MAIN   2307# 2335
GOVVLIST . . . . .  C ADDR   1889H   R   SEG=MAIN   3929 3951#
GOZNAK . . . . . .  C ADDR   02E5H   R   SEG=MAIN   689 738#
HNOR11 . . . . . .  C ADDR   139EH   R   SEG=MAIN   3173 3214#
HNOR12 . . . . . .  C ADDR   1346H   R   SEG=MAIN   3163 3167#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   142

HNOT1. . . . . . .  C ADDR   13EAH   R   SEG=MAIN   3139 3260#
HNOT2. . . . . . .  C ADDR   1314H   R   SEG=MAIN   3136#
HR12 . . . . . . .  C ADDR   133CH   R   SEG=MAIN   3158 3163#
HVI1113. . . . . .  C ADDR   1336H   R   SEG=MAIN   3161# 3166 3171
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 536 5360 5390 8421 8429 8478 8488
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   1310H   R   SEG=MAIN   3131 3133#
IND. . . . . . . .  C ADDR   21F9H   R   SEG=MAIN   638 646 691 722 1429 1512 1516 1614 1817 2348 2352 2363 3067 3303
                                           3320 3849 4065 4117 4221 4416 4604 4797 5364# 5406 5412 5426 6580
INDOLL . . . . . .  C ADDR   0953H   R   SEG=MAIN   1603 1604 1608#
INIACP . . . . . .  C ADDR   2502H   R   SEG=MAIN   655 3279 5928#
INNOT1_2 . . . . .  C ADDR   1740H   R   SEG=MAIN   3771 3777#
INNOT3 . . . . . .  C ADDR   1731H   R   SEG=MAIN   3763 3768#
INNOT6 . . . . . .  C ADDR   1725H   R   SEG=MAIN   3758 3763#
INTER2 . . . . . .  C ADDR   21EDH   R   SEG=MAIN   262 5353#
INTERVA. . . . . .  D ADDR   00CDH   A      404# 629 1986 3726 3826
INTMUL . . . . . .  C ADDR   0BA4H   R   SEG=MAIN   2001 2007#
INTMUL1. . . . . .  C ADDR   0BA7H   R   SEG=MAIN   2008#
INTMUL2. . . . . .  C ADDR   0BBCH   R   SEG=MAIN   2021# 2030 2040 2046 2050
INTN . . . . . . .  C ADDR   17D2H   R   SEG=MAIN   3864#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   13CFH   R   SEG=MAIN   3241#
IZMAN. . . . . . .  C ADDR   0E92H   R   SEG=MAIN   2265 2436#
IZMFUN . . . . . .  C ADDR   0EA4H   R   SEG=MAIN   2364 2375 2383 2441 2444#
IZMPAT . . . . . .  C ADDR   0EA8H   R   SEG=MAIN   2333 2349 2353 2412 2448#
IZMT2. . . . . . .  C ADDR   0EB7H   R   SEG=MAIN   2464 2469#
IZMT3. . . . . . .  C ADDR   0EC2H   R   SEG=MAIN   2469 2475#
JFINIS . . . . . .  C ADDR   2B53H   R   SEG=MAIN   7051 7059#
KD . . . . . . . .  C ADDR   2419H   R   SEG=MAIN   5738#
KEYB1. . . . . . .  C ADDR   0D73H   R   SEG=MAIN   283 2271#
KEYB2. . . . . . .  C ADDR   11DCH   R   SEG=MAIN   286 2959#
KFULL. . . . . . .  C ADDR   1625H   R   SEG=MAIN   3409 3601#
KFULLR . . . . . .  C ADDR   150EH   R   SEG=MAIN   3404 3409#
KGO23. . . . . . .  C ADDR   156FH   R   SEG=MAIN   3403 3476#
KKOUT6 . . . . . .  C ADDR   119CH   R   SEG=MAIN   2267 2920#
KLBOFF . . . . . .  C ADDR   129CH   R   SEG=MAIN   3060 3078#
KLEV1. . . . . . .  C ADDR   14E8H   R   SEG=MAIN   3359 3394#
KLEV2. . . . . . .  C ADDR   14EDH   R   SEG=MAIN   3394 3396#
KLEV21 . . . . . .  C ADDR   1511H   R   SEG=MAIN   3401 3410#
KLEV22 . . . . . .  C ADDR   14F7H   R   SEG=MAIN   3389 3398 3401#
KLEV23 . . . . . .  C ADDR   1522H   R   SEG=MAIN   3410 3418#
KLEV3. . . . . . .  C ADDR   14F2H   R   SEG=MAIN   3396 3398#
KLMAS. . . . . . .  C ADDR   03E0H   R   SEG=MAIN   827 894#
KNAVP. . . . . . .  C ADDR   12ABH   R   SEG=MAIN   3017 3086#
KNIZM. . . . . . .  B ADDR   0023H.0 A      354# 1366 1604 1774 1807 2414 2437 2438 2442
KNIZMON. . . . . .  C ADDR   0E9FH   R   SEG=MAIN   2437 2442#
KNKMP. . . . . . .  C ADDR   11C3H   R   SEG=MAIN   2947# 3007
KNLEFT . . . . . .  C ADDR   12B9H   R   SEG=MAIN   2951 3093#
KNMEM. . . . . . .  C ADDR   1447H   R   SEG=MAIN   2957 3313#
KNMENU . . . . . .  C ADDR   126EH   R   SEG=MAIN   3023 3057#
KNNUL. . . . . . .  C ADDR   12DAH   R   SEG=MAIN   2950 3111#
KNOPT. . . . . . .  C ADDR   0ECAH   R   SEG=MAIN   2264 2483#
KNRAZR . . . . . .  C ADDR   0EDFH   R   SEG=MAIN   2263 2496#
KNRIGHT. . . . . .  C ADDR   0E20H   R   SEG=MAIN   2323 2368#
KNVICH . . . . . .  C ADDR   0E41H   R   SEG=MAIN   2332 2386#
KOEFKD . . . . . .  D ADDR   00A0H   A      384# 594 4741 4751 4843 4851
KOEFKM . . . . . .  D ADDR   0094H   A      378# 592 1151 1251 2236
KOEFKP . . . . . .  D ADDR   0090H   A      377# 590 1148 1246 2198
KOMUL. . . . . . .  C ADDR   075EH   R   SEG=MAIN   1339 1343#
KOMULPZ. . . . . .  C ADDR   0758H   R   SEG=MAIN   1336 1340#
KONSTA . . . . . .  D ADDR   00BCH   A      397# 1461 4583 6144
KON_B. . . . . . .  C ADDR   0FAAH   R   SEG=MAIN   2590 2609#
KOR0US . . . . . .  C ADDR   2346H   R   SEG=MAIN   2094 5607#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   143

KOR0_AN. . . . . .  D ADDR   0084H   A      374# 1243 2106 2188 2226
KORDEC1. . . . . .  C ADDR   0686H   R   SEG=MAIN   1226 1233#
KORDEC10 . . . . .  C ADDR   0666H   R   SEG=MAIN   1214#
KORNUL . . . . . .  C ADDR   0C32H   R   SEG=MAIN   1163 2086#
KVVOD0 . . . . . .  C ADDR   1641H   R   SEG=MAIN   3369 3610 3619#
LABEL43. . . . . .  C ADDR   1880H   R   SEG=MAIN   3947# 3955
LABEL7 . . . . . .  C ADDR   1969H   R   SEG=MAIN   3947 4070#
LABELA . . . . . .  C ADDR   02A9H   R   SEG=MAIN   694# 726 2057
LABELB . . . . . .  C ADDR   0A9AH   R   SEG=MAIN   1206 1636 1822# 2074 2078 2080
LABELC . . . . . .  C ADDR   0EDFH   R   SEG=MAIN   2497#
LABELE . . . . . .  C ADDR   0EA8H   R   SEG=MAIN   2446 2462# 2502 2505 2509 2513 2521 2553
LABELF . . . . . .  C ADDR   0F0AH   R   SEG=MAIN   2262 2522#
LABELH . . . . . .  C ADDR   12FCH   R   SEG=MAIN   2949 3126#
LABELI . . . . . .  C ADDR   1CA8H   R   SEG=MAIN   3142 3199 3253 4520#
LABELI2. . . . . .  C ADDR   1383H   R   SEG=MAIN   3199# 3200
LABELK . . . . . .  C ADDR   148AH   R   SEG=MAIN   3141 3348#
LABELL . . . . . .  C ADDR   10DEH   R   SEG=MAIN   2660 2760 2768#
LABELL1. . . . . .  C ADDR   0FE7H   R   SEG=MAIN   2647# 2724 2842 2894
LABELN . . . . . .  C ADDR   1148H   R   SEG=MAIN   2725 2851#
LABELP . . . . . .  C ADDR   1856H   R   SEG=MAIN   3877 3898 3929# 4163
LABELS . . . . . .  C ADDR   181BH   R   SEG=MAIN   3606 3898#
LABELS1. . . . . .  C ADDR   1AFBH   R   SEG=MAIN   4240 4270#
LABELS13 . . . . .  C ADDR   1C2EH   R   SEG=MAIN   4311 4436#
LABELS3. . . . . .  C ADDR   1CBBH   R   SEG=MAIN   4530#
LABELS4. . . . . .  C ADDR   1C96H   R   SEG=MAIN   4310 4511#
LABL2. . . . . . .  C ADDR   110AH   R   SEG=MAIN   2807# 3413
LABM . . . . . . .  C ADDR   16C6H   R   SEG=MAIN   3414 3709#
LABN_1 . . . . . .  C ADDR   1152H   R   SEG=MAIN   2853 2861#
LABN_2 . . . . . .  C ADDR   114DH   R   SEG=MAIN   2851 2853#
LADD . . . . . . .  C ADDR   2C94H   R   SEG=MAIN   806 841 859 875 1905 7286#
LADDX. . . . . . .  C ADDR   2CA5H   R   SEG=MAIN   7310#
LBTOF. . . . . . .  C ADDR   042DH   A      8400#
LCMP . . . . . . .  C ADDR   2A92H   R   SEG=MAIN   5524 6388 6866#
LDC_LONG . . . . .  C ADDR   2AA8H   R   SEG=MAIN   589 1338 1903 2193 2231 3121 6886#
LDC_LTEMP. . . . .  C ADDR   2ACAH   R   SEG=MAIN   815 1102 1107 1112 1116 1263 1307 1345 1361 1399 1448 1452 1464
                                           1468 1492 1500 1506 1523 1529 1916 1921 2000 2005 2028 2035 2038 2044 2065
                                           2133 3971 3974 4000 4489 4586 4737 4822 4840 4989 5178 5347 5538 6551
                                           6922#
LDX_LONG . . . . .  C ADDR   2AF0H   R   SEG=MAIN   6957#
LDX_LTEMP. . . . .  C ADDR   2B16H   R   SEG=MAIN   6995#
LEFCUR . . . . . .  C ADDR   1751H   R   SEG=MAIN   3787# 3859 3875
LEFKL. . . . . . .  C ADDR   12C3H   R   SEG=MAIN   3093 3099#
LEFMEM11 . . . . .  C ADDR   149EH   R   SEG=MAIN   3360# 3395 3397 3399
LEFT21 . . . . . .  C ADDR   1670H   R   SEG=MAIN   3645 3650#
LEFT_S . . . . . .  C ADDR   1AF8H   R   SEG=MAIN   4269# 4272
LEFT_SK. . . . . .  C ADDR   1C0FH   R   SEG=MAIN   4269 4424#
LEV220 . . . . . .  C ADDR   14FAH   R   SEG=MAIN   3402# 3411
LEV2GO . . . . . .  C ADDR   1178H   R   SEG=MAIN   2850 2890#
LEVEL. . . . . . .  D ADDR   00B0H   A      391# 2355 2732 2775 3321 3331 3358 3621 6094
LI21 . . . . . . .  C ADDR   13D9H   R   SEG=MAIN   3248 3250#
LI42_43. . . . . .  C ADDR   18EFH   R   SEG=MAIN   3997# 4137
LIST_43. . . . . .  C ADDR   1973H   R   SEG=MAIN   3949 4075#
LLDI2. . . . . . .  C ADDR   0E8BH   R   SEG=MAIN   2427 2431#
LLDI23 . . . . . .  C ADDR   0E7FH   R   SEG=MAIN   2419 2424#
LLDI3. . . . . . .  C ADDR   0E86H   R   SEG=MAIN   2426 2428#
LLEV2. . . . . . .  C ADDR   1133H   R   SEG=MAIN   2806 2840#
LLMUL. . . . . . .  C ADDR   2BFDH   R   SEG=MAIN   7180#
LLSUB. . . . . . .  C ADDR   2C82H   R   SEG=MAIN   7262#
LLTOF. . . . . . .  C ADDR   0432H   A      8406#
LMUL . . . . . . .  C ADDR   2BFDH   R   SEG=MAIN   6346 6552 7182#
LOA3_X . . . . . .  C ADDR   29DDH   R   SEG=MAIN   1946 6616#
LOAB12 . . . . . .  C ADDR   2551H   R   SEG=MAIN   3277 5969#
LOAD . . . . . . .  D ADDR   00B7H   A      395# 2486 2527 3129 3273 5630
LOADB. . . . . . .  C ADDR   13FDH   R   SEG=MAIN   3268 3271# 3304 3310
LOADB2 . . . . . .  C ADDR   1429H   R   SEG=MAIN   3291 3295#
LOADCLE. . . . . .  C ADDR   14BBH   R   SEG=MAIN   3374# 3613
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   144

LOADKD . . . . . .  C ADDR   256EH   R   SEG=MAIN   6002#
LOADR2 . . . . . .  C ADDR   2560H   R   SEG=MAIN   3871 3966 4486 4581 4627 5985#
LOADT. . . . . . .  C ADDR   2361H   R   SEG=MAIN   2488 2533 3135 5630#
LOADUS . . . . . .  C ADDR   2300H   R   SEG=MAIN   656 1410 1623 2382 2443 3075 3079 3108 3280 4879 5551#
LOAHL_R2 . . . . .  C ADDR   200DH   R   SEG=MAIN   4955 4967 5018# 5146 5162 5316 5331
LOBLOK . . . . . .  C ADDR   167BH   R   SEG=MAIN   3599 3657# 3676
LOCLE. . . . . . .  C ADDR   14B6H   R   SEG=MAIN   3363 3372#
LOD1 . . . . . . .  C ADDR   2370H   R   SEG=MAIN   5638# 5643
LODT . . . . . . .  C ADDR   237FH   R   SEG=MAIN   5651# 5656
LOIZMK . . . . . .  C ADDR   1349H   R   SEG=MAIN   3168# 3204
LOKAME1. . . . . .  C ADDR   1A3DH   R   SEG=MAIN   4177#
LOLEVT . . . . . .  C ADDR   2363H   R   SEG=MAIN   2361 5631#
LOLIST . . . . . .  C ADDR   14ABH   R   SEG=MAIN   3365#
LOME1. . . . . . .  C ADDR   1DC3H   R   SEG=MAIN   4689# 4693 4696 4699 4702 4706 4709 4712 4715 4719
LOMENU . . . . . .  C ADDR   1DBBH   R   SEG=MAIN   2675 2688 4177 4227 4250 4686#
LOOP . . . . . . .  C ADDR   22BCH   R   SEG=MAIN   5487# 5488
LOOPS. . . . . . .  C ADDR   2B56H   R   SEG=MAIN   7061# 7094
LOSPUS . . . . . .  C ADDR   233AH   R   SEG=MAIN   2095 5590#
LOSTAT . . . . . .  C ADDR   14D0H   R   SEG=MAIN   3378 3384#
LOTEXT . . . . . .  C ADDR   237BH   R   SEG=MAIN   1511 1515 1610 1613 2401 2564 2572 2581 2700 2706 2740 2749 2757
                                           2766 2779 3065 3161 3230 3316 3366 3375 3381 3386 3392 3407 3625 3658 3670
                                           3725 3847 3915 3939 4106 4142 4150 4158 4172 4194 4200 4246 4379 4426 4431
                                           4594 4689 4796 5648# 6220
LOTP . . . . . . .  C ADDR   25C4H   R   SEG=MAIN   6043# 6053 6056
LOTPUS . . . . . .  C ADDR   25BCH   R   SEG=MAIN   4258 5585 6040#
LOU. . . . . . . .  C ADDR   0E91H   R   SEG=MAIN   2414 2430 2434#
LOUIZM . . . . . .  C ADDR   0E6EH   R   SEG=MAIN   2414# 2440 5582
LOUTF. . . . . . .  C ADDR   1126H   R   SEG=MAIN   2832# 2841 2848 2852 2854
LOVICH . . . . . .  C ADDR   133FH   R   SEG=MAIN   3164# 3197 3218 4640
LOWR . . . . . . .  C ADDR   14C3H   R   SEG=MAIN   3372 3378#
LOWR1. . . . . . .  C ADDR   14C8H   R   SEG=MAIN   3380# 3617
LSUB . . . . . . .  C ADDR   2C82H   R   SEG=MAIN   1203 1379 5539 7263#
LTEMP. . . . . . .  N NUMB   0008H   A      1119 1121 1122 1123 5875 5876 5877 5878 6398 6401 6404 6407 6450 6451
                                           6452 6453 6678# 7052 7053 7054 7055 7064 7068 7072 7076 7079 7080 7081
                                           7082 7083 7084 7085 7086 7087 7088 7089 7090 7093 7096 7101 7105 7109 7119
                                           7122 7125 7128 7144 7147 7148 7150 7151 7153 7154 7156 7161 7162 7163 7164
                                           7184 7189 7197 7205 7210 7221 7229 7235 7243 7249 7617 7618 7657 7662 7664
                                           7673 7674 7675 7676 7907 7915 7928 7931 7934 7937 8517 8520 8523 8526
LWR. . . . . . . .  C ADDR   287FH   R   SEG=MAIN   6337# 6341
LWRX . . . . . . .  C ADDR   2843H   R   SEG=MAIN   6282# 6294
LWTOF. . . . . . .  C ADDR   042FH   A      8402#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   289AH   R   SEG=MAIN   1684 4003 4992 5182 6345 6350 6355# 6387
MAIN . . . . . . .  C SEG    2CDFH       REL=UNIT   237 294# 455
MANT1. . . . . . .  N NUMB   0002H   A      7615# 7642 7691 7692
MANT2. . . . . . .  N NUMB   0008H   A      7617# 7668 7669 7800 7802 7803 7805 7806 7808 7809 7811 7850 7851 7853
                                           7854 7856 7857 7859 7860 7864 7866 7869 7872 7970 7972 7973 7975 7976 7978
                                           7979 7981 8032 8034 8035 8037 8038 8040 8041 8043 8125 8129 8133 8137 8141
                                           8144 8147 8150
MARK0_8. . . . . .  C ADDR   0FB1H   R   SEG=MAIN   2592 2610 2612#
MARKER . . . . . .  D ADDR   00B2H   A      393# 567 2299 2551 2591 2601 2609 2619 2625 2814 2822 2861 2868 2880 2987
                                           3208 3225 3246 3340 3467 3578 3633 3641 3662 3688 3695 3753 3793 3800 3840
                                           3883 3941 3957 4080 4228 4316 4323 4407 4420 4443 4450 4497 4530 4549 4556
                                           4590 4600 4611 4636 6071 6097 6123 6134 6192
MARLE. . . . . . .  C ADDR   2638H   R   SEG=MAIN   3808 6120#
MARRI. . . . . . .  C ADDR   2645H   R   SEG=MAIN   2888 6133#
MAS10. . . . . . .  C ADDR   03FFH   R   SEG=MAIN   896 909#
MAS20. . . . . . .  C ADDR   047FH   R   SEG=MAIN   909 964#
MAS4 . . . . . . .  C ADDR   0573H   R   SEG=MAIN   962 1065#
MAS5DIV. . . . . .  C ADDR   05E7H   R   SEG=MAIN   1103 1108 1113 1117 1125#
MASFULL. . . . . .  C ADDR   05AEH   R   SEG=MAIN   1092 1096#
MASS0. . . . . . .  X ADDR   0100H   A      417 418# 897 902 931 939 1013 1021 1070 1077 6324
MASS1. . . . . . .  X ADDR   0104H   A      419# 905 928 942 1010 1024 1068 1080
MASS10 . . . . . .  X ADDR   0128H   A      428# 986 1043
MASS11 . . . . . .  X ADDR   012CH   A      429# 983 1045
MASS12 . . . . . .  X ADDR   0130H   A      430# 980 1047
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   145

MASS13 . . . . . .  X ADDR   0134H   A      431# 977 1049
MASS14 . . . . . .  X ADDR   0138H   A      432# 974 1051
MASS15 . . . . . .  X ADDR   013CH   A      433# 971 1053
MASS16 . . . . . .  X ADDR   0140H   A      434# 969 1055
MASS17 . . . . . .  X ADDR   0144H   A      435# 967 1057
MASS18 . . . . . .  X ADDR   0148H   A      436# 965 1059
MASS19 . . . . . .  X ADDR   014CH   A      437# 1061
MASS2. . . . . . .  X ADDR   0108H   A      420# 925 944 1007 1026 1066 1082
MASS3. . . . . . .  X ADDR   010CH   A      421# 922 946 1004 1028 1084
MASS4. . . . . . .  X ADDR   0110H   A      422# 919 948 1001 1030
MASS5. . . . . . .  X ADDR   0114H   A      423# 916 950 998 1032
MASS6. . . . . . .  X ADDR   0118H   A      424# 914 952 996 1034
MASS7. . . . . . .  X ADDR   011CH   A      425# 912 954 994 1036
MASS8. . . . . . .  X ADDR   0120H   A      426# 910 956 992 1038
MASS9. . . . . . .  X ADDR   0124H   A      427# 958 989 1040
MASX5. . . . . . .  C ADDR   05DDH   R   SEG=MAIN   1094 1119#
MAXG . . . . . . .  C ADDR   216CH   R   SEG=MAIN   5272# 5326
MAXVIX . . . . . .  C ADDR   21D6H   R   SEG=MAIN   5336 5341#
ME11_15DE. . . . .  C ADDR   1812H   R   SEG=MAIN   3893# 3912
ME11_15DEC . . . .  C ADDR   1A3CH   R   SEG=MAIN   3893 4176#
ME21_22. . . . . .  C ADDR   10EEH   R   SEG=MAIN   2779# 2788
ME21_23. . . . . .  C ADDR   1AB6H   R   SEG=MAIN   3926 4236#
ME21_23DEC . . . .  C ADDR   1AD2H   R   SEG=MAIN   4243 4248#
MEAVP. . . . . . .  C ADDR   12B5H   R   SEG=MAIN   3087 3090#
MECLE. . . . . . .  C ADDR   01ABH   R   SEG=MAIN   540# 542
MEFF . . . . . . .  C ADDR   01B2H   R   SEG=MAIN   544# 547
MEM10MS. . . . . .  C ADDR   02A4H   R   SEG=MAIN   691#
MEM12NO. . . . . .  C ADDR   163CH   R   SEG=MAIN   3611 3615#
MENG . . . . . . .  C ADDR   1F59H   R   SEG=MAIN   4915# 4965
MENU12 . . . . . .  C ADDR   1DC7H   R   SEG=MAIN   4687 4691#
MENU13 . . . . . .  C ADDR   1DCFH   R   SEG=MAIN   4691 4694#
MENU14 . . . . . .  C ADDR   1DD7H   R   SEG=MAIN   4694 4697#
MENU15 . . . . . .  C ADDR   1DDFH   R   SEG=MAIN   4697 4700#
MENU21 . . . . . .  C ADDR   1DE7H   R   SEG=MAIN   4700 4704#
MENU22 . . . . . .  C ADDR   1DEFH   R   SEG=MAIN   4704 4707#
MENU23 . . . . . .  C ADDR   1DF7H   R   SEG=MAIN   4707 4710#
MENU31 . . . . . .  C ADDR   1DFFH   R   SEG=MAIN   4710 4713#
MENU41 . . . . . .  C ADDR   1E07H   R   SEG=MAIN   4713 4717#
MENUOFF. . . . . .  C ADDR   1290H   R   SEG=MAIN   3058 3071#
MENUON . . . . . .  C ADDR   1848H   R   SEG=MAIN   3917#
MERR . . . . . . .  C ADDR   126BH   R   SEG=MAIN   3054# 3057
ME_14. . . . . . .  C ADDR   14DAH   R   SEG=MAIN   3389#
ME_41. . . . . . .  C ADDR   1B73H   R   SEG=MAIN   4270 4337#
ME_52. . . . . . .  C ADDR   1B47H   R   SEG=MAIN   4313# 4337
ME_52V . . . . . .  C ADDR   1B64H   R   SEG=MAIN   4327 4329#
MIDL . . . . . . .  C ADDR   2B89H   R   SEG=MAIN   7056 7091#
MIGN . . . . . . .  C ADDR   2675H   R   SEG=MAIN   5369 6192#
MIGNN. . . . . . .  C ADDR   267DH   R   SEG=MAIN   6194 6199#
MIN4_HL. . . . . .  C ADDR   2019H   R   SEG=MAIN   5031# 5064 5090 5234 5260
MING . . . . . . .  C ADDR   2077H   R   SEG=MAIN   5102# 5156
MINIVIX. . . . . .  C ADDR   20E1H   R   SEG=MAIN   5167 5172# 5341
MLABL2 . . . . . .  C ADDR   16A6H   R   SEG=MAIN   3680# 3711 3950
MLABL2R. . . . . .  C ADDR   1886H   R   SEG=MAIN   3950# 3953
MMM. . . . . . . .  C ADDR   029FH   R   SEG=MAIN   687#
MO220. . . . . . .  C ADDR   0948H   R   SEG=MAIN   1218 1389 1603#
MO500I . . . . . .  C ADDR   08B5H   R   SEG=MAIN   1454 1514#
MO500R . . . . . .  C ADDR   08A9H   R   SEG=MAIN   1450 1510#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   107BH   R   SEG=MAIN   2726# 2737 2746 2754 2763 2771
MOUTKMEM . . . . .  C ADDR   1815H   R   SEG=MAIN   3894# 3902
MOVE28 . . . . . .  C ADDR   2907H   R   SEG=MAIN   1282 1300 1347 1456 2191 2229 4731 4814 4832 4957 4969 4984 5145
                                           5161 5315 5330 6450#
MOVE82 . . . . . .  C ADDR   24C0H   R   SEG=MAIN   5875#
MOVEA3 . . . . . .  C ADDR   09A2H   R   SEG=MAIN   1665#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2593 2830 2873 3227 3598 3642 3650 3704 3756 3801 3944 4231 4326
                                           4409 4453 4531 4559 6127
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   146

MOVRIG . . . . . .  D ADDR   003BH   A      308# 2589 2823 2827 2869 3228 3597 3646 3696 3700 3755 3805 3943 4230
                                           4410 4535 6136
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7967# 8010
MUP11. . . . . . .  C ADDR   0257H   A      8014# 8059
MUP2 . . . . . . .  C ADDR   0297H   A      8044 8058#
MUP3 . . . . . . .  C ADDR   026CH   A      8013 8029#
MVV11. . . . . . .  C ADDR   1676H   R   SEG=MAIN   3622 3655#
MVV12. . . . . . .  C ADDR   168EH   R   SEG=MAIN   3655 3667#
N12DELCH . . . . .  C ADDR   0D56H   R   SEG=MAIN   2247 2255#
N4DELCH. . . . . .  C ADDR   0D02H   R   SEG=MAIN   2171 2209#
N8DELCH. . . . . .  C ADDR   0D44H   R   SEG=MAIN   2209 2247#
NBIMENU. . . . . .  C ADDR   1081H   R   SEG=MAIN   2730#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 627 1951 3430 3566 3659 3723 3937 4028 6542 6563 6594
NE05 . . . . . . .  C ADDR   0358H   A      8196 8198 8200 8203#
NELEM. . . . . . .  D ADDR   0037H   A      312# 628 3968 4085 4089
NEXIN. . . . . . .  C ADDR   2206H   R   SEG=MAIN   5372# 5379
NEXTMAX. . . . . .  C ADDR   21A1H   R   SEG=MAIN   5304 5312#
NEXTMEA. . . . . .  C ADDR   1F8EH   R   SEG=MAIN   4947 4955#
NEXTMIN. . . . . .  C ADDR   20ACH   R   SEG=MAIN   5134 5142#
NMEM_MENU. . . . .  C ADDR   1818H   R   SEG=MAIN   3896# 3900
NMINUS . . . . . .  C ADDR   06A3H   R   SEG=MAIN   1248 1252#
NMINUS3. . . . . .  C ADDR   0607H   R   SEG=MAIN   1150 1152#
NNDELCH. . . . . .  C ADDR   0CC2H   R   SEG=MAIN   2156 2171#
NNMEMB . . . . . .  C ADDR   1184H   R   SEG=MAIN   2728 2896#
NNNOTT . . . . . .  C ADDR   13E7H   R   SEG=MAIN   3258# 3261
NNNUL. . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1747 1750#
NO . . . . . . . .  C ADDR   2B71H   R   SEG=MAIN   7066 7070 7074 7078#
NO0CHK . . . . . .  C ADDR   11D2H   R   SEG=MAIN   2953#
NO0CHKL. . . . . .  C ADDR   0D69H   R   SEG=MAIN   2267#
NO0KEY . . . . . .  C ADDR   02B9H   R   SEG=MAIN   699 706#
NO10MSV. . . . . .  C ADDR   17B9H   R   SEG=MAIN   3845 3851#
NO11V6 . . . . . .  C ADDR   0F61H   R   SEG=MAIN   2559 2567#
NO12V6 . . . . . .  C ADDR   0F75H   R   SEG=MAIN   2567 2576#
NO13V6 . . . . . .  C ADDR   0F89H   R   SEG=MAIN   2576 2586#
NO21P7 . . . . . .  C ADDR   1D53H   R   SEG=MAIN   4569 4618#
NO23RI . . . . . .  C ADDR   1032H   R   SEG=MAIN   2686 2690#
NO2MSV . . . . . .  C ADDR   17B6H   R   SEG=MAIN   3850# 3851 3861
NO2PARN. . . . . .  C ADDR   0997H   R   SEG=MAIN   1648 1654#
NO31N. . . . . . .  C ADDR   1770H   R   SEG=MAIN   3814#
NO31RI . . . . . .  C ADDR   1063H   R   SEG=MAIN   2692 2716#
NO3PARN. . . . . .  C ADDR   098DH   R   SEG=MAIN   1648# 1728
NO4DEL . . . . . .  C ADDR   0C65H   R   SEG=MAIN   2099 2117#
NO5DEL . . . . . .  C ADDR   0C84H   R   SEG=MAIN   2132# 2140
NO6DEL . . . . . .  C ADDR   0C92H   R   SEG=MAIN   2130 2138#
NOAVK. . . . . . .  C ADDR   0675H   R   SEG=MAIN   1174 1223# 2149
NOAVP. . . . . . .  C ADDR   079AH   R   SEG=MAIN   1370# 1401 1404
NOBAVP . . . . . .  C ADDR   0A3EH   R   SEG=MAIN   1513 1517 1598 1768 1772#
NOBEF99. . . . . .  C ADDR   0370H   R   SEG=MAIN   812 828# 847 865 881
NOBIT. . . . . . .  C ADDR   0245H   A      7982 7996#
NOBITIZM . . . . .  C ADDR   0A47H   R   SEG=MAIN   1774 1777#
NOBL21 . . . . . .  C ADDR   10F7H   R   SEG=MAIN   2776 2784#
NOBL22 . . . . . .  C ADDR   1101H   R   SEG=MAIN   2784 2804#
NOBUF. . . . . . .  C ADDR   0A7CH   R   SEG=MAIN   1804 1806#
NOBUF0 . . . . . .  C ADDR   0C08H   R   SEG=MAIN   1941 2062#
NOCHI0 . . . . . .  C ADDR   0989H   R   SEG=MAIN   1390 1635#
NOCHIND. . . . . .  C ADDR   02D8H   R   SEG=MAIN   720 728#
NOCHN10. . . . . .  C ADDR   05CAH   R   SEG=MAIN   1105 1110#
NOCHN2 . . . . . .  C ADDR   05BFH   R   SEG=MAIN   1100 1105#
NOCHN20. . . . . .  C ADDR   05D5H   R   SEG=MAIN   1110 1115#
NODI2. . . . . . .  C ADDR   096DH   R   SEG=MAIN   1606 1618#
NODI6. . . . . . .  C ADDR   12C5H   R   SEG=MAIN   3097 3101#
NODI8. . . . . . .  C ADDR   09F3H   R   SEG=MAIN   1711 1718#
NODI8K . . . . . .  C ADDR   1BE3H   R   SEG=MAIN   4395 4400#
NODI8_43 . . . . .  C ADDR   194CH   R   SEG=MAIN   4042 4048#
NODI9. . . . . . .  C ADDR   0972H   R   SEG=MAIN   1620 1623#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   147

NODI9_43 . . . . .  C ADDR   1957H   R   SEG=MAIN   4048 4056#
NODIS9 . . . . . .  C ADDR   0A06H   R   SEG=MAIN   1718 1730#
NODISK9. . . . . .  C ADDR   1BEBH   R   SEG=MAIN   4399 4400 4407#
NOENDLI. . . . . .  C ADDR   29A9H   R   SEG=MAIN   6577 6581#
NOEQU1 . . . . . .  C ADDR   1169H   R   SEG=MAIN   2872 2876#
NOEQU2 . . . . . .  C ADDR   176AH   R   SEG=MAIN   3804 3808#
NOFIZM . . . . . .  C ADDR   0F42H   R   SEG=MAIN   2523 2555#
NOFT1. . . . . . .  C ADDR   0F1CH   R   SEG=MAIN   2528 2532#
NOFZ . . . . . . .  C ADDR   0C03H   R   SEG=MAIN   2053 2057#
NOH37. . . . . . .  C ADDR   135EH   R   SEG=MAIN   3157 3181# 3191
NOHNOT1. . . . . .  C ADDR   143CH   R   SEG=MAIN   3262 3305#
NOHNOT2. . . . . .  C ADDR   1431H   R   SEG=MAIN   3298# 3305
NOKLB. . . . . . .  C ADDR   0A76H   R   SEG=MAIN   1802 1804#
NOKORR . . . . . .  C ADDR   061DH   R   SEG=MAIN   1161 1164#
NOLAH. . . . . . .  C ADDR   1320H   R   SEG=MAIN   3126 3144#
NOLI_43. . . . . .  C ADDR   19C8H   R   SEG=MAIN   4075 4120#
NOM31. . . . . . .  C ADDR   1748H   R   SEG=MAIN   3708 3783#
NOM32. . . . . . .  C ADDR   17C1H   R   SEG=MAIN   3783 3857#
NOM33. . . . . . .  C ADDR   17EFH   R   SEG=MAIN   3857 3877#
NOMARL . . . . . .  C ADDR   1CD0H   R   SEG=MAIN   4533 4539 4543#
NOMAXI . . . . . .  C ADDR   21B9H   R   SEG=MAIN   5321 5324#
NOME11 . . . . . .  C ADDR   162CH   R   SEG=MAIN   3608#
NOMEM11. . . . . .  C ADDR   109CH   R   SEG=MAIN   2733 2743#
NOMEM12. . . . . .  C ADDR   10B2H   R   SEG=MAIN   2743 2751#
NOMEM13. . . . . .  C ADDR   10C8H   R   SEG=MAIN   2751 2760#
NOMEMK . . . . . .  C ADDR   1629H   R   SEG=MAIN   3329 3605#
NOMINI . . . . . .  C ADDR   20C4H   R   SEG=MAIN   5151 5154#
NON1C. . . . . . .  C ADDR   0EF0H   R   SEG=MAIN   2503 2507#
NONULAVT . . . . .  C ADDR   065AH   R   SEG=MAIN   1169 1208#
NONULDEL . . . . .  C ADDR   0C47H   R   SEG=MAIN   2087 2098#
NOP1OLL. . . . . .  C ADDR   0A90H   R   SEG=MAIN   1812 1813 1817#
NOP3_0 . . . . . .  C ADDR   098DH   R   SEG=MAIN   1641#
NOPART1. . . . . .  C ADDR   0374H   R   SEG=MAIN   801 835#
NOPART2. . . . . .  C ADDR   0394H   R   SEG=MAIN   835 854#
NOPART3. . . . . .  C ADDR   03B4H   R   SEG=MAIN   854 870#
NOPART4. . . . . .  C ADDR   03D4H   R   SEG=MAIN   870 887#
NOPLUS . . . . . .  C ADDR   0FD9H   R   SEG=MAIN   2637 2640#
NOPOIN7. . . . . .  C ADDR   1CE7H   R   SEG=MAIN   4529 4564#
NOPOINT. . . . . .  C ADDR   1CB3H   R   SEG=MAIN   4523 4527#
NORDN. . . . . . .  C ADDR   00F6H   A      7703# 7736
NORDN1 . . . . . .  C ADDR   0107H   A      7705 7719#
NORIG2 . . . . . .  C ADDR   113CH   R   SEG=MAIN   2837 2845#
NORIM6 . . . . . .  C ADDR   1184H   R   SEG=MAIN   2900#
NORIME . . . . . .  C ADDR   1018H   R   SEG=MAIN   2673 2677#
NORIME1. . . . . .  C ADDR   1012H   R   SEG=MAIN   2675# 2678 2691
NORM1. . . . . . .  C ADDR   00F0H   A      7698# 7895 8072 8174 8391
NORR11 . . . . . .  C ADDR   1376H   R   SEG=MAIN   3193#
NORR12 . . . . . .  C ADDR   1386H   R   SEG=MAIN   3193 3200# 3214
NORUP. . . . . . .  C ADDR   0119H   A      7702 7739#
NORUP1 . . . . . .  C ADDR   011EH   A      7744# 7762
NORUP2 . . . . . .  C ADDR   0132H   A      7746 7763#
NORVICH. . . . . .  C ADDR   0A93H   R   SEG=MAIN   1727 1818#
NOSAV1 . . . . . .  C ADDR   0B51H   R   SEG=MAIN   1952 1955#
NOSAV2 . . . . . .  C ADDR   0B58H   R   SEG=MAIN   1955 1958#
NOSAV3 . . . . . .  C ADDR   0B5FH   R   SEG=MAIN   1958 1961#
NOSUB. . . . . . .  C ADDR   2BACH   R   SEG=MAIN   7100 7104 7108 7113#
NOT1IN . . . . . .  C ADDR   0C1DH   R   SEG=MAIN   1891 2072#
NOT1_7 . . . . . .  C ADDR   125BH   R   SEG=MAIN   3039 3046#
NOT2IN . . . . . .  C ADDR   0C25H   R   SEG=MAIN   2072 2076#
NOT2_7 . . . . . .  C ADDR   1266H   R   SEG=MAIN   3046 3051#
NOT3IN . . . . . .  C ADDR   0C2DH   R   SEG=MAIN   2076 2079#
NOTAKT . . . . . .  C ADDR   0A51H   R   SEG=MAIN   1778 1782#
NOTE21 . . . . . .  C ADDR   071AH   R   SEG=MAIN   1269 1311#
NOTE22 . . . . . .  C ADDR   0735H   R   SEG=MAIN   1311 1323#
NOTESTIZM. . . . .  C ADDR   074DH   R   SEG=MAIN   1232 1335#
NOTT1. . . . . . .  C ADDR   0B9BH   R   SEG=MAIN   1998 2003#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   148

NOTT2. . . . . . .  C ADDR   0BC3H   R   SEG=MAIN   2003 2026#
NOTT3. . . . . . .  C ADDR   0BD1H   R   SEG=MAIN   2026 2033#
NOTT4. . . . . . .  C ADDR   0BE8H   R   SEG=MAIN   2033 2042#
NOTT5. . . . . . .  C ADDR   0BF6H   R   SEG=MAIN   2042 2047#
NOT_1. . . . . . .  C ADDR   0EF7H   R   SEG=MAIN   2507 2512#
NOT_10 . . . . . .  C ADDR   0EF7H   R   SEG=MAIN   2511#
NOVIR. . . . . . .  C ADDR   0FFAH   R   SEG=MAIN   2544 2662#
NOVIR1 . . . . . .  C ADDR   0F2CH   R   SEG=MAIN   2544# 2555
NOZMEA . . . . . .  C ADDR   2009H   R   SEG=MAIN   5012 5014#
NOZMIN . . . . . .  C ADDR   2118H   R   SEG=MAIN   5202 5204#
NOZZBL . . . . . .  C ADDR   193EH   R   SEG=MAIN   4031 4034 4037 4040#
NOZZMI . . . . . .  C ADDR   09E0H   R   SEG=MAIN   1706 1708#
NOZZMI1. . . . . .  C ADDR   192EH   R   SEG=MAIN   4029 4032#
NOZZMI2. . . . . .  C ADDR   1935H   R   SEG=MAIN   4032 4035#
NOZZMI3. . . . . .  C ADDR   193CH   R   SEG=MAIN   4035 4038#
NOZZMI43 . . . . .  C ADDR   1925H   R   SEG=MAIN   4026 4028#
NSEC1. . . . . . .  C ADDR   0A2AH   R   SEG=MAIN   1751 1755#
NSEC10 . . . . . .  C ADDR   0A35H   R   SEG=MAIN   1754 1758 1763#
NSEC11 . . . . . .  C ADDR   0A32H   R   SEG=MAIN   1755 1760#
NUERR. . . . . . .  D ADDR   0039H   A      310# 1427 1814 4219 4414 4602 5409 5423 6221
NULAVT . . . . . .  C ADDR   0CA7H   R   SEG=MAIN   2154#
NUMSIZE. . . . . .  N NUMB   0004H   A      6681# 6703 6741 6748 6823 6843
OBOARD . . . . . .  C ADDR   2AE2H   R   SEG=MAIN   6924 6938#
OBOARD1. . . . . .  C ADDR   2B2AH   R   SEG=MAIN   6997 7010#
OFFMENUM . . . . .  C ADDR   1487H   R   SEG=MAIN   3345# 3354
OK1. . . . . . . .  C ADDR   0186H   A      7829 7844#
OK2. . . . . . . .  C ADDR   01A0H   A      7846 7861#
OK3. . . . . . . .  C ADDR   01C4H   A      7878 7894#
OLDMAX . . . . . .  C ADDR   2138H   R   SEG=MAIN   5223 5229#
OLDMEAN. . . . . .  C ADDR   1F44H   R   SEG=MAIN   4897 4903#
OLDMIN . . . . . .  C ADDR   2043H   R   SEG=MAIN   5054 5060#
ONBOAR1. . . . . .  C ADDR   2B08H   R   SEG=MAIN   6959 6976#
ONBOARD. . . . . .  C ADDR   2ABCH   R   SEG=MAIN   6888 6902#
ONMEM11. . . . . .  C ADDR   1461H   R   SEG=MAIN   3070 3137 3162 3323# 3367 3376 3382 3387 3626 3666 3673 3916 3922
                                           4174 4178 4183 4198 4203 4233 4247 4251 4429 4434
ONMEM12. . . . . .  C ADDR   1AD9H   R   SEG=MAIN   4252# 4255 4274
ONMEM13. . . . . .  C ADDR   1C93H   R   SEG=MAIN   4454 4509# 4513 4515
ONMIG. . . . . . .  C ADDR   268BH   R   SEG=MAIN   6203 6212#
ONTEST . . . . . .  C ADDR   0EA6H   R   SEG=MAIN   2436 2446#
ONVICH . . . . . .  C ADDR   0E62H   R   SEG=MAIN   2393 2405#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 494
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 487 491
OUT43. . . . . . .  C ADDR   1960H   R   SEG=MAIN   4065#
OUT6 . . . . . . .  C ADDR   1184H   R   SEG=MAIN   2261 2339 2385 2468 2473 2478 2494 2542 2653 2901#
OUT7 . . . . . . .  C ADDR   1D7CH   R   SEG=MAIN   2947 2948 3043 3050 3054 3076 3082 3132 3327 3415 3767 3896 4067
                                           4074 4119 4213 4308 4504 4518 4613 4615 4643#
OUTA . . . . . . .  C ADDR   2652H   R   SEG=MAIN   3232 6144#
OUTA2. . . . . . .  C ADDR   266CH   R   SEG=MAIN   6155# 6160
OUTF . . . . . . .  C ADDR   0F22H   R   SEG=MAIN   2538#
OUTFL. . . . . . .  C ADDR   0FEAH   R   SEG=MAIN   2645 2649#
OUTKMEM. . . . . .  C ADDR   146EH   R   SEG=MAIN   3331# 3357 3894
OUTMA. . . . . . .  C ADDR   0FC3H   R   SEG=MAIN   2628 2630#
OUTMAX . . . . . .  C ADDR   21BEH   R   SEG=MAIN   5209 5308 5327#
OUTMEA . . . . . .  C ADDR   1FA9H   R   SEG=MAIN   4901 4951 4966#
OUTMENU. . . . . .  C ADDR   1A85H   R   SEG=MAIN   4212#
OUTMIN . . . . . .  C ADDR   20C9H   R   SEG=MAIN   5040 5138 5158#
OUTR . . . . . . .  C ADDR   090CH   R   SEG=MAIN   1543 1566#
OUTR5. . . . . . .  C ADDR   0928H   R   SEG=MAIN   1564 1585#
OUTSKO . . . . . .  C ADDR   1B3AH   R   SEG=MAIN   4304 4306#
OUTSKO1. . . . . .  C ADDR   1B37H   R   SEG=MAIN   4302 4305#
OUTVICH. . . . . .  C ADDR   0F2FH   R   SEG=MAIN   2545# 2557
OUTVIR . . . . . .  C ADDR   0DE5H   R   SEG=MAIN   2306 2335#
OUT_KALI . . . . .  C ADDR   1E8BH   R   SEG=MAIN   4798#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6880
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5372 5376
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   149

P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 465
P1 . . . . . . . .  D ADDR   0090H   A      32# 659 660 1813 4218 5435 5437 5440 5443 5447 5449 5450 5502 5504 5506
                                           5942 5949 6480 6483 6485 6488
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 466
P2 . . . . . . . .  D ADDR   00A0H   A      47# 5468 5472 5481
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 467
P3 . . . . . . . .  D ADDR   00B0H   A      62# 476 2269 2305 2307 2309 2310 2313 2314 2318 2319 2321 2322 2324 2325
                                           2327 2328 2330 2331 2517 2518 2524 2525 2556 2557 2560 2561 2568 2569 2577
                                           2578 2586 2587 2632 2633 2643 2644 2670 2671 2684 2685 2695 2696 2720 2721
                                           2722 2723 2735 2736 2744 2745 2752 2753 2761 2762 2770 2771 2805 2806 2840
                                           2841 2849 2850 2890 2891 2922 2954 2994 2996 2998 2999 3002 3003 3005 3006
                                           3008 3009 3011 3016 3018 3019 3021 3022 3127 3130 3156 3157 3181 3182 3194
                                           3195 3201 3202 3215 3216 3260 3261 3353 3354 3356 3357 3360 3361 3402 3403
                                           3419 3420 3421 3422 3476 3477 3608 3609 3619 3620 3710 3711 3712 3713 3784
                                           3785 3814 3815 3858 3859 3860 3861 3878 3879 3880 3881 3899 3900 3901 3902
                                           3909 3910 3952 3953 3954 3955 4076 4077 4165 4166 4241 4242 4254 4255 4271
                                           4272 4273 4274 4314 4315 4331 4332 4338 4339 4340 4341 4512 4513 4514 4515
                                           4521 4522 4527 4528 4564 4565 4657 5467 5469 5471 5477 5478 5479 5482 5483
P3IF . . . . . . .  D ADDR   00ADH   A      59# 700 702 2268 2279 2921 2953 2968 4656
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 469
P4 . . . . . . . .  D ADDR   0084H   A      20# 2089 2110 2157 2240 2421 2423 4784 5560 5563 5579 5581 6045
P5 . . . . . . . .  D ADDR   0085H   A      21# 573 582 2091 2112 2159 2162 2167 2202 2204 2242 2431 2433 4788 5568
                                           5571 5601 5604 6049
P6 . . . . . . . .  D ADDR   0086H   A      22# 1967 1969 1973 1975 2924 2926 2930 2932 4660 4662 4666 4668
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 470
PACK1. . . . . . .  C ADDR   00DEH   A      7681# 7896 8073 8175 8392
PARERR . . . . . .  C ADDR   1BF8H   R   SEG=MAIN   4370 4372 4374 4414#
PARN . . . . . . .  D ADDR   00AFH   A      390# 579 1741 2498 3288
PAROL. . . . . . .  D ADDR   00A8H   A      386#
PART . . . . . . .  D ADDR   009AH   A      380# 574 799 1139 1181 1208 1223 1750 1819 1997 2129 2387 2462 2499 3037
                                           3271 3287 3757 3844 5572 5969
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215 519
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132# 518
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116# 517
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101# 516 1977 1979 2934 2936 4670 4672 5354 5356
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 463
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 464 515
PCON . . . . . . .  D ADDR   0087H   A      23# 510
POIN3. . . . . . .  C ADDR   1CE6H   R   SEG=MAIN   4562# 4616
POINA. . . . . . .  C ADDR   1D4EH   R   SEG=MAIN   4560 4615#
POINA1 . . . . . .  C ADDR   1CCBH   R   SEG=MAIN   4532 4539#
POINA2 . . . . . .  C ADDR   1CC5H   R   SEG=MAIN   4535# 4540
POZB . . . . . . .  C ADDR   1D71H   R   SEG=MAIN   4629 4633#
PROD . . . . . . .  N NUMB   000CH   A      7618# 7962 7963 7964 7965 7985 7986 7987 7989 7990 7992 7993 7995 8017
                                           8019 8020 8022 8023 8025 8026 8028 8047 8048 8049 8051 8052 8054 8055 8057
                                           8068 8069 8070 8071 8092 8093 8094 8095 8111 8113 8114 8116 8117 8119 8120
                                           8122 8152 8169 8170 8171 8172
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8423 8427 8480 8483
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2282 2911 2971 4654 6389 6391 7353
                                           7361
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   150

PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0DEFH   R   SEG=MAIN   2329 2341#
QUES . . . . . . .  C ADDR   151CH   R   SEG=MAIN   3415# 3420
QU_AVP . . . . . .  C ADDR   0797H   R   SEG=MAIN   1367 1369#
R10. . . . . . . .  N NUMB   000AH   A      450# 1170 1422 1459 1471 2016 4373 6017 8446
R11. . . . . . . .  N NUMB   000BH   A      451# 1171 1421 1460 1470 2019 6021 8450
R8 . . . . . . . .  N NUMB   0008H   A      448# 525 1424 1457 1473 2010 4191 4369 5522 6009 8438
R9 . . . . . . . .  N NUMB   0009H   A      449# 1423 1458 1472 2013 4371 5523 6013 8442
RAFTERK. . . . . .  C ADDR   0633H   R   SEG=MAIN   1178# 1184
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   1569H   R   SEG=MAIN   3472# 3477
RE1. . . . . . . .  C ADDR   22C5H   R   SEG=MAIN   5502# 5508
RE11_7 . . . . . .  C ADDR   06DBH   R   SEG=MAIN   1280# 1322 1333
RE4BYTE. . . . . .  C ADDR   0454H   A      524 4190 4367 8434#
REA3_X . . . . . .  C ADDR   29EFH   R   SEG=MAIN   3998 6633#
REACP. . . . . . .  D ADDR   0077H   A      304# 674 676 678 680 740 756 764 772 781 788 803 838 856 872 888 2176
                                           2178 2180 2182 2214 2216 2218 2220
READ . . . . . . .  C ADDR   22C3H   R   SEG=MAIN   673 675 677 5501#
READYACP . . . . .  C ADDR   032BH   R   SEG=MAIN   782 792#
READ_X2. . . . . .  C ADDR   22ABH   R   SEG=MAIN   5476# 5487
REBYTE . . . . . .  C ADDR   0278H   R   SEG=MAIN   658# 692 717 829 2115 2137 2143 2169 2207 2245 2254 2256
REBYTE2. . . . . .  C ADDR   046CH   A      1272 1280 1298 1314 1325 1341 4804 4812 8454#
REBYTER. . . . . .  C ADDR   0C97H   R   SEG=MAIN   2126 2143#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 471
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   12A8H   R   SEG=MAIN   3084# 3086
RESAR2 . . . . . .  C ADDR   2913H   R   SEG=MAIN   804 839 857 873 889 901 937 1019 1075 1196 1241 1349 1373 1439
                                           1462 1489 1682 1914 2063 2102 2128 3114 4725 4733 4752 4830 4852 4959 4971
                                           4986 5085 5143 5159 5173 5255 5313 5328 5345 6145 6458# 6617
RESAR8 . . . . . .  C ADDR   28D1H   R   SEG=MAIN   1152 1202 1244 1252 1378 2189 2227 6397#
RESA_HL. . . . . .  C ADDR   29BCH   R   SEG=MAIN   1945 4891 4904 5048 5061 5217 5230 6594#
REZAM. . . . . . .  D ADDR   008CH   A      376# 2224
REZAP. . . . . . .  D ADDR   0088H   A      375# 2186
REZMUL . . . . . .  C ADDR   068BH   R   SEG=MAIN   1216 1230 1239#
REZ_A. . . . . . .  D ADDR   0062H   A      365# 817 890 900 936 1018 1074 2101
REZ_A0 . . . . . .  D ADDR   006AH   A      367# 1201 1377 1415 1629 2379 3105 3115 3122
REZ_A1 . . . . . .  D ADDR   0066H   A      366# 1133 1199 1240 1354 1372 1391
REZ_A2 . . . . . .  D ADDR   007BH   A      368# 1374
REZ_A3 . . . . . .  D ADDR   009CH   A      382# 1204 1380 1438 1681 1824 3113 4724 4829 6616 6647
REZ_AK . . . . . .  D ADDR   00A4H   A      385# 4491 4732
REZ_AME. . . . . .  D ADDR   005EH   A      363# 1145 1154 1195 1254 1348
REZ_DEL. . . . . .  D ADDR   00C5H   A      402# 819
REZ_R. . . . . . .  D ADDR   00C9H   A      403# 1475 1488
RE_HL. . . . . . .  C ADDR   29C3H   R   SEG=MAIN   6597# 6607 6611 6614
RE_HL1 . . . . . .  C ADDR   29CBH   R   SEG=MAIN   6595 6605#
RE_HL2 . . . . . .  C ADDR   29D2H   R   SEG=MAIN   6605 6609#
RE_HL3 . . . . . .  C ADDR   29D9H   R   SEG=MAIN   6609 6613#
RFINDMEM . . . . .  C ADDR   0FF7H   R   SEG=MAIN   2661# 2662
RGO23NO. . . . . .  C ADDR   156CH   R   SEG=MAIN   3473# 3478
RGOTO7 . . . . . .  C ADDR   1745H   R   SEG=MAIN   3781# 3815
RHNOR11. . . . . .  C ADDR   1350H   R   SEG=MAIN   3155 3167 3173#
RHNOT1 . . . . . .  C ADDR   1317H   R   SEG=MAIN   3130 3139#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   101BH   R   SEG=MAIN   2668 2680#
RI6. . . . . . . .  C ADDR   1015H   R   SEG=MAIN   2671 2676# 2685 2696 2719 2723
RIGBLO . . . . . .  C ADDR   1104H   R   SEG=MAIN   2805# 2836 2838
RIGBLOK. . . . . .  C ADDR   1142H   R   SEG=MAIN   2849#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   151

RIGHT2 . . . . . .  C ADDR   0E16H   R   SEG=MAIN   2356 2360#
RIGHT3 . . . . . .  C ADDR   0E1AH   R   SEG=MAIN   2358 2363#
RIKN . . . . . . .  C ADDR   0F9BH   R   SEG=MAIN   2593# 2611
RIZMAN . . . . . .  C ADDR   0D66H   R   SEG=MAIN   2265# 2315
RI_31. . . . . . .  C ADDR   1035H   R   SEG=MAIN   2683 2692#
RKNLEFT. . . . . .  C ADDR   11CFH   R   SEG=MAIN   2951# 3010
RKNMEM . . . . . .  C ADDR   11D9H   R   SEG=MAIN   2957# 3020
RKNNUL . . . . . .  C ADDR   11CCH   R   SEG=MAIN   2950# 3004
RKNOPT . . . . . .  C ADDR   0D63H   R   SEG=MAIN   2264# 2326
RKNRAZR. . . . . .  C ADDR   0D60H   R   SEG=MAIN   2263# 2320
RKVVOD0. . . . . .  C ADDR   14B3H   R   SEG=MAIN   3362 3369#
RLABELF. . . . . .  C ADDR   0D5DH   R   SEG=MAIN   2262# 2312
RLABELH. . . . . .  C ADDR   11C9H   R   SEG=MAIN   2949# 3001
RLABELI. . . . . .  C ADDR   131DH   R   SEG=MAIN   3142#
RLABELK. . . . . .  C ADDR   131AH   R   SEG=MAIN   3141# 3144
RLABELL. . . . . .  C ADDR   0FF4H   R   SEG=MAIN   2660#
RLABELL1 . . . . .  C ADDR   1181H   R   SEG=MAIN   2891 2894#
RLABELN. . . . . .  C ADDR   1078H   R   SEG=MAIN   2721 2725#
RLABELP. . . . . .  C ADDR   1A20H   R   SEG=MAIN   4163# 4166
RLABELS13. . . . .  C ADDR   1B44H   R   SEG=MAIN   4311# 4339
RLABELS4 . . . . .  C ADDR   1B41H   R   SEG=MAIN   4310# 4313
RLABL2 . . . . . .  C ADDR   1516H   R   SEG=MAIN   3413#
RLABM. . . . . . .  C ADDR   1519H   R   SEG=MAIN   3414# 3418
RLEFCUR. . . . . .  C ADDR   17ECH   R   SEG=MAIN   3875# 3879
RLER . . . . . . .  C ADDR   2644H   R   SEG=MAIN   6128 6130#
RLIST_43 . . . . .  C ADDR   1883H   R   SEG=MAIN   3949# 3951
RMAS4. . . . . . .  C ADDR   047CH   R   SEG=MAIN   962# 964
RME21_23 . . . . .  C ADDR   1853H   R   SEG=MAIN   3907 3926#
RMO220 . . . . . .  C ADDR   066DH   R   SEG=MAIN   1218# 1265
RNNMEMB. . . . . .  C ADDR   107EH   R   SEG=MAIN   2728# 2731
RNO3PARN . . . . .  C ADDR   0A04H   R   SEG=MAIN   1728# 1742
RNOBUF0. . . . . .  C ADDR   0B37H   R   SEG=MAIN   1918 1941#
RNOCHI0. . . . . .  C ADDR   07BFH   R   SEG=MAIN   1386 1390#
RNOH37 . . . . . .  C ADDR   1374H   R   SEG=MAIN   3191# 3195 3202 3216
RNOM31 . . . . . .  C ADDR   16C3H   R   SEG=MAIN   3708# 3709
RNOMEMK. . . . . .  C ADDR   146BH   R   SEG=MAIN   3329# 3351
RNORVICH . . . . .  C ADDR   0A01H   R   SEG=MAIN   1670 1671 1727#
RNOT1IN. . . . . .  C ADDR   0AECH   R   SEG=MAIN   1821 1891#
RNOTESTIZM . . . .  C ADDR   0683H   R   SEG=MAIN   1232# 1267
ROUSTA . . . . . .  C ADDR   1A0CH   R   SEG=MAIN   4147 4155#
ROUSTA1. . . . . .  C ADDR   1A1DH   R   SEG=MAIN   4155 4161#
ROUT6. . . . . . .  C ADDR   0D5AH   R   SEG=MAIN   2261# 2311
ROUT7. . . . . . .  C ADDR   11C6H   R   SEG=MAIN   2948# 2995 3000
ROUTMAX. . . . . .  C ADDR   211CH   R   SEG=MAIN   5209# 5227
ROUTMIN. . . . . .  C ADDR   2027H   R   SEG=MAIN   5040# 5058
RR0. . . . . . . .  N NUMB   0000H   A      441# 2283 2910 2972 4653
RR1. . . . . . . .  N NUMB   0001H   A      442# 2284 2909 2973 4652
RR2. . . . . . . .  N NUMB   0002H   A      444# 1274 1286 1292 1304 1316 1327 2285 2908 2974 3977 3985 4651 4806
                                           4818 4824 4836 5535
RR3. . . . . . . .  N NUMB   0003H   A      445# 1275 1285 1293 1303 1317 1328 2286 2907 2975 3978 3984 4650 4807
                                           4817 4825 4835 5536
RR4. . . . . . . .  N NUMB   0004H   A      1276 1284 1294 1302 1318 1329 2287 2906 2976 3979 3983 4649 4808 4816
                                           4826 4834 6682# 6739 6760 6776 6820 6842
RR5. . . . . . . .  N NUMB   0005H   A      1277 1283 1295 1301 1319 1330 2288 2905 2977 3980 3982 4648 4809 4815
                                           4827 4833 6683# 6740 6747 6754 6821 6830
RR6. . . . . . . .  N NUMB   0006H   A      443# 2289 2904 2978 4647
RR7. . . . . . . .  N NUMB   0007H   A      446# 2290 2903 2979 4646
RRIR . . . . . . .  C ADDR   2651H   R   SEG=MAIN   6139 6141#
RRMO220. . . . . .  C ADDR   07BCH   R   SEG=MAIN   1363 1389#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   09A0H   R   SEG=MAIN   1660# 1672 1674 1675
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 501
RTIZMRI. . . . . .  C ADDR   0EFBH   R   SEG=MAIN   2515#
RVIOUT . . . . . .  C ADDR   0F72H   R   SEG=MAIN   2561 2569 2573# 2578
RVVIZKO. . . . . .  C ADDR   1352H   R   SEG=MAIN   3175# 3183
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   152

RVVKALI52. . . . .  C ADDR   1B70H   R   SEG=MAIN   4332 4334#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      314# 578 1953 4030
SADIAP2. . . . . .  D ADDR   0032H   A      316# 1956 4033
SADIAP3. . . . . .  D ADDR   0031H   A      317# 1959 4036
SADIAP4. . . . . .  D ADDR   0030H   A      318# 1962 4038
SAUS . . . . . . .  D ADDR   0036H   A      313# 2090 2092 2109 2111 2158 2160 2239 2241
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2303 2606 2624 2819 2866 2886 2991 3638 3693 3798 4321 4448 4554
                                           6204 6212
SAVEIR2. . . . . .  C ADDR   2855H   R   SEG=MAIN   903 940 1022 1078 6297#
SAVELTE. . . . . .  C ADDR   04A7H   A      8517#
SAVEN_BL . . . . .  D ADDR   00D3H   A      406# 599 3569 6565 6596
SAVEN_BL2. . . . .  D ADDR   00C0H   A      399# 607 3584 6584 6606
SAVEN_BL3. . . . .  D ADDR   00C2H   A      400# 614 3589 6588 6610
SAVEN_BL4. . . . .  D ADDR   00D9H   A      410# 621 3593 6590 6613
SAVER2 . . . . . .  C ADDR   2861H   R   SEG=MAIN   591 593 595 597 808 818 820 843 861 877 891 1134 1146 1155 1200
                                           1205 1255 1355 1375 1381 1392 1476 1480 1686 2022 2068 2107 2136 2187 2199
                                           2225 2237 3116 3123 4008 4492 4584 4742 4844 4962 4974 4994 5088 5153 5169
                                           5184 5258 5323 5338 5350 6148 6311# 6648
SAVE_HL. . . . . .  C ADDR   2988H   R   SEG=MAIN   1948 3464 3839 6563#
SA_HL. . . . . . .  C ADDR   298FH   R   SEG=MAIN   6566# 6585 6589 6591
SA_HL1 . . . . . .  C ADDR   29AAH   R   SEG=MAIN   6564 6583#
SA_HL2 . . . . . .  C ADDR   29B1H   R   SEG=MAIN   6583 6587#
SA_HL3 . . . . . .  C ADDR   29B8H   R   SEG=MAIN   6587 6590#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 5391 5397
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 509 5392 5396 5399 5400 5421
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   226DH   R   SEG=MAIN   5435# 5442
SDV1 . . . . . . .  C ADDR   2281H   R   SEG=MAIN   5447# 5453
SDVIG0 . . . . . .  C ADDR   030CH   R   SEG=MAIN   768# 770
SDVIG1 . . . . . .  C ADDR   0301H   R   SEG=MAIN   760# 762
SDVIG2 . . . . . .  C ADDR   02F6H   R   SEG=MAIN   752# 754
SDVIG3 . . . . . .  C ADDR   02EAH   R   SEG=MAIN   743# 745
SDVIG4 . . . . . .  C ADDR   031BH   R   SEG=MAIN   778# 780
SDVIG6 . . . . . .  C ADDR   0325H   R   SEG=MAIN   785# 787
SDVM . . . . . . .  C ADDR   0323H   R   SEG=MAIN   775 784#
SEEGOON. . . . . .  C ADDR   0A09H   R   SEG=MAIN   1712 1717 1719 1725 1732#
SEEIND . . . . . .  C ADDR   0A17H   R   SEG=MAIN   1652 1659 1660 1744#
SEE_L43. . . . . .  C ADDR   195AH   R   SEG=MAIN   4047 4055 4058#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      7613# 7634 7635 7660 7661 7685 7828 7845 8066 8106
SKOR19 . . . . . .  C ADDR   1A6BH   R   SEG=MAIN   4192 4199#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   13E1H   R   SEG=MAIN   3256# 3272
SP . . . . . . . .  D ADDR   0081H   A      17# 462
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 507
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 506
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5374
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   153

SPWRI. . . . . . .  C ADDR   1B1CH   R   SEG=MAIN   4289 4291#
SS1. . . . . . . .  C ADDR   23A3H   R   SEG=MAIN   5684# 5686
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      394# 805 807 822 840 842 858 860 874 876 1413 1627 2377 3103
SUMT2. . . . . . .  C ADDR   0377H   R   SEG=MAIN   796 837#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196 520 1984 2941 4677 5359
T2MSME . . . . . .  C ADDR   17B0H   R   SEG=MAIN   3847# 3853
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   2543H   R   SEG=MAIN   5960# 5970
TABN . . . . . . .  C ADDR   25DBH   R   SEG=MAIN   6062# 6066
TABT11 . . . . . .  C ADDR   235BH   R   SEG=MAIN   5621# 6042
TABT7. . . . . . .  C ADDR   235FH   R   SEG=MAIN   4781 5625# 6055
TABT9. . . . . . .  C ADDR   235DH   R   SEG=MAIN   5623# 6052
TABUS. . . . . . .  C ADDR   2347H   R   SEG=MAIN   5557 5610#
TAKTIND. . . . . .  C ADDR   0A56H   R   SEG=MAIN   1781 1784#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 498 499 513
TE10MS . . . . . .  C ADDR   26A7H   R   SEG=MAIN   3846 6227#
TE22 . . . . . . .  C ADDR   25CEH   R   SEG=MAIN   6041 6051#
TE23 . . . . . . .  C ADDR   25D6H   R   SEG=MAIN   6051 6055#
TE2MS. . . . . . .  C ADDR   269DH   R   SEG=MAIN   3852 6226#
TEAEQU0. . . . . .  C ADDR   26E3H   R   SEG=MAIN   3229 6235#
TEAVK. . . . . . .  C ADDR   271FH   R   SEG=MAIN   4698 6242#
TEBEQU0. . . . . .  C ADDR   26EDH   R   SEG=MAIN   6236#
TEBL . . . . . . .  C ADDR   27D3H   R   SEG=MAIN   2778 3406 6264#
TEBL0. . . . . . .  C ADDR   27DDH   R   SEG=MAIN   3657 6265#
TECH . . . . . . .  C ADDR   27E7H   R   SEG=MAIN   3938 4105 6266#
TECLE. . . . . . .  C ADDR   2798H   R   SEG=MAIN   2765 3374 6258#
TEEND. . . . . . .  C ADDR   2837H   R   SEG=MAIN   4795 6275#
TEERR. . . . . . .  C ADDR   282DH   R   SEG=MAIN   6219 6274#
TEFULL . . . . . .  C ADDR   27BFH   R   SEG=MAIN   2785 3624 6262#
TEINT. . . . . . .  C ADDR   27C9H   R   SEG=MAIN   3724 6263#
TEIZMK . . . . . .  C ADDR   277AH   R   SEG=MAIN   2563 3160 3169 6255#
TEKALIB. . . . . .  C ADDR   2729H   R   SEG=MAIN   3914 4701 6243#
TEKAOUT. . . . . .  C ADDR   0C9AH   R   SEG=MAIN   2145# 2153
TEKD . . . . . . .  C ADDR   2770H   R   SEG=MAIN   4378 6254#
TELIST . . . . . .  C ADDR   27B4H   R   SEG=MAIN   2748 3315 3385 3391 6261#
TEMAX. . . . . . .  C ADDR   2805H   R   SEG=MAIN   4141 6269#
TEMEM. . . . . . .  C ADDR   27A2H   R   SEG=MAIN   6259#
TEMENU . . . . . .  C ADDR   26F7H   R   SEG=MAIN   6237#
TEMID. . . . . . .  C ADDR   280FH   R   SEG=MAIN   4149 6270#
TEMIN. . . . . . .  C ADDR   27FBH   R   SEG=MAIN   3669 4157 6268#
TEMUL. . . . . . .  C ADDR   076AH   R   SEG=MAIN   1310 1347#
TENMIN . . . . . .  C ADDR   2445H   R   SEG=MAIN   1213 1215 1229 5752#
TEOLI. . . . . . .  C ADDR   2819H   R   SEG=MAIN   1514 1612 6272#
TEOLL. . . . . . .  C ADDR   278EH   R   SEG=MAIN   1609 6257#
TEOLR. . . . . . .  C ADDR   2823H   R   SEG=MAIN   1510 6273#
TEOUT. . . . . . .  C ADDR   2784H   R   SEG=MAIN   6256#
TEPAR. . . . . . .  C ADDR   2766H   R   SEG=MAIN   4718 6253#
TES19_2. . . . . .  C ADDR   275CH   R   SEG=MAIN   530 2705 4199 4430 6251#
TES57_6. . . . . .  C ADDR   2752H   R   SEG=MAIN   2699 4193 4425 4714 6250#
TESKOR . . . . . .  C ADDR   2715H   R   SEG=MAIN   4695 6241#
TEST01 . . . . . .  C ADDR   2226H   R   SEG=MAIN   5396# 5419
TEST02 . . . . . .  C ADDR   2255H   R   SEG=MAIN   5416 5418#
TEST04 . . . . . .  C ADDR   2236H   R   SEG=MAIN   5403# 5405
TEST1. . . . . . .  C ADDR   221CH   R   SEG=MAIN   5391# 5407 5428
TEST2. . . . . . .  C ADDR   224EH   R   SEG=MAIN   5396 5415#
TEST22 . . . . . .  C ADDR   1AF1H   R   SEG=MAIN   4256 4263#
TEST23 . . . . . .  C ADDR   1AF6H   R   SEG=MAIN   4263 4266#
TEST3. . . . . . .  C ADDR   2240H   R   SEG=MAIN   5398 5408#
TEST4. . . . . . .  C ADDR   222EH   R   SEG=MAIN   5399# 5414
TEST5. . . . . . .  C ADDR   2258H   R   SEG=MAIN   5417 5420#
TEST7I . . . . . .  C ADDR   0A6EH   R   SEG=MAIN   1796 1799#
TEST9I . . . . . .  C ADDR   0A67H   R   SEG=MAIN   1791 1796#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   154

TESTAT . . . . . .  C ADDR   27F1H   R   SEG=MAIN   2756 3365 6267#
TESTRS . . . . . .  C ADDR   221AH   R   SEG=MAIN   4182 5389#
TESTS. . . . . . .  C ADDR   1AE5H   R   SEG=MAIN   4258# 4265 4268
TETE11 . . . . . .  C ADDR   2734H   R   SEG=MAIN   4171 4705 6245#
TETE7. . . . . . .  C ADDR   2748H   R   SEG=MAIN   4245 4711 6247#
TETE9. . . . . . .  C ADDR   273EH   R   SEG=MAIN   4708 6246#
TETESI . . . . . .  C ADDR   2701H   R   SEG=MAIN   3064 4688 6239#
TETESR . . . . . .  C ADDR   270BH   R   SEG=MAIN   4692 6240#
TEVICH . . . . . .  C ADDR   26D9H   R   SEG=MAIN   2400 2571 2580 3165 4593 6234#
TEWR . . . . . . .  C ADDR   27AAH   R   SEG=MAIN   2739 3380 6260#
TEXTT. . . . . . .  C ADDR   269DH   R   SEG=MAIN   5637 6225#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 481
TH1. . . . . . . .  D ADDR   008DH   A      29# 528 532 4303 4305
TH2. . . . . . . .  D ADDR   00CDH   A      89# 1981 2938 4674
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   2291H   R   SEG=MAIN   5456#
TIM1 . . . . . . .  C ADDR   2293H   R   SEG=MAIN   5457# 5457
TIM2 . . . . . . .  C ADDR   2296H   R   SEG=MAIN   5438 5441 5448 5452 5460# 5503 5507 6484 6486
TIM3 . . . . . . .  C ADDR   2298H   R   SEG=MAIN   5461# 5461
TIZMRI . . . . . .  C ADDR   0E0FH   R   SEG=MAIN   2355# 2515
TL0. . . . . . . .  D ADDR   008AH   A      26# 482
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88# 1982 2939 4675
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   13DEH   R   SEG=MAIN   3241 3253#
TMOD . . . . . . .  D ADDR   0089H   A      25# 479 512
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 496
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 495
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1A4CH   R   SEG=MAIN   4180 4185#
TOME14 . . . . . .  C ADDR   1A79H   R   SEG=MAIN   4185 4206#
TOME15 . . . . . .  C ADDR   1A91H   R   SEG=MAIN   4206 4218# 4223
TOME21 . . . . . .  C ADDR   1A43H   R   SEG=MAIN   4169 4180#
TOSK19 . . . . . .  C ADDR   1C20H   R   SEG=MAIN   4424 4430#
TOUTF. . . . . . .  C ADDR   135BH   R   SEG=MAIN   3179# 3182
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TTOUT. . . . . . .  C ADDR   0EFEH   R   SEG=MAIN   2517# 2526
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 5375
UNPACK1. . . . . .  C ADDR   009EH   A      7631# 7825 7959 8089 8203
UNPACK2. . . . . .  C ADDR   00BAH   A      7656# 7826 7960 8090
UP1. . . . . . . .  C ADDR   0138H   A      7776# 7793
UP2. . . . . . . .  C ADDR   014BH   A      7796# 7814
UP2A . . . . . . .  C ADDR   0161H   A      7775 7812#
UPA. . . . . . . .  C ADDR   2474H   R   SEG=MAIN   5807# 5813
UPA1 . . . . . . .  C ADDR   2484H   R   SEG=MAIN   5825# 5831
UPA2 . . . . . . .  C ADDR   2464H   R   SEG=MAIN   5788# 5794
UPAA . . . . . . .  C ADDR   2960H   R   SEG=MAIN   6532# 6538
UPAA4. . . . . . .  C ADDR   24CFH   R   SEG=MAIN   5888# 5894
UPAB . . . . . . .  C ADDR   24DFH   R   SEG=MAIN   5905# 5911
UPAK . . . . . . .  C ADDR   246EH   R   SEG=MAIN   5804#
UPAK1. . . . . . .  C ADDR   293AH   R   SEG=MAIN   6497#
UPAK2. . . . . . .  C ADDR   245EH   R   SEG=MAIN   5785#
UPAK3. . . . . . .  C ADDR   247EH   R   SEG=MAIN   3867 3962 5822#
UPAK4. . . . . . .  C ADDR   295AH   R   SEG=MAIN   3821 6529#
UPAKA. . . . . . .  C ADDR   24C9H   R   SEG=MAIN   4576 5885#
UPAKB. . . . . . .  C ADDR   24D9H   R   SEG=MAIN   4623 5902#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   155

UPAV1. . . . . . .  C ADDR   1B8FH   R   SEG=MAIN   4358# 4364
UPAV2. . . . . . .  C ADDR   1C52H   R   SEG=MAIN   4475# 4481
UPK1 . . . . . . .  C ADDR   294CH   R   SEG=MAIN   6505 6508#
UPK2 . . . . . . .  C ADDR   294DH   R   SEG=MAIN   6507 6509#
VICHMAX. . . . . .  C ADDR   211FH   R   SEG=MAIN   4143 5211#
VICHMEAN . . . . .  C ADDR   1F2BH   R   SEG=MAIN   4151 4884#
VICHMIN. . . . . .  C ADDR   202AH   R   SEG=MAIN   3671 4159 5042#
VICHR. . . . . . .  D ADDR   00B1H   A      392# 1268 1787 2397 2410 2545 2558 2664 2672 3068 3072 3080 3154 3220
                                           3333 3903 3911 3920 4164 4215 4236 4376 4567 4606 4638 4686 6040
VIG0 . . . . . . .  C ADDR   0AD8H   R   SEG=MAIN   1875# 1877
VIG4 . . . . . . .  C ADDR   0AE6H   R   SEG=MAIN   1886# 1888
VIOUT. . . . . . .  C ADDR   0ED5H   R   SEG=MAIN   2403 2490# 2518 2530 2535 2565 2574 2582 2607 2630 2639 2642 2676
                                           2689 2704 2710 2726 2741 2750 2758 2767 2782 2829 2832 2875 2889 2892 3178
                                           3179 3258 4252
VIOUTF . . . . . .  C ADDR   1354H   R   SEG=MAIN   3176#
VIT2_10. . . . . .  C ADDR   0E3EH   R   SEG=MAIN   2385# 2391 2392
VODM11_15. . . . .  C ADDR   180FH   R   SEG=MAIN   3892# 3910
VOLUME . . . . . .  D ADDR   00D5H   A      407# 2343 3834 6573 6575
VV21_23. . . . . .  C ADDR   1ADCH   R   SEG=MAIN   4242 4254#
VVCHIBL. . . . . .  C ADDR   2612H   R   SEG=MAIN   2647 6094#
VVCHIF . . . . . .  C ADDR   25EDH   R   SEG=MAIN   6070# 6087
VVINTE . . . . . .  C ADDR   1770H   R   SEG=MAIN   3785 3813#
VVIZKO . . . . . .  C ADDR   13ABH   R   SEG=MAIN   3175 3220#
VVKALI52 . . . . .  C ADDR   1C45H   R   SEG=MAIN   4334 4459# 4511
VVMENU . . . . . .  C ADDR   1BF5H   R   SEG=MAIN   4341 4412#
VVNOL23. . . . . .  C ADDR   260DH   R   SEG=MAIN   6091# 6095
VVNOL31. . . . . .  C ADDR   2608H   R   SEG=MAIN   6089# 6091
VVNOL41. . . . . .  C ADDR   2606H   R   SEG=MAIN   6087# 6089
VVOD2_10 . . . . .  C ADDR   17A8H   R   SEG=MAIN   3342 3469 3580 3844#
VVOD43 . . . . . .  C ADDR   1987H   R   SEG=MAIN   4077 4084#
VVODM11_15 . . . .  C ADDR   1A23H   R   SEG=MAIN   3892 4164#
VVOSTA . . . . . .  C ADDR   19E4H   R   SEG=MAIN   4120 4139#
VVOSTAD. . . . . .  C ADDR   19F8H   R   SEG=MAIN   4139 4147#
VVRR6. . . . . . .  C ADDR   0F58H   R   SEG=MAIN   2563#
VV_52V . . . . . .  C ADDR   1B67H   R   SEG=MAIN   4315 4331#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 477 478
WORK . . . . . . .  D ADDR   00B8H   A      396# 1495 1497 1503 1519 1526 1542 1563 1568 1584 1826 1904 3436 3446
                                           3448 3482 3492 3494 3504 3514 3516 3523 3533 3535 3545 3555 3557 4911 4958
                                           4961 4970 4973 4985 5066 5084 5087 5142 5152 5158 5168 5172 5236 5254 5257
                                           5312 5322 5327 5337 5393 5415
WR1. . . . . . . .  C ADDR   2927H   R   SEG=MAIN   6480# 6487
WRITE. . . . . . .  C ADDR   2924H   R   SEG=MAIN   671 5931 5933 5935 5937 5939 5941 5944 5946 5948 5951 5953 5955
                                           6478#
WRITED_X1. . . . .  C ADDR   229CH   R   SEG=MAIN   5466#
WRITE_X1 . . . . .  C ADDR   229BH   R   SEG=MAIN   5465#
WRPAGE . . . . . .  C ADDR   0480H   A      4300 4774 4876 8478#
WW5. . . . . . . .  C ADDR   0483H   A      8479# 8487
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 473 505
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 474
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 475 504
XCIKLWR. . . . . .  C ADDR   2841H   R   SEG=MAIN   898 911 913 915 918 921 924 927 930 933 966 968 970 973 976 979
                                           982 985 988 990 993 995 997 1000 1003 1006 1009 1012 1015 1067 1069 1071
                                           6280#
XTEMP. . . . . . .  N NUMB   000CH   A      6679# 7043 7044 7045 7046 7132 7134 7135 7137 7138 7140 7141 7143 7165
                                           7166 7167 7168 7186 7187 7191 7192 7195 7199 7200 7203 7207 7208 7212 7213
                                           7215 7216 7217 7219 7223 7224 7226 7227 7231 7232 7237 7238 7240 7241 7245
                                           7246 7251 7253 7254 7255
YBNUL. . . . . . .  C ADDR   12ECH   R   SEG=MAIN   3111 3119#
YES. . . . . . . .  C ADDR   2B8FH   R   SEG=MAIN   7065 7069 7073 7077 7095# 7158
YES0KEY. . . . . .  C ADDR   02C6H   R   SEG=MAIN   704 716#
YES0KEY1 . . . . .  C ADDR   02D3H   R   SEG=MAIN   723# 730
YESAVP . . . . . .  C ADDR   07C9H   R   SEG=MAIN   1369 1395#
YESBUF . . . . . .  C ADDR   0B3CH   R   SEG=MAIN   1939 1944#
YESIND . . . . . .  C ADDR   0A70H   R   SEG=MAIN   1786 1795 1798 1801#
YESPRD . . . . . .  C ADDR   0B3AH   R   SEG=MAIN   1938 1942#
A51 MACRO ASSEMBLER  AMP36_2                                                              01/09/2008 13:18:57 PAGE   156

YESTEST. . . . . .  C ADDR   2336H   R   SEG=MAIN   5552 5584#
YESTT5 . . . . . .  C ADDR   0C06H   R   SEG=MAIN   2060#
YESVICH. . . . . .  C ADDR   0814H   R   SEG=MAIN   1383 1434#
YESVI_KM . . . . .  C ADDR   1E94H   R   SEG=MAIN   4721 4801#
YESVI_KR . . . . .  C ADDR   1E0CH   R   SEG=MAIN   4721# 4723
YST1 . . . . . . .  C ADDR   01A2H   R   SEG=MAIN   529 533#
YST19. . . . . . .  C ADDR   019AH   R   SEG=MAIN   526 530#
Z01S . . . . . . .  C ADDR   23BBH   R   SEG=MAIN   5701# 5703
Z05S . . . . . . .  C ADDR   23C8H   R   SEG=MAIN   5710# 5712
Z100 . . . . . . .  C ADDR   238CH   R   SEG=MAIN   5665# 5667
Z15. . . . . . . .  C ADDR   239AH   R   SEG=MAIN   5677# 5679
Z1S. . . . . . . .  C ADDR   23AEH   R   SEG=MAIN   5693# 5695
ZAPADC . . . . . .  C ADDR   226BH   R   SEG=MAIN   5434#
ZCMP . . . . . . .  C ADDR   28C3H   R   SEG=MAIN   6387#
ZDIV . . . . . . .  C ADDR   2890H   R   SEG=MAIN   816 1126 4001 6350#
ZER1 . . . . . . .  C ADDR   00B3H   A      7641 7645# 7700 7743
ZER2 . . . . . . .  C ADDR   00D4H   A      7667 7671#
ZMUL . . . . . . .  C ADDR   2886H   R   SEG=MAIN   6345#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      324# 1706 4026 5012 5202 6358 6361 6364
ZNPLUS . . . . . .  C ADDR   02DDH   R   SEG=MAIN   682 732#
ZZ . . . . . . . .  C ADDR   239CH   R   SEG=MAIN   5678# 5678
Z_01S. . . . . . .  C ADDR   23B7H   R   SEG=MAIN   2295 2984 4222 5413 5427 5699# 6216
Z_05S. . . . . . .  C ADDR   23C4H   R   SEG=MAIN   2054 2055 2781 4144 4152 4160 5708#
Z_100. . . . . . .  C ADDR   238AH   R   SEG=MAIN   5664#
Z_15 . . . . . . .  C ADDR   2398H   R   SEG=MAIN   650 5676#
Z_1MS. . . . . . .  C ADDR   23A1H   R   SEG=MAIN   723 5420 5683#
Z_1S . . . . . . .  C ADDR   23AAH   R   SEG=MAIN   639 647 1430 2402 3672 3945 4066 4118 4417 4503 4605 4798 4799
                                           5691#
Z_5. . . . . . . .  C ADDR   2393H   R   SEG=MAIN   5470 5480 5671#
Z_9. . . . . . . .  C ADDR   291FH   R   SEG=MAIN   5377 6472#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
