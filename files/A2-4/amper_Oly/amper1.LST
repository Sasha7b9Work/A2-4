A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN amper1.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE amper1.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1     ;$include (c8051f310.inc) ; Include register definition file.
                +1     2     ;---------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2002 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F310.INC
                +1     8     ;       TARGET MCUs     : C8051F310, 'F311
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F31x product family.
                +1    10     ;
                +1    11     ;       REVISION 1.2
                +1    12     ;     -- added VDM0CN (0xff)   
                +1    13     ;
                +1    14     ;       REVISION 1.1
                +1    15     ;     -- changed TARGET MCUs to 'F310, 'F311
                +1    16     ;     -- SPICFG --> SPI0CFG
                +1    17     ;     -- SPICKR --> SPI0CKR
                +1    18     ;     -- SPIDAT --> SPI0DAT
                +1    19     ;     -- removed CLKMUL (0xb9)
                +1    20     ;     -- AMUX0N --> AMX0N
                +1    21     ;     -- AMUX0P --> AMX0P
                +1    22     ;
                +1    23     ;---------------------------------------------------------------------------
                +1    24     
                +1    25     ; BYTE Registers 
  0080          +1    26     P0       DATA  080H     ; PORT 0                                                   
  0081          +1    27     SP       DATA  081H     ; STACK POINTER                                            
  0082          +1    28     DPL      DATA  082H     ; DATA POINTER - LOW BYTE                                  
  0083          +1    29     DPH      DATA  083H     ; DATA POINTER - HIGH BYTE                                 
  0087          +1    30     PCON     DATA  087H     ; POWER CONTROL                                            
  0088          +1    31     TCON     DATA  088H     ; TIMER CONTROL                                            
  0089          +1    32     TMOD     DATA  089H     ; TIMER MODE                                               
  008A          +1    33     TL0      DATA  08AH     ; TIMER 0 - LOW BYTE                                       
  008B          +1    34     TL1      DATA  08BH     ; TIMER 1 - LOW BYTE                                       
  008C          +1    35     TH0      DATA  08CH     ; TIMER 0 - HIGH BYTE                                      
  008D          +1    36     TH1      DATA  08DH     ; TIMER 1 - HIGH BYTE                                      
  008E          +1    37     CKCON    DATA  08EH     ; CLOCK CONTROL                                            
  008F          +1    38     PSCTL    DATA  08FH     ; PROGRAM STORE R/W CONTROL                                
  0090          +1    39     P1       DATA  090H     ; PORT 1                                                   
  0091          +1    40     TMR3CN   DATA  091H     ; TIMER 3 CONTROL                                          
  0092          +1    41     TMR3RLL  DATA  092H     ; TIMER 3 RELOAD LOW                                       
  0093          +1    42     TMR3RLH  DATA  093H     ; TIMER 3 RELOAD HIGH                                      
  0094          +1    43     TMR3L    DATA  094H     ; TIMER 3 LOW BYTE                                         
  0095          +1    44     TMR3H    DATA  095H     ; TIMER 3 HIGH BYTE                                        
  0098          +1    45     SCON0    DATA  098H     ; SERIAL PORT 0 CONTROL                                    
  0099          +1    46     SBUF0    DATA  099H     ; SERIAL PORT 0 BUFFER                                     
  009A          +1    47     CPT1CN   DATA  09AH     ; COMPARATOR 1 CONTROL                                     
  009B          +1    48     CPT0CN   DATA  09BH     ; COMPARATOR 0 CONTROL                                     
  009C          +1    49     CPT1MD   DATA  09CH     ; COMPARATOR 1 MODE                                        
  009D          +1    50     CPT0MD   DATA  09DH     ; COMPARATOR 0 MODE                                        
  009E          +1    51     CPT1MX   DATA  09EH     ; COMPARATOR 1 MUX                                         
  009F          +1    52     CPT0MX   DATA  09FH     ; COMPARATOR 0 MUX                                         
  00A0          +1    53     P2       DATA  0A0H     ; PORT 2                                                   
  00A1          +1    54     SPI0CFG  DATA  0A1H     ; SPI0 CONFIGURATION                                        
  00A2          +1    55     SPI0CKR  DATA  0A2H     ; SPI0 CLOCK CONFIGURATION                                  
  00A3          +1    56     SPI0DAT  DATA  0A3H     ; SPI0 DATA                                         
  00A4          +1    57     P0MDOUT  DATA  0A4H     ; PORT 0 OUTPUT MODE                                       
  00A5          +1    58     P1MDOUT  DATA  0A5H     ; PORT 1 OUTPUT MODE                                       
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     2

  00A6          +1    59     P2MDOUT  DATA  0A6H     ; PORT 2 OUTPUT MODE                                       
  00A7          +1    60     P3MDOUT  DATA  0A7H     ; PORT 3 OUTPUT MODE                                       
  00A8          +1    61     IE       DATA  0A8H     ; INTERRUPT ENABLE                                         
  00A9          +1    62     CLKSEL   DATA  0A9H     ; CLOCK SOURCE SELECT                                      
  00AA          +1    63     EMI0CN   DATA  0AAH     ; EXTERNAL MEMORY INTERFACE CONTROL                        
  00B0          +1    64     P3       DATA  0B0H     ; PORT 3                                                   
  00B1          +1    65     OSCXCN   DATA  0B1H     ; EXTERNAL OSCILLATOR CONTROL                              
  00B2          +1    66     OSCICN   DATA  0B2H     ; INTERNAL OSCILLATOR CONTROL                              
  00B3          +1    67     OSCICL   DATA  0B3H     ; INTERNAL OSCILLATOR CALIBRATION                          
  00B5          +1    68     FLACL    DATA  0B5H     ; FLASH ACCESS LIMIT
  00B6          +1    69     FLSCL    DATA  0B6H     ; FLASH SCALE                                              
  00B7          +1    70     FLKEY    DATA  0B7H     ; FLASH LOCK & KEY                                         
  00B8          +1    71     IP       DATA  0B8H     ; INTERRUPT PRIORITY   
  00BA          +1    72     AMX0N    DATA  0BAH     ; ADC0 MUX NEGATIVE CHANNEL SELECTION                      
  00BB          +1    73     AMX0P    DATA  0BBH     ; ADC0 MUX POSITIVE CHANNEL SELECTION                      
  00BC          +1    74     ADC0CF   DATA  0BCH     ; ADC0 CONFIGURATION                                       
  00BD          +1    75     ADC0L    DATA  0BDH     ; ADC0 DATA LOW                                            
  00BE          +1    76     ADC0H    DATA  0BEH     ; ADC0 DATA HIGH                                           
  00C0          +1    77     SMB0CN   DATA  0C0H     ; SMBUS CONTROL                                            
  00C1          +1    78     SMB0CF   DATA  0C1H     ; SMBUS CONFIGURATION                                      
  00C2          +1    79     SMB0DAT  DATA  0C2H     ; SMBUS DATA                                             
  00C3          +1    80     ADC0GTL  DATA  0C3H     ; ADC0 GREATER-THAN LOW                                    
  00C4          +1    81     ADC0GTH  DATA  0C4H     ; ADC0 GREATER-THAN HIGH                                   
  00C5          +1    82     ADC0LTL  DATA  0C5H     ; ADC0 LESS-THAN LOW                                       
  00C6          +1    83     ADC0LTH  DATA  0C6H     ; ADC0 LESS-THAN HIGH                                      
  00C8          +1    84     TMR2CN   DATA  0C8H     ; TIMER 2 CONTROL                                                
  00CA          +1    85     TMR2RLL  DATA  0CAH     ; TIMER 2 RELOAD LOW                                       
  00CB          +1    86     TMR2RLH  DATA  0CBH     ; TIMER 2 RELOAD HIGH                                      
  00CC          +1    87     TMR2L    DATA  0CCH     ; TIMER 2 LOW BYTE                                         
  00CD          +1    88     TMR2H    DATA  0CDH     ; TIMER 2 HIGH BYTE                                        
  00D0          +1    89     PSW      DATA  0D0H     ; PROGRAM STATUS WORD                                      
  00D1          +1    90     REF0CN   DATA  0D1H     ; VOLTAGE REFERENCE 0 CONTROL                              
  00D4          +1    91     P0SKIP   DATA  0D4H     ; PORT 0 CROSSBAR SKIP                                     
  00D5          +1    92     P1SKIP   DATA  0D5H     ; PORT 1 CROSSBAR SKIP                                     
  00D6          +1    93     P2SKIP   DATA  0D6H     ; PORT 2 CROSSBAR SKIP     
  00D8          +1    94     PCA0CN   DATA  0D8H     ; PCA0 CONTROL                                             
  00D9          +1    95     PCA0MD   DATA  0D9H     ; PCA0 MODE                                                
  00DA          +1    96     PCA0CPM0 DATA  0DAH     ; PCA0 MODULE 0 MODE                                       
  00DB          +1    97     PCA0CPM1 DATA  0DBH     ; PCA0 MODULE 1 MODE                                       
  00DC          +1    98     PCA0CPM2 DATA  0DCH     ; PCA0 MODULE 2 MODE     
  00DD          +1    99     PCA0CPM3 DATA  0DDH     ; PCA0 MODULE 3 MODE                                       
  00DE          +1   100     PCA0CPM4 DATA  0DEH     ; PCA0 MODULE 4 MODE                                    
  00E0          +1   101     ACC      DATA  0E0H     ; ACCUMULATOR                                              
  00E1          +1   102     XBR0     DATA  0E1H     ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0                
  00E2          +1   103     XBR1     DATA  0E2H     ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1                
  00E4          +1   104     IT01CF   DATA  0E4H     ; INT0/INT1 CONFIGURATION                                  
  00E6          +1   105     EIE1     DATA  0E6H     ; EXTERNAL INTERRUPT ENABLE 1                     
  00E8          +1   106     ADC0CN   DATA  0E8H     ; ADC 0 CONTROL                                            
  00E9          +1   107     PCA0CPL1 DATA  0E9H     ; PCA0 MODULE 1 CAPTURE/COMPARE REGISTER LOW BYTE          
  00EA          +1   108     PCA0CPH1 DATA  0EAH     ; PCA0 MODULE 1 CAPTURE/COMPARE REGISTER HIGH BYTE         
  00EB          +1   109     PCA0CPL2 DATA  0EBH     ; PCA0 MODULE 2 CAPTURE/COMPARE REGISTER LOW BYTE          
  00EC          +1   110     PCA0CPH2 DATA  0ECH     ; PCA0 MODULE 2 CAPTURE/COMPARE REGISTER HIGH BYTE         
  00ED          +1   111     PCA0CPL3 DATA  0EDH     ; PCA0 MODULE 3 CAPTURE/COMPARE REGISTER LOW BYTE          
  00EE          +1   112     PCA0CPH3 DATA  0EEH     ; PCA0 MODULE 3 CAPTURE/COMPARE REGISTER HIGH BYTE         
  00EF          +1   113     RSTSRC   DATA  0EFH     ; RESET SOURCE                                             
  00F0          +1   114     B        DATA  0F0H     ; B REGISTER                                               
  00F1          +1   115     P0MDIN   DATA  0F1H     ; PORT 0 INPUT MODE REGISTER                               
  00F2          +1   116     P1MDIN   DATA  0F2H     ; PORT 1 INPUT MODE REGISTER                               
  00F3          +1   117     P2MDIN   DATA  0F3H     ; PORT 2 INPUT MODE REGISTER                               
  00F4          +1   118     P3MDIN   DATA  0F4H     ; PORT 3 INPUT MODE REGISTER                               
  00F6          +1   119     EIP1     DATA  0F6H     ; EXTERNAL INTERRUPT PRIORITY 1
  00F8          +1   120     SPI0CN   DATA  0F8H     ; SPI0 CONTROL                                             
  00F9          +1   121     PCA0L    DATA  0F9H     ; PCA0 COUNTER REGISTER LOW BYTE                           
  00FA          +1   122     PCA0H    DATA  0FAH     ; PCA0 COUNTER REGISTER HIGH BYTE                          
  00FB          +1   123     PCA0CPL0 DATA  0FBH     ; PCA MODULE 0 CAPTURE/COMPARE REGISTER LOW BYTE           
  00FC          +1   124     PCA0CPH0 DATA  0FCH     ; PCA MODULE 0 CAPTURE/COMPARE REGISTER HIGH BYTE          
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     3

  00FD          +1   125     PCA0CPL4 DATA  0FDH     ; PCA MODULE 4 CAPTURE/COMPARE REGISTER LOW BYTE           
  00FE          +1   126     PCA0CPH4 DATA  0FEH     ; PCA MODULE 4 CAPTURE/COMPARE REGISTER HIGH BYTE      
  00FF          +1   127     VDM0CN   DATA  0FFH     ; VDD MONITOR CONTROL
                +1   128     
                +1   129     ;------------------------------------------------------------------------------
                +1   130     ;BIT DEFINITIONS
                +1   131     ;
                +1   132     ; TCON 88H
  0088          +1   133     IT0      BIT   TCON.0   ; EXT. INTERRUPT 0 TYPE
  0089          +1   134     IE0      BIT   TCON.1   ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   135     IT1      BIT   TCON.2   ; EXT. INTERRUPT 1 TYPE
  008B          +1   136     IE1      BIT   TCON.3   ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   137     TR0      BIT   TCON.4   ; TIMER 0 ON/OFF CONTROL
  008D          +1   138     TF0      BIT   TCON.5   ; TIMER 0 OVERFLOW FLAG
  008E          +1   139     TR1      BIT   TCON.6   ; TIMER 1 ON/OFF CONTROL
  008F          +1   140     TF1      BIT   TCON.7   ; TIMER 1 OVERFLOW FLAG
                +1   141     
                +1   142     ; SCON0  0x98 
  0098          +1   143     RI0      BIT   SCON0.0  ; RECEIVE INTERRUPT FLAG                                
  0099          +1   144     TI0      BIT   SCON0.1  ; TRANSMIT INTERRUPT FLAG                               
  009A          +1   145     RB80     BIT   SCON0.2  ; RECEIVE BIT 8                                         
  009B          +1   146     TB80     BIT   SCON0.3  ; TRANSMIT BIT 8                                        
  009C          +1   147     REN0     BIT   SCON0.4  ; RECEIVE ENABLE                                        
  009D          +1   148     MCE0     BIT   SCON0.5  ; MULTIPROCESSOR COMMUNICATION ENABLE                   
  009F          +1   149     S0MODE   BIT   SCON0.7  ; SERIAL MODE CONTROL BIT 0                             
                +1   150     
                +1   151     ; IE  0xA8 
  00A8          +1   152     EX0      BIT   IE.0     ; EXTERNAL INTERRUPT 0 ENABLE                           
  00A9          +1   153     ET0      BIT   IE.1     ; TIMER 0 INTERRUPT ENABLE                              
  00AA          +1   154     EX1      BIT   IE.2     ; EXTERNAL INTERRUPT 1 ENABLE                           
  00AB          +1   155     ET1      BIT   IE.3     ; TIMER 1 INTERRUPT ENABLE                              
  00AC          +1   156     ES0      BIT   IE.4     ; UART0 INTERRUPT ENABLE                                
  00AD          +1   157     ET2      BIT   IE.5     ; TIMER 2 INTERRUPT ENABLE                              
  00AF          +1   158     EA       BIT   IE.7     ; GLOBAL INTERRUPT ENABLE                               
                +1   159     
                +1   160     ; IP  0xB8 
  00B8          +1   161     PX0      BIT   IP.0     ; EXTERNAL INTERRUPT 0 PRIORITY                         
  00B9          +1   162     PT0      BIT   IP.1     ; TIMER 0 PRIORITY                                      
  00BA          +1   163     PX1      BIT   IP.2     ; EXTERNAL INTERRUPT 1 PRIORITY                         
  00BB          +1   164     PT1      BIT   IP.3     ; TIMER 1 PRIORITY                                      
  00BC          +1   165     PS0      BIT   IP.4     ; UART0 PRIORITY                                        
  00BD          +1   166     PT2      BIT   IP.5     ; TIMER 2 PRIORITY                                      
                +1   167     
                +1   168     ; SMB0CN 0xC0 
  00C0          +1   169     SI       BIT   SMB0CN.0 ; SMBUS0 INTERRUPT FLAG                                 
  00C1          +1   170     ACK      BIT   SMB0CN.1 ; ACKNOWLEDGE FLAG                                      
  00C2          +1   171     ARBLOST  BIT   SMB0CN.2 ; ARBITRATION LOST INDICATOR                            
  00C3          +1   172     ACKRQ    BIT   SMB0CN.3 ; ACKNOWLEDGE REQUEST                                   
  00C4          +1   173     STO      BIT   SMB0CN.4 ; STOP FLAG                                             
  00C5          +1   174     STA      BIT   SMB0CN.5 ; START FLAG                                            
  00C6          +1   175     TXMODE   BIT   SMB0CN.6 ; TRANSMIT MODE INDICATOR                               
  00C7          +1   176     MASTER   BIT   SMB0CN.7 ; MASTER/SLAVE INDICATOR                                
                +1   177     
                +1   178     ; TMR2CN 0xC8 
  00C8          +1   179     T2XCLK   BIT   TMR2CN.0 ; TIMER 2 EXTERNAL CLOCK SELECT                         
  00CA          +1   180     TR2      BIT   TMR2CN.2 ; TIMER 2 ON/OFF CONTROL                                
  00CB          +1   181     T2SPLIT  BIT   TMR2CN.3 ; TIMER 2 SPLIT MODE ENABLE                             
  00CD          +1   182     TF2LEN   BIT   TMR2CN.5 ; TIMER 2 LOW BYTE INTERRUPT ENABLE                     
  00CE          +1   183     TF2L     BIT   TMR2CN.6 ; TIMER 2 LOW BYTE OVERFLOW FLAG                        
  00CF          +1   184     TF2H     BIT   TMR2CN.7 ; TIMER 2 HIGH BYTE OVERFLOW FLAG                       
                +1   185     
                +1   186     ; PSW 0xD0 
  00D0          +1   187     P        BIT   PSW.0    ; ACCUMULATOR PARITY FLAG                               
  00D1          +1   188     F1       BIT   PSW.1    ; USER FLAG 1                                           
  00D2          +1   189     OV       BIT   PSW.2    ; OVERFLOW FLAG                                         
  00D3          +1   190     RS0      BIT   PSW.3    ; REGISTER BANK SELECT 0                                
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     4

  00D4          +1   191     RS1      BIT   PSW.4    ; REGISTER BANK SELECT 1                                
  00D5          +1   192     F0       BIT   PSW.5    ; USER FLAG 0                                           
  00D6          +1   193     AC       BIT   PSW.6    ; AUXILIARY CARRY FLAG                                  
  00D7          +1   194     CY       BIT   PSW.7    ; CARRY FLAG                                            
                +1   195     
                +1   196     ; PCA0CN 0xD8H 
  00D8          +1   197     CCF0     BIT   PCA0CN.0 ; PCA0 MODULE 0 CAPTURE/COMPARE FLAG                    
  00D9          +1   198     CCF1     BIT   PCA0CN.1 ; PCA0 MODULE 1 CAPTURE/COMPARE FLAG                    
  00DA          +1   199     CCF2     BIT   PCA0CN.2 ; PCA0 MODULE 2 CAPTURE/COMPARE FLAG                    
  00DB          +1   200     CCF3     BIT   PCA0CN.3 ; PCA0 MODULE 3 CAPTURE/COMPARE FLAG                    
  00DC          +1   201     CCF4     BIT   PCA0CN.4 ; PCA0 MODULE 4 CAPTURE/COMPARE FLAG                    
  00DE          +1   202     CR       BIT   PCA0CN.6 ; PCA0 COUNTER RUN CONTROL                              
  00DF          +1   203     CF       BIT   PCA0CN.7 ; PCA0 COUNTER OVERFLOW FLAG                            
                +1   204     
                +1   205     ; ADC0CN 0xE8H 
  00E8          +1   206     AD0CM0   BIT   ADC0CN.0 ; ADC0 CONVERSION MODE SELECT 0                         
  00E9          +1   207     AD0CM1   BIT   ADC0CN.1 ; ADC0 CONVERSION MODE SELECT 1                         
  00EA          +1   208     AD0CM2   BIT   ADC0CN.2 ; ADC0 CONVERSION MODE SELECT 2                         
  00EB          +1   209     AD0WINT  BIT   ADC0CN.3 ; ADC0 WINDOW COMPARE INTERRUPT FLAG                    
  00EC          +1   210     AD0BUSY  BIT   ADC0CN.4 ; ADC0 BUSY FLAG                                        
  00ED          +1   211     AD0INT   BIT   ADC0CN.5 ; ADC0 CONVERISION COMPLETE INTERRUPT FLAG              
  00EE          +1   212     AD0TM    BIT   ADC0CN.6 ; ADC0 TRACK MODE                                       
  00EF          +1   213     AD0EN    BIT   ADC0CN.7 ; ADC0 ENABLE                                           
                +1   214     
                +1   215     ; SPI0CN 0xF8H 
  00FF          +1   216     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG                                  
  00FE          +1   217     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG                            
  00FD          +1   218     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG                                 
  00FC          +1   219     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG                                 
  00FB          +1   220     TXBSY    BIT   SPI0CN.3 ; SPI 0 SLAVE SELECT MODE 1                             
  00FA          +1   221     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT MODE 0                             
  00F9          +1   222     TXBMT    BIT   SPI0CN.1 ; SPI 0 TRANSMIT BUFFER EMPTY                           
  00F8          +1   223     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE                                      
                     224     
                     225     NAME    MAIN
                     226     
0000                 227                             org 0h;    cseg AT 0
0000 020000   F      228                jmp begin;;;;Main               ; Locate a jump to the start of code at 
                     229                                             
0003                 230                                                     org 3
0003 32              231                                                     reti
000B                 232                                                     org 0bh
000B 32              233                                                     reti
0013                 234                                                     org 13h
0013 32              235                                                     reti
001B                 236                                                     org 1bh
001B 32              237                                                     reti
0023                 238                                                     org 23h
0023 32              239                                                     reti
002B                 240                                                     org 2bh
002B 32              241                                                     reti
0033                 242                                                     org 33h
0033 32              243                                                     reti
003B                 244                                                     org 3bh
003B 32              245                                                     reti
0043                 246                                                     org 43h
0043 32              247                                                     reti
004B                 248                                                     org 4bh
004B 32              249                                                     reti
0053                 250                                                     org 53h
0053 32              251                                                     reti
005B                 252                                                     org 5bh
                     253                                                     
005B 32              254                                                     reti
0063                 255                                                     org 63h
0063 32              256                                                     reti
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     5

006B                 257                                                     org 6bh
006B 32              258                                                     reti
0073                 259                                                      org 73h
0073 32              260                                                     reti
                     261                                                     
                     262     Main         SEGMENT  CODE
                     263                                                     
                     264     
----                 265                  rseg     Main          ; Switch to this code segment.
                     266     
                     267                  using    0              ; Specify register bank for the following
                     268     
0100                 269     org 100h
                     270     ;$EJECT
                     271     
0100                 272     begin:       ;;;;;;;;;;;;;;;;;;;;
0100 7581E0          273                                              mov  sp, #0e0h
0103 75F900          274                                              mov    PCA0L,#0
0106 75D900          275                                              mov PCA0MD, #00000000b
0109 75A400          276                                              mov p0mdout,#00000000b;
010C 75A5BF          277                                              mov p1mdout, #10111111b;
010F 75A63F          278                                              mov p2mdout, #00111111b;
0112 75F3FF          279                                              mov p2mdin, #11111111b;
0115 75A717          280                                              mov p3mdout, #00010111b;00000000b
0118 75F1F2          281                                              mov P0MDIN,#11110010b;
011B 75F417          282                                              mov P3MDIN,#00010111b;; #11111111b
011E 75D48D          283                mov p0skip, #10001101b;
0121 75D50F          284                                     mov     P1SKIP,#00001111b;00001110b
0124 75F2F0          285                                     mov P1MDIN, #11110000b;11110001b
0127 75E105          286                                              mov xbr0,#00000101b    ;10100101b
012A 75E242          287                                              mov XBR1, #01000010b;01000000b
012D 75E400          288                                              mov IT01CF, #00000000b
                     289     
                     290               
0130 75C1C2          291                                              mov smb0cf, #11000010b 
0133 759810          292      mov SCON0,#10h                                   
                     293                                                                               
0136 758922          294                mov  TMOD, #00100010B                ;регистр режимов
0139 758E30          295                                              mov CKCON, #00110000b    ;сист частота/12         
                                     ; Установка таймера
013C 758CF9          296                                              mov th0,#0f9h
013F 758AF9          297                                              mov tl0,#0f9h 
0142 75E680          298                                              MOV EIE1,#10000000B;разрешение прер по индикации
                     299     
0145 75BB13          300                                              mov amx0p,#00010011b
0148 75BA1F          301                                              mov amx0n,#00011111b
014B 75BCF8          302                                              mov adc0cf,#11111000b
014E 75E880          303                                             mov adc0cn,#10000000b;;;;;;;;
0151 75B1E7          304                                              mov oscxcn,#11100111b
0154 E5B1            305     gener:     mov a, oscxcn
0156 B4E7FB          306                cjne a,#11100111b,gener
0159 75A901          307     mov clksel,#00000001b                    
015C 75B243          308                                              mov OSCICN,#01000011b 
015F 75CA00          309                                              mov tmr2rll,#0
0162 75CBD1          310                                              mov tmr2rlh,#0d1h
                     311                                              ;mov tmr2h,#68h;d1h;TIMER2           
0165 75C80C          312                mov tmr2cn,#00001100b
0168 C2CE            313                                              clr tmr2cn.6
016A 7594CC          314                                              mov tmr3l,#0cch
016D 7595F8          315                                              mov tmr3h,#0f8h
0170 7592CC          316                                              mov tmr3rll,#0cch
0173 7593F8          317                                              mov tmr3rlh,#0f8h
0176 759104          318                                              mov tmr3cn,#00000100b
0179 D28E            319                setb  TCON.6                 ;регистр управления
017B D28C            320                                              setb tcon.4
017D 75FF80          321                                             mov     VDM0CN,#80h             ;упр монитором пита
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     6

                             ния
0180 75EF02          322                                             mov     RSTSRC,#02h             ;источники сброса
0183 75A880          323                                      mov ie,#10000000b      ;Снятие блокировки всех прерываний
                     324                
                     325                ;setb  IP.5                                                   ;Присваивание тайм
                             еру 1 высшего приоритета
                     326              ;  mov  TL1, #0                        ;Занесение константы в младший байт таймера
                              1
                     327              ;  mov  TH1, #0fah;f2h         ;Занесение константы в старший байт тайм
0186 7581E0          328                                                             mov     sp,#0e0h
0189 75A890          329                                                             mov     IE,#90h                 ;d4
                             -прер по интерф
                     330                                                             ;;;;;;;;;;;
018C D2BC            331                                                             setb    IP.4
018E 758B00          332                                                     mov  TL1, #0                    ;Занесение 
                             константы в младший байт таймера 1
0191 758DD0          333                     mov  TH1, #0d0h;;f2h            ;Занесение константы в старший байт таймера
                              1
                     334                                     
                     335                             
                     336     
0194 75EC80          337                                             mov pca0cph2, #080h
0197 75EB80          338                                              mov pca0cpl2, #080h
019A 75D905          339                                      mov pca0md, #00000101b
019D 75DA20          340                                              mov pca0cpm0, #00100000b
01A0 75DB20          341                                              mov pca0cpm1, #00100000b
                     342                                              
01A3 75DC03          343                                              mov pca0cpm2, #00000011b
01A6 759A80          344                                              mov    CPT1CN,#10000000b
01A9 759B80          345                                              mov    CPT0CN,#10000000b
01AC 75D102          346                                             mov             REF0CN,#00000010b
01AF 75BE00          347                                             mov     adc0h,#0
01B2 75BD00          348                                             mov     adc0l,#0
                     349     
                     350     
                     351     ;;;;;;;;;;;;;;;;;;;;;;;;;
                     352     
                     353                             
                     354     
                     355     
                     356     
                     357     
                     358     
                     359     ;;;;;;;;;;;;;;;;;;;;;;;;;;
                     360     END
                                                                             
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     7

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AC . . . . . . . .  B ADDR   00D0H.6 A      193#
ACC. . . . . . . .  D ADDR   00E0H   A      101#
ACK. . . . . . . .  B ADDR   00C0H.1 A      170#
ACKRQ. . . . . . .  B ADDR   00C0H.3 A      172#
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      210#
AD0CM0 . . . . . .  B ADDR   00E8H.0 A      206#
AD0CM1 . . . . . .  B ADDR   00E8H.1 A      207#
AD0CM2 . . . . . .  B ADDR   00E8H.2 A      208#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      213#
AD0INT . . . . . .  B ADDR   00E8H.5 A      211#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      212#
AD0WINT. . . . . .  B ADDR   00E8H.3 A      209#
ADC0CF . . . . . .  D ADDR   00BCH   A      74# 302
ADC0CN . . . . . .  D ADDR   00E8H   A      106# 206 207 208 209 210 211 212 213 303
ADC0GTH. . . . . .  D ADDR   00C4H   A      81#
ADC0GTL. . . . . .  D ADDR   00C3H   A      80#
ADC0H. . . . . . .  D ADDR   00BEH   A      76# 347
ADC0L. . . . . . .  D ADDR   00BDH   A      75# 348
ADC0LTH. . . . . .  D ADDR   00C6H   A      83#
ADC0LTL. . . . . .  D ADDR   00C5H   A      82#
AMX0N. . . . . . .  D ADDR   00BAH   A      72# 301
AMX0P. . . . . . .  D ADDR   00BBH   A      73# 300
ARBLOST. . . . . .  B ADDR   00C0H.2 A      171#
B. . . . . . . . .  D ADDR   00F0H   A      114#
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   228 272#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      197#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      198#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      199#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      200#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      201#
CF . . . . . . . .  B ADDR   00D8H.7 A      203#
CKCON. . . . . . .  D ADDR   008EH   A      37# 295
CLKSEL . . . . . .  D ADDR   00A9H   A      62# 307
CPT0CN . . . . . .  D ADDR   009BH   A      48# 345
CPT0MD . . . . . .  D ADDR   009DH   A      50#
CPT0MX . . . . . .  D ADDR   009FH   A      52#
CPT1CN . . . . . .  D ADDR   009AH   A      47# 344
CPT1MD . . . . . .  D ADDR   009CH   A      49#
CPT1MX . . . . . .  D ADDR   009EH   A      51#
CR . . . . . . . .  B ADDR   00D8H.6 A      202#
CY . . . . . . . .  B ADDR   00D0H.7 A      194#
DPH. . . . . . . .  D ADDR   0083H   A      29#
DPL. . . . . . . .  D ADDR   0082H   A      28#
EA . . . . . . . .  B ADDR   00A8H.7 A      158#
EIE1 . . . . . . .  D ADDR   00E6H   A      105# 298
EIP1 . . . . . . .  D ADDR   00F6H   A      119#
EMI0CN . . . . . .  D ADDR   00AAH   A      63#
ES0. . . . . . . .  B ADDR   00A8H.4 A      156#
ET0. . . . . . . .  B ADDR   00A8H.1 A      153#
ET1. . . . . . . .  B ADDR   00A8H.3 A      155#
ET2. . . . . . . .  B ADDR   00A8H.5 A      157#
EX0. . . . . . . .  B ADDR   00A8H.0 A      152#
EX1. . . . . . . .  B ADDR   00A8H.2 A      154#
F0 . . . . . . . .  B ADDR   00D0H.5 A      192#
F1 . . . . . . . .  B ADDR   00D0H.1 A      188#
FLACL. . . . . . .  D ADDR   00B5H   A      68#
FLKEY. . . . . . .  D ADDR   00B7H   A      70#
FLSCL. . . . . . .  D ADDR   00B6H   A      69#
GENER. . . . . . .  C ADDR   0154H   R   SEG=MAIN   305# 306
IE . . . . . . . .  D ADDR   00A8H   A      61# 152 153 154 155 156 157 158 323 329
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     8

IE0. . . . . . . .  B ADDR   0088H.1 A      134#
IE1. . . . . . . .  B ADDR   0088H.3 A      136#
IP . . . . . . . .  D ADDR   00B8H   A      71# 161 162 163 164 165 166 331
IT0. . . . . . . .  B ADDR   0088H.0 A      133#
IT01CF . . . . . .  D ADDR   00E4H   A      104# 288
IT1. . . . . . . .  B ADDR   0088H.2 A      135#
MAIN . . . . . . .  C SEG    01B5H       REL=UNIT   225 262# 265
MASTER . . . . . .  B ADDR   00C0H.7 A      176#
MCE0 . . . . . . .  B ADDR   0098H.5 A      148#
MODF . . . . . . .  B ADDR   00F8H.5 A      218#
OSCICL . . . . . .  D ADDR   00B3H   A      67#
OSCICN . . . . . .  D ADDR   00B2H   A      66# 308
OSCXCN . . . . . .  D ADDR   00B1H   A      65# 304 305
OV . . . . . . . .  B ADDR   00D0H.2 A      189#
P. . . . . . . . .  B ADDR   00D0H.0 A      187#
P0 . . . . . . . .  D ADDR   0080H   A      26#
P0MDIN . . . . . .  D ADDR   00F1H   A      115# 281
P0MDOUT. . . . . .  D ADDR   00A4H   A      57# 276
P0SKIP . . . . . .  D ADDR   00D4H   A      91# 283
P1 . . . . . . . .  D ADDR   0090H   A      39#
P1MDIN . . . . . .  D ADDR   00F2H   A      116# 285
P1MDOUT. . . . . .  D ADDR   00A5H   A      58# 277
P1SKIP . . . . . .  D ADDR   00D5H   A      92# 284
P2 . . . . . . . .  D ADDR   00A0H   A      53#
P2MDIN . . . . . .  D ADDR   00F3H   A      117# 279
P2MDOUT. . . . . .  D ADDR   00A6H   A      59# 278
P2SKIP . . . . . .  D ADDR   00D6H   A      93#
P3 . . . . . . . .  D ADDR   00B0H   A      64#
P3MDIN . . . . . .  D ADDR   00F4H   A      118# 282
P3MDOUT. . . . . .  D ADDR   00A7H   A      60# 280
PCA0CN . . . . . .  D ADDR   00D8H   A      94# 197 198 199 200 201 202 203
PCA0CPH0 . . . . .  D ADDR   00FCH   A      124#
PCA0CPH1 . . . . .  D ADDR   00EAH   A      108#
PCA0CPH2 . . . . .  D ADDR   00ECH   A      110# 337
PCA0CPH3 . . . . .  D ADDR   00EEH   A      112#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      126#
PCA0CPL0 . . . . .  D ADDR   00FBH   A      123#
PCA0CPL1 . . . . .  D ADDR   00E9H   A      107#
PCA0CPL2 . . . . .  D ADDR   00EBH   A      109# 338
PCA0CPL3 . . . . .  D ADDR   00EDH   A      111#
PCA0CPL4 . . . . .  D ADDR   00FDH   A      125#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      96# 340
PCA0CPM1 . . . . .  D ADDR   00DBH   A      97# 341
PCA0CPM2 . . . . .  D ADDR   00DCH   A      98# 343
PCA0CPM3 . . . . .  D ADDR   00DDH   A      99#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      100#
PCA0H. . . . . . .  D ADDR   00FAH   A      122#
PCA0L. . . . . . .  D ADDR   00F9H   A      121# 274
PCA0MD . . . . . .  D ADDR   00D9H   A      95# 275 339
PCON . . . . . . .  D ADDR   0087H   A      30#
PS0. . . . . . . .  B ADDR   00B8H.4 A      165#
PSCTL. . . . . . .  D ADDR   008FH   A      38#
PSW. . . . . . . .  D ADDR   00D0H   A      89# 187 188 189 190 191 192 193 194
PT0. . . . . . . .  B ADDR   00B8H.1 A      162#
PT1. . . . . . . .  B ADDR   00B8H.3 A      164#
PT2. . . . . . . .  B ADDR   00B8H.5 A      166#
PX0. . . . . . . .  B ADDR   00B8H.0 A      161#
PX1. . . . . . . .  B ADDR   00B8H.2 A      163#
RB80 . . . . . . .  B ADDR   0098H.2 A      145#
REF0CN . . . . . .  D ADDR   00D1H   A      90# 346
REN0 . . . . . . .  B ADDR   0098H.4 A      147#
RI0. . . . . . . .  B ADDR   0098H.0 A      143#
RS0. . . . . . . .  B ADDR   00D0H.3 A      190#
RS1. . . . . . . .  B ADDR   00D0H.4 A      191#
RSTSRC . . . . . .  D ADDR   00EFH   A      113# 322
RXOVRN . . . . . .  B ADDR   00F8H.4 A      219#
A51 MACRO ASSEMBLER  AMPER1                                                               09/16/2005 16:24:49 PAGE     9

S0MODE . . . . . .  B ADDR   0098H.7 A      149#
SBUF0. . . . . . .  D ADDR   0099H   A      46#
SCON0. . . . . . .  D ADDR   0098H   A      45# 143 144 145 146 147 148 149 292
SI . . . . . . . .  B ADDR   00C0H.0 A      169#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      221#
SMB0CF . . . . . .  D ADDR   00C1H   A      78# 291
SMB0CN . . . . . .  D ADDR   00C0H   A      77# 169 170 171 172 173 174 175 176
SMB0DAT. . . . . .  D ADDR   00C2H   A      79#
SP . . . . . . . .  D ADDR   0081H   A      27# 273 328
SPI0CFG. . . . . .  D ADDR   00A1H   A      54#
SPI0CKR. . . . . .  D ADDR   00A2H   A      55#
SPI0CN . . . . . .  D ADDR   00F8H   A      120# 216 217 218 219 220 221 222 223
SPI0DAT. . . . . .  D ADDR   00A3H   A      56#
SPIEN. . . . . . .  B ADDR   00F8H.0 A      223#
SPIF . . . . . . .  B ADDR   00F8H.7 A      216#
STA. . . . . . . .  B ADDR   00C0H.5 A      174#
STO. . . . . . . .  B ADDR   00C0H.4 A      173#
T2SPLIT. . . . . .  B ADDR   00C8H.3 A      181#
T2XCLK . . . . . .  B ADDR   00C8H.0 A      179#
TB80 . . . . . . .  B ADDR   0098H.3 A      146#
TCON . . . . . . .  D ADDR   0088H   A      31# 133 134 135 136 137 138 139 140 319 320
TF0. . . . . . . .  B ADDR   0088H.5 A      138#
TF1. . . . . . . .  B ADDR   0088H.7 A      140#
TF2H . . . . . . .  B ADDR   00C8H.7 A      184#
TF2L . . . . . . .  B ADDR   00C8H.6 A      183#
TF2LEN . . . . . .  B ADDR   00C8H.5 A      182#
TH0. . . . . . . .  D ADDR   008CH   A      35# 296
TH1. . . . . . . .  D ADDR   008DH   A      36# 333
TI0. . . . . . . .  B ADDR   0098H.1 A      144#
TL0. . . . . . . .  D ADDR   008AH   A      33# 297
TL1. . . . . . . .  D ADDR   008BH   A      34# 332
TMOD . . . . . . .  D ADDR   0089H   A      32# 294
TMR2CN . . . . . .  D ADDR   00C8H   A      84# 179 180 181 182 183 184 312 313
TMR2H. . . . . . .  D ADDR   00CDH   A      88#
TMR2L. . . . . . .  D ADDR   00CCH   A      87#
TMR2RLH. . . . . .  D ADDR   00CBH   A      86# 310
TMR2RLL. . . . . .  D ADDR   00CAH   A      85# 309
TMR3CN . . . . . .  D ADDR   0091H   A      40# 318
TMR3H. . . . . . .  D ADDR   0095H   A      44# 315
TMR3L. . . . . . .  D ADDR   0094H   A      43# 314
TMR3RLH. . . . . .  D ADDR   0093H   A      42# 317
TMR3RLL. . . . . .  D ADDR   0092H   A      41# 316
TR0. . . . . . . .  B ADDR   0088H.4 A      137#
TR1. . . . . . . .  B ADDR   0088H.6 A      139#
TR2. . . . . . . .  B ADDR   00C8H.2 A      180#
TXBMT. . . . . . .  B ADDR   00F8H.1 A      222#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      220#
TXMODE . . . . . .  B ADDR   00C0H.6 A      175#
VDM0CN . . . . . .  D ADDR   00FFH   A      127# 321
WCOL . . . . . . .  B ADDR   00F8H.6 A      217#
XBR0 . . . . . . .  D ADDR   00E1H   A      102# 286
XBR1 . . . . . . .  D ADDR   00E2H   A      103# 287


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
